<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Paypal on Edmonds Commerce Dev Blog</title>
    <link>http://example.com/tags/paypal/</link>
    <description>Recent content in Paypal on Edmonds Commerce Dev Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 15 Oct 2014 09:53:44 +0000</lastBuildDate>
    <atom:link href="http://example.com/tags/paypal/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Intermittent PayPal IPN failure in Magento</title>
      <link>http://example.com/magento/intermittent-paypal-ipn-failure-in-magento.html</link>
      <pubDate>Wed, 15 Oct 2014 09:53:44 +0000</pubDate>
      
      <guid>http://example.com/magento/intermittent-paypal-ipn-failure-in-magento.html</guid>
      <description>&lt;p&gt;On one or two store we had an issue with intermittent IPN failures. Some paypal orders would be stuck on the &amp;lsquo;Pending&amp;rsquo; status even if there was a sucessful paypal payment. In the exception logs there would be the following exception being thrown &amp;lsquo;PayPal IPN postback failure. See paypal_unknown_ipn.log for details.&amp;rsquo; on line 156 of app/code/core/Mage/Paypal/Model/Ipn.php.&lt;/p&gt;

&lt;p&gt;###What the issue turned out to be&lt;/p&gt;

&lt;p&gt;The issue turned out to be curl adding in extra error. On occasions curl will send the following header &amp;lsquo;Expect: 100&amp;rsquo;. The idea behind that is that rather than curl just send the data. It will send a inital request just to check if the web server will accept the data. Curl will usually fall on this bahaviour if the request is above a certain size.&lt;/p&gt;

&lt;p&gt;It turns out that the magento implementation assumes that the response will be consitant. But with the ocasional &amp;lsquo;Expect&amp;rsquo; header bing in the request this is not always the case.&lt;/p&gt;

&lt;p&gt;In the _postBack method in the IPN class where it makes the curl post back is recived there is the following code near to the end of the method.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;x&#34;&gt;    $response = preg_split(&amp;#39;/^\r?$/m&amp;#39;, $response, 2);&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    $response = trim($response[1]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This code assumes the line position of where the &amp;lsquo;VERIFIED&amp;rsquo; line would occur. To resolve the header issue the following code should be used instead.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;x&#34;&gt;    $response = preg_split(&amp;#39;/^\r?$/m&amp;#39;, $response);&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    $response = trim(end($response));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As the &amp;lsquo;VERIFIED&amp;rsquo; line will always be the last line in the response. Regardless of any extra headers being added. This should resolve the issue but of corse remeber to use the local method and copy the class to the local folder with the correct path before doing the modification.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Comixininos</title>
      <link>http://example.com/portfolio/comixininos.html</link>
      <pubDate>Fri, 05 Aug 2011 15:25:46 +0000</pubDate>
      
      <guid>http://example.com/portfolio/comixininos.html</guid>
      <description>&lt;p&gt;&lt;div class=&#34;oldpost&#34;&gt;&lt;h4&gt;This is post is now quite old and the the information it contains may be out of date or innacurate.&lt;/h4&gt;
&lt;p&gt;
If you find any errors or have any suggestions to update the information &lt;a href=&#34;http://edmondscommerce.github.io/contact-us/index.html&#34;&gt;please let us know&lt;/a&gt;
or &lt;a href=&#34;https://github.com/edmondscommerce/edmondscommerce.github.io&#34;&gt;create a pull request on GitHub&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt; PayPal Problems &lt;/h2&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.comixininos.com/index.php/&#34;&gt;Comixininos&lt;/a&gt; currently face problems with paypal as confirmations are not being sent through when payments are made. We are fixing this so that customers can clearly see when payments have gone through so that they are not confused at which step of the process they are on.&lt;/p&gt;

&lt;h3&gt; Football Fantasy In Spain &lt;/h3&gt;

&lt;p&gt;Comixininos are e-commerce Spanish retailers that specialise in selling products from a fantasy football range. They sell small figures which can be used to play games for children or to be brought as collectable items.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Golferwithin.com - One Page Magento Store</title>
      <link>http://example.com/portfolio/one-page-magento-store.html</link>
      <pubDate>Thu, 09 Jun 2011 16:57:09 +0000</pubDate>
      
      <guid>http://example.com/portfolio/one-page-magento-store.html</guid>
      <description>&lt;h2&gt;Single Page Magento Store With Affiliate Program and PayPal Link&lt;/h2&gt;

&lt;p&gt;The aim of this project was to condense a Magento store into a single page, offering both product information and payment options. The system is to integrate with PayPal and a custom affiliate system.&lt;/p&gt;

&lt;h3&gt;Golfer Within&lt;/h3&gt;

&lt;p&gt;Run by Roseanna Leaton, one of the leading practitioners of self-improvement. A keen 9-handicap golfer, Roseanna combined her knowledge of the game and the mind mechanism to create the acclaimed Golfer Within recordings which enable any player to &lt;a href=”http://www.golferwithin.com/”&gt;lower their handicap&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://example.com/images/golferwithin.jpg&#34; alt=&#34;Image&#34; /&gt;&lt;/p&gt;

&lt;p&gt;This project asked for a one click option method linking Magento to PayPal and then back again, without having to use the normal checkout pages. This required creating custom magento controllers so the method wouldn&amp;rsquo;t interfere with the other stores running off the same back end.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Magento Paypal Transactions not Appearing &#43; Solution</title>
      <link>http://example.com/magento/magento-paypal-transactions-not-appearing-solution.html</link>
      <pubDate>Fri, 19 Nov 2010 10:59:13 +0000</pubDate>
      
      <guid>http://example.com/magento/magento-paypal-transactions-not-appearing-solution.html</guid>
      <description>&lt;p&gt;If you are scratching your head trying to figure out why your paypal transactions are not showing up in your Magento admin despite everything being set up perfectly then this may well be your solution.&lt;/p&gt;

&lt;p&gt;As recently discussed on the unofficial &lt;a href=&#34;http://www.magento-forum.co.uk&#34; title=&#34;magento forum&#34;&gt;magento forum&lt;/a&gt;, the paypal email address is &lt;strong&gt;case sensitive&lt;/strong&gt;, so if the case on either paypal and Magento do not perfectly match then things won&amp;rsquo;t work.&lt;/p&gt;

&lt;p&gt;Double check the email address in both places and then ensure they match up.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://magento-forum.co.uk/viewtopic.php?f=3&amp;t=520&amp;p=1808&#34;&gt;Heres the full post on the forum&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>