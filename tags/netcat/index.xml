<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Netcat on Edmonds Commerce Dev Blog</title>
    <link>http://example.com/tags/netcat/</link>
    <description>Recent content in Netcat on Edmonds Commerce Dev Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 06 Jan 2012 14:17:46 +0000</lastBuildDate>
    <atom:link href="http://example.com/tags/netcat/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Server Migration - Pipe Tar from Server to Server using Netcat</title>
      <link>http://example.com/linux/server-migration-pipe-tar-from-server-to-server-using-netcat.html</link>
      <pubDate>Fri, 06 Jan 2012 14:17:46 +0000</pubDate>
      
      <guid>http://example.com/linux/server-migration-pipe-tar-from-server-to-server-using-netcat.html</guid>
      <description>&lt;p&gt;If you need to transfer a large amount of data from one server to another you might normally create a large tar archive, send it across and then untar it on the other end.&lt;/p&gt;

&lt;p&gt;However a slightly slicker and easier repeated way of doing this is to pipe tar directly from one server to the other doing all three steps in one go.&lt;/p&gt;

&lt;p&gt;For this you would create a script on each server. You could of course type the commands directly but in the interests of easy repeatability and removing the scope for human error, scripts are my preferred way of doing this kind of task.&lt;/p&gt;

&lt;p&gt;Old server script:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
#!/bin/bash

cd /var/www/vhosts

# where new server IP is 123.123.123.123 and 9999 is the port the new server is listening on
tar -xvj . | nc 123.123.123.123 9999


&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;New Server Script:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
#!/bin/bash

cd /var/www/vhosts

nc -l 9999 | tar -xvf --same-owner


&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now save these scripts and make them executable (chmod +x)&lt;/p&gt;

&lt;p&gt;Now run the new server script on the new server and then run the old server script. You should quickly see the list of files being transferred appearing in both terminals.&lt;/p&gt;

&lt;p&gt;That&amp;rsquo;s it.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>