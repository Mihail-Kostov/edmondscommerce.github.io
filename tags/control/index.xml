<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Control on Edmonds Commerce Dev Blog</title>
    <link>http://edmondscommerce.github.io/tags/control/</link>
    <description>Recent content in Control on Edmonds Commerce Dev Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 11 Mar 2013 15:29:34 +0000</lastBuildDate>
    <atom:link href="http://edmondscommerce.github.io/tags/control/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Restrict Access Using .htaccess File Rules in PHP</title>
      <link>http://edmondscommerce.github.io/php/restrict-access-using-htaccess-file-rules-in-php.html</link>
      <pubDate>Mon, 11 Mar 2013 15:29:34 +0000</pubDate>
      
      <guid>http://edmondscommerce.github.io/php/restrict-access-using-htaccess-file-rules-in-php.html</guid>
      <description>&lt;p&gt;The function below is one that we have used a few times to allow certain &amp;ldquo;admin only&amp;rdquo; assets to be accessed or visible on the front end of a website.&lt;/p&gt;

&lt;p&gt;The theory is that the htaccess file in the admin folder will be kept up to date and can therefore be used as the authoritative list of IP addresses that are allowed to access admin assets.&lt;/p&gt;

&lt;p&gt;This function is simple enough and should be useful anywhere that you use htaccess to protect a certain folder and would like to implement the same white list rules in other places without having to maintain a duplicate list of authorised IP addresses.&lt;/p&gt;

&lt;p&gt;The function also uses &lt;a href=&#34;http://www.php.net/manual/en/language.variables.scope.php#language.variables.scope.static&#34; title=&#34;PHP.net Static Variables&#34; target=&#34;_blank&#34;&gt;static variables&lt;/a&gt; - a lesser known bit of PHP functionality which can be a nice easy performance optimisation when working with procedural PHP code. If a function will be called many times and will always return the same result in a single request, you can actually cache that result to a static variable and serve that on any subsequent requests.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&#34;x&#34;&gt;function isAllowedIp() {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    static $pass = null;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    if ($pass !== null) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;        return $pass;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    }&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    $pass=false;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    $customer_ip = $_SERVER[&amp;#39;REMOTE_ADDR&amp;#39;];    &lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    $htaccess = file_get_contents(&amp;#39;admin/.htaccess&amp;#39;);&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    preg_match_all(&amp;#39;%allow from ([0-9.]+)%&amp;#39;, $htaccess, $matches);&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    foreach ($matches[1] as $ip) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;        if ($ip == $customer_ip) {&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;            $pass = true; //this is stored statically for perfomance reasons&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;            return true;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;        }&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    }&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;    return false;&lt;/span&gt;
&lt;span class=&#34;x&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Document Change Tracking in Javascript</title>
      <link>http://edmondscommerce.github.io/business/document-change-tracking-in-javascript.html</link>
      <pubDate>Tue, 14 Feb 2012 08:19:01 +0000</pubDate>
      
      <guid>http://edmondscommerce.github.io/business/document-change-tracking-in-javascript.html</guid>
      <description>&lt;p&gt;Just found this really rather nice looking JavaScript change tracking system.&lt;/p&gt;

&lt;p&gt;Lawyers using email take note, Office + email is archaic&lt;/p&gt;

&lt;p&gt;If you won&amp;rsquo;t use Google Docs for privacy reasons (fair enough) then would you like us to build you your own document tracking client system?&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://nytimes.github.com/ice/demo/&#34;&gt;http://nytimes.github.com/ice/demo/&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu ACL Access Control Lists</title>
      <link>http://edmondscommerce.github.io/ubuntu/ubuntu-acl-access-control-lists.html</link>
      <pubDate>Fri, 30 Jul 2010 09:37:15 +0000</pubDate>
      
      <guid>http://edmondscommerce.github.io/ubuntu/ubuntu-acl-access-control-lists.html</guid>
      <description>&lt;p&gt;&lt;div class=&#34;oldpost&#34;&gt;&lt;h4&gt;This is post is now quite old and the the information it contains may be out of date or innacurate.&lt;/h4&gt;
&lt;p&gt;
If you find any errors or have any suggestions to update the information &lt;a href=&#34;http://edmondscommerce.github.io/contact-us/index.html&#34;&gt;please let us know&lt;/a&gt;
or &lt;a href=&#34;https://github.com/edmondscommerce/edmondscommerce.github.io&#34;&gt;create a pull request on GitHub&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
If you are working in Linux and need to set some more complex permissions than the straight user, group everyone RWX style, then you can.&lt;/p&gt;

&lt;p&gt;Working in Ubuntu, you need to first of all install ACL&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
sudo apt-get install acl

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now before you can use ACL, you need to enable it on whichever volumes you want to use it on. To do this you have to edit your fstab (which if you do it wrong can cause problems so make sure you back it up!)&lt;/p&gt;

&lt;p&gt;In the options column of the fstab for the volume you are working with, you need to add acl, eg:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
/dev/mapper/server-root /               ext4    errors=remount-ro 0 

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;becomes&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
/dev/mapper/server-root /               ext4    acl,errors=remount-ro 0 

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now you need to remount&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
mount -o remount /

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now you need to check acl is working:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
mount | grep acl

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;you should see a line with acl in there&lt;/p&gt;

&lt;p&gt;Now to recursively set an ACL for a particular user giving full access on a folder structure, use this command:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
setfacl -Rm u:user:rwX,d:u:user:rwX /path/to/folder

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To fully understand ACL, hit the man pages&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;
man acl

&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>