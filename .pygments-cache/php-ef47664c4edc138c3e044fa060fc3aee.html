<div class="highlight"><pre><span class="k">function</span> <span class="nf">normalizePath</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">array_reduce</span><span class="p">(</span><span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$path</span><span class="p">),</span> <span class="nb">create_function</span><span class="p">(</span><span class="s1">&#39;$a, $b&#39;</span><span class="p">,</span> <span class="s1">&#39;</span>
<span class="s1">			if($a === 0)</span>
<span class="s1">				$a = &amp;quot;/&amp;quot;;</span>

<span class="s1">			if($b === &amp;quot;&amp;quot; || $b === &amp;quot;.&amp;quot;)</span>
<span class="s1">				return $a;</span>

<span class="s1">			if($b === &amp;quot;..&amp;quot;)</span>
<span class="s1">				return dirname($a);</span>

<span class="s1">			return preg_replace(&amp;quot;/\/+/&amp;quot;, &amp;quot;/&amp;quot;, &amp;quot;$a/$b&amp;quot;);</span>
<span class="s1">		&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>