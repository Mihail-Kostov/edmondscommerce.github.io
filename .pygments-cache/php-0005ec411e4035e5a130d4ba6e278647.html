<div class="highlight"><pre><span class="k">function</span> <span class="nf">requrl_check</span><span class="p">(</span><span class="nv">$correct_url</span><span class="p">,</span> <span class="nv">$delay</span><span class="o">=</span><span class="mi">3</span><span class="p">){</span>
	<span class="nv">$request_url</span> <span class="o">=</span> <span class="s1">&#39;http://&#39;</span> <span class="o">.</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">];</span>
	<span class="k">if</span><span class="p">(</span><span class="nv">$request_url</span> <span class="o">!=</span> <span class="nv">$correct_url</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">headers_sent</span><span class="p">()){</span> <span class="c1">//going to assume that headers are not sent</span>
		<span class="nx">header</span><span class="p">(</span><span class="s2">&quot;HTTP/1.1 301 Moved Permanently&quot;</span><span class="p">);</span>
 			<span class="nx">header</span><span class="p">(</span><span class="s1">&#39;location: &#39;</span> <span class="o">.</span> <span class="nv">$correct_url</span> <span class="o">.</span> <span class="s1">&#39;&#39;</span><span class="p">);</span> 
 			<span class="k">exit</span><span class="p">();</span>
 		<span class="p">}</span><span class="k">else</span><span class="p">{</span>
 			<span class="k">echo</span> <span class="s2">&quot;&lt;h3&gt;The Page </span><span class="si">$request_url</span><span class="s2"> has Moved&lt;/h3&gt;</span>
<span class="s2"> 			&lt;a href=</span><span class="si">$correct_url</span><span class="s2">&gt;</span><span class="si">$correct_url</span><span class="s2">&lt;/a&gt;&quot;</span><span class="p">;</span>
 			<span class="k">echo</span> <span class="s1">&#39;&lt;h3&gt;Now Refreshing in &#39;</span> <span class="o">.</span> <span class="nv">$delay</span> <span class="o">.</span> <span class="s1">&#39; Seconds&lt;/h3&gt;Refreshing to:&lt;br&gt;&#39;</span> <span class="o">.</span> <span class="nv">$correct_url</span> <span class="o">.</span> <span class="s1">&#39;&lt;s c r i p t type=&quot;text/JavaScript&quot;&gt;&lt;!--</span>
<span class="s1">	    setTimeout(&quot;location.href = \&#39;&#39;</span> <span class="o">.</span> <span class="nv">$correct_url</span> <span class="o">.</span> <span class="s1">&#39;\&#39;;&quot;,&#39;</span> <span class="o">.</span> <span class="p">(</span><span class="nv">$delay</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;);</span>
<span class="s1">	    --&gt; &lt;/s c r i p t&gt;&#39;</span><span class="p">;</span>
	    	<span class="k">exit</span><span class="p">();</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>