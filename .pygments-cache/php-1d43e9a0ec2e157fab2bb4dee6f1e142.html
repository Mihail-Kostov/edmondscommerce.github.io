<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$config</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getConfig</span><span class="p">();</span>

<span class="nv">$originalPrefix</span> <span class="o">=</span> <span class="s1">&#39;global/resources/default_setup&#39;</span><span class="p">;</span>
<span class="nv">$newPrefix</span> <span class="o">=</span> <span class="s1">&#39;global/resources/orders_db&#39;</span><span class="p">;</span>

<span class="nv">$nodesToCopy</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;/connection/host&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/connection/username&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/connection/password&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/connection/initStatement&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/connection/model&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/connection/type&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/connection/pdoType&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/connection/active&#39;</span>
<span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$nodesToCopy</span> <span class="k">as</span> <span class="nv">$nodeToCopy</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$nodeVal</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">getNode</span><span class="p">(</span><span class="nv">$originalPrefix</span> <span class="o">.</span> <span class="nv">$nodeToCopy</span><span class="p">);</span>
    <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setNode</span><span class="p">(</span><span class="nv">$newPrefix</span><span class="o">.</span><span class="nv">$nodeToCopy</span><span class="p">,</span> <span class="nv">$nodeVal</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setNode</span><span class="p">(</span><span class="s1">&#39;global/resources/orders_db/connection/dbname&#39;</span><span class="p">,</span> <span class="s1">&#39;import_orders&#39;</span><span class="p">);</span>

<span class="nv">$ordersDb</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">&#39;core/resource&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getConnection</span><span class="p">(</span><span class="s1">&#39;orders_db&#39;</span><span class="p">);</span>
</pre></div>