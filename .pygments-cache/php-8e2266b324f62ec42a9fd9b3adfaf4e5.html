<div class="highlight"><pre><span class="sd">/**</span>
<span class="sd">     * @return Zend_Rest_Client </span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">getClient</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">null</span> <span class="o">===</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_client</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getApiUrl</span><span class="p">();</span>
            <span class="nv">$uri</span> <span class="o">=</span> <span class="nx">Zend_Uri_Http</span><span class="o">::</span><span class="na">fromString</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_Rest_Client</span><span class="p">(</span><span class="nv">$uri</span><span class="p">);</span>
            <span class="nx">Zend_Service_Abstract</span><span class="o">::</span><span class="na">getHttpClient</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setAuth</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getUsername</span><span class="p">(),</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getPassword</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_client</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>