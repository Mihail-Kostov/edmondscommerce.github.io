<div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">flushEverything</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getCacheInstance</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>
        <span class="nx">Mage</span><span class="o">::</span><span class="na">getModel</span><span class="p">(</span><span class="s1">&#39;core/design_package&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">cleanMergedJsCss</span><span class="p">();</span>
        <span class="nx">Mage</span><span class="o">::</span><span class="na">getModel</span><span class="p">(</span><span class="s1">&#39;catalog/product_image&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">clearCache</span><span class="p">();</span>
        <span class="nv">$indexer</span>    <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">&#39;index/indexer&#39;</span><span class="p">);</span>
        <span class="cm">/* @var $indexer Mage_Index_Model_Indexer */</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$indexer</span><span class="o">-&gt;</span><span class="na">getProcessesCollection</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$process</span><span class="p">){</span>
              <span class="nv">$process</span><span class="o">-&gt;</span><span class="na">reindexEverything</span><span class="p">();</span>
        <span class="p">}</span>  
    <span class="p">}</span>
</pre></div>