<div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># This is a script to upgrade wordpress.</span>
<span class="c"># Put it in your wordpress document root (the folder that contains wp-config.php)</span>
<span class="c"># chmod +x to make executable</span>
<span class="c"># ./wp-upgrade.bash to run</span>
<span class="c"># Originally here: http://yabfog.com/blog/2011/12/12/wordpress-update-bash-script</span>
<span class="nv">DIR</span><span class="o">=</span><span class="s2">&quot;$( cd -P &quot;</span><span class="k">$(</span> dirname <span class="s2">&quot;${BASH_SOURCE[0]}&quot;</span> <span class="k">)</span><span class="s2">&quot; &amp;&amp; pwd )&quot;</span>
<span class="nv">TMPDIR</span><span class="o">=</span>/tmp/wp-upgrader
mkdir -p <span class="nv">$TMPDIR</span>
<span class="nv">WPDIR</span><span class="o">=</span><span class="nv">$TMPDIR</span>/wordpress
mkdir -p <span class="nv">$WPDIR</span>
<span class="nb">cd</span> <span class="nv">$TMPDIR</span>
rm -rf latest.zip ./wordpress <span class="c"># Clean up from the last run</span>
wget -nd http://wordpress.org/latest.zip
unzip latest.zip
mv <span class="nv">$DIR</span>/wp-config.php <span class="nv">$DIR</span>/.wp-config.php.backup <span class="c"># Stash your configuration someplace safe</span>
rm <span class="nv">$DIR</span>/*.<span class="o">{</span>txt,html,php<span class="o">}</span> <span class="c"># Delete the old install</span>
rm -rf <span class="nv">$DIR</span>/<span class="o">{</span>wp-admin,wp-includes<span class="o">}</span> <span class="c"># Delete more. Don&#39;t delete plugins or themes.</span>
cp -aR <span class="nv">$WPDIR</span>/* <span class="nv">$DIR</span>/
mv <span class="nv">$DIR</span>/.wp-config.php.backup  <span class="nv">$DIR</span>/wp-config.php <span class="c"># Restore the configuration</span>
<span class="c"># You may not need the last two lines. I like to give my web server the ability to write files.</span>
<span class="c">#chown -R .www-data $DIR/*.php $DIR/wp-admin $DIR/wp-includes</span>
<span class="c">#chmod -R g+w $DIR/*.php $DIR/wp-includes</span>
</pre></div>