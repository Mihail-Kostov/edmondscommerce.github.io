<div class="highlight"><pre><span class="c1">// DATABASE ADAPTER - Setup the database adapter</span>
<span class="c1">// Zend_Db implements a factory interface that allows developers to pass in an </span>
<span class="c1">// adapter name and some parameters that will create an appropriate database </span>
<span class="c1">// adapter object.  In this instance, we will be using the values found in the </span>
<span class="c1">// &quot;database&quot; section of the configuration obj.</span>
<span class="nv">$dbAdapter</span> <span class="o">=</span> <span class="nx">Zend_Db</span><span class="o">::</span><span class="na">factory</span><span class="p">(</span><span class="nv">$configuration</span><span class="o">-&gt;</span><span class="na">database</span><span class="p">);</span>
<span class="c1">//$dbAdapter = new EC_Db_Mysqli($configuration-&gt;database-&gt;params);</span>


<span class="k">if</span><span class="p">(</span><span class="nv">$configuration</span><span class="o">-&gt;</span><span class="na">db_profiling_enabled</span><span class="p">){</span>
    <span class="c1">// create a new profiler</span>
    <span class="nv">$profiler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Zend_Db_Profiler_Firebug</span><span class="p">(</span><span class="s1">&#39;EdmondsCommerce DB Queries Debug&#39;</span><span class="p">);</span>
    <span class="c1">// enable profiling (this is only recommended in development mode, disable this in production mode)</span>
    <span class="nv">$profiler</span><span class="o">-&gt;</span><span class="na">setEnabled</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="c1">// add the profiler to the database object</span>
    <span class="nv">$dbAdapter</span><span class="o">-&gt;</span><span class="na">setProfiler</span><span class="p">(</span><span class="nv">$profiler</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>