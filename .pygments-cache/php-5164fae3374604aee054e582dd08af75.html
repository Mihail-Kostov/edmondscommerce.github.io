<div class="highlight"><pre><span class="nv">$xml</span> <span class="o">=</span> <span class="nb">simplexml_load_file</span><span class="p">(</span><span class="s1">&#39;feed.xml&#39;</span><span class="p">);</span>
<span class="nv">$outstream</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">&#39;feed.csv&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">);</span>
<span class="nv">$header</span><span class="o">=</span><span class="k">false</span><span class="p">;</span>
<span class="k">foreach</span><span class="p">(</span><span class="nv">$xml</span> <span class="k">as</span> <span class="nv">$k</span><span class="o">=&gt;</span><span class="nv">$details</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$header</span><span class="p">){</span>
        <span class="nb">fputcsv</span><span class="p">(</span><span class="nv">$outstream</span><span class="p">,</span><span class="nb">array_keys</span><span class="p">(</span><span class="nb">get_object_vars</span><span class="p">(</span><span class="nv">$details</span><span class="p">)));</span>
        <span class="nv">$header</span><span class="o">=</span><span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nb">fputcsv</span><span class="p">(</span><span class="nv">$outstream</span><span class="p">,</span><span class="nb">get_object_vars</span><span class="p">(</span><span class="nv">$details</span><span class="p">));</span>
<span class="p">}</span>
<span class="nb">fclose</span><span class="p">(</span><span class="nv">$outstream</span><span class="p">);</span>
</pre></div>