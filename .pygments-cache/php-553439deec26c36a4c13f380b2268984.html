<div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * Run multiple queries passed in as a single string</span>
<span class="sd"> * This is optimised for copying and pasting from phpMyAdmin</span>
<span class="sd"> * </span>
<span class="sd"> * Handy for things like database migration systems</span>
<span class="sd"> * </span>
<span class="sd"> * @param string $sql  multiple queries terminated with ; and a new line</span>
<span class="sd"> */</span>
<span class="k">function</span> <span class="nf">multiQuery</span><span class="p">(</span><span class="nv">$sql</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$sqls</span> <span class="o">=</span> <span class="nb">preg_split</span><span class="p">(</span><span class="s1">&#39;%;$%m&#39;</span><span class="p">,</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$sql</span><span class="p">));</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$sqls</span> <span class="k">as</span> <span class="nv">$q</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$q</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$q</span><span class="p">);</span> <span class="c1">//suggest you replace this with your custom query function or if not throw in some extra error checking at least</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>