<div class="highlight"><pre><span class="k">function</span> <span class="nf">curl_post</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span><span class="nv">$post_data</span><span class="p">){</span>

<span class="nv">$timeout</span> <span class="o">=</span> <span class="s1">&#39;300&#39;</span><span class="p">;</span> <span class="c1">//how long before CURL gives up on this page</span>
<span class="nv">$go</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
<span class="nb">curl_setopt</span> <span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nb">curl_setopt</span> <span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span> <span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_FOLLOWLOCATION</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">curl_setopt</span> <span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="nv">$timeout</span><span class="p">);</span>
<span class="c1">//now for the post section</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$post_data</span><span class="p">);</span>
<span class="nv">$page</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$go</span><span class="p">);</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$go</span><span class="p">);</span>
<span class="k">return</span> <span class="nv">$page</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>