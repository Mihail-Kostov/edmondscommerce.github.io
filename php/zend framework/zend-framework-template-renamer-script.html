<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Zend Framework Template Renamer Script - Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/php/zend%20framework/zend-framework-template-renamer-script.html">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <article class="hentry" role="article">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-03-06T13:26:57+00:00" pubdate data-updated="true">Mar 6<span>th</span>, 2009</time>
        
      </p>
    
    
    <h1 class="entry-title">
        Zend Framework Template Renamer Script
        
    </h1>
    
  </header>


<div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>Bit hard to describe this one, but if you use Zend Framework along with the MVC functionality, and you also use base classes for your controllers, models etc, you may find that for each controller, model etc the files are pretty much the same apart from the names of the files and the classes.</p>

<p>If this sounds familiar then you might be interested in this little script.</p>

<p>Put the script in a folder that contains a sub folder called TEMPLATE. In the template folder have a skeleton template with controllers, models and views folders. If you wanted to replicate this basic structure x amount of times for each of your controllers, this script will make that procedure a breeze.</p>

<p>There may be other applications for this little utility as well.</p>

<p>(now updated to accepted a # separated list of replacements &ndash; create your entire structure in one move :D)</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
<span class='line-number'>228</span>
<span class='line-number'>229</span>
<span class='line-number'>230</span>
<span class='line-number'>231</span>
<span class='line-number'>232</span>
<span class='line-number'>233</span>
<span class='line-number'>234</span>
<span class='line-number'>235</span>
<span class='line-number'>236</span>
<span class='line-number'>237</span>
<span class='line-number'>238</span>
<span class='line-number'>239</span>
<span class='line-number'>240</span>
<span class='line-number'>241</span>
<span class='line-number'>242</span>
<span class='line-number'>243</span>
<span class='line-number'>244</span>
<span class='line-number'>245</span>
<span class='line-number'>246</span>
<span class='line-number'>247</span>
<span class='line-number'>248</span>
<span class='line-number'>249</span>
<span class='line-number'>250</span>
<span class='line-number'>251</span>
<span class='line-number'>252</span>
<span class='line-number'>253</span>
<span class='line-number'>254</span>
<span class='line-number'>255</span>
<span class='line-number'>256</span>
<span class='line-number'>257</span>
<span class='line-number'>258</span>
<span class='line-number'>259</span>
<span class='line-number'>260</span>
<span class='line-number'>261</span>
<span class='line-number'>262</span>
<span class='line-number'>263</span>
<span class='line-number'>264</span>
<span class='line-number'>265</span>
<span class='line-number'>266</span>
<span class='line-number'>267</span>
<span class='line-number'>268</span>
<span class='line-number'>269</span>
<span class='line-number'>270</span>
<span class='line-number'>271</span>
<span class='line-number'>272</span>
<span class='line-number'>273</span>
<span class='line-number'>274</span>
<span class='line-number'>275</span>
<span class='line-number'>276</span>
<span class='line-number'>277</span>
<span class='line-number'>278</span>
<span class='line-number'>279</span>
<span class='line-number'>280</span>
<span class='line-number'>281</span>
<span class='line-number'>282</span>
<span class='line-number'>283</span>
<span class='line-number'>284</span>
<span class='line-number'>285</span>
<span class='line-number'>286</span>
<span class='line-number'>287</span>
<span class='line-number'>288</span>
<span class='line-number'>289</span>
<span class='line-number'>290</span>
<span class='line-number'>291</span>
<span class='line-number'>292</span>
<span class='line-number'>293</span>
<span class='line-number'>294</span>
<span class='line-number'>295</span>
<span class='line-number'>296</span>
<span class='line-number'>297</span>
<span class='line-number'>298</span>
<span class='line-number'>299</span>
<span class='line-number'>300</span>
<span class='line-number'>301</span>
<span class='line-number'>302</span>
<span class='line-number'>303</span>
<span class='line-number'>304</span>
<span class='line-number'>305</span>
<span class='line-number'>306</span>
<span class='line-number'>307</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="cm">/* This is a simple script designed to be run in a folder that contains a TEMPLATE folder</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * the template folder shoudl contain  your folder structure for your zend framework app.</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * Normally this will be something like the format:</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * controllers/item.php</span>
</span><span class='line'><span class="cm"> * models/item.php</span>
</span><span class='line'><span class="cm"> * models/db_table/item.php</span>
</span><span class='line'><span class="cm"> * views/scripts/</span>
</span><span class='line'><span class="cm"> *   blah.php</span>
</span><span class='line'><span class="cm"> *   yada.php</span>
</span><span class='line'><span class="cm"> *   etc.php</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * The script will take this template of folders and files and will find and will create a new folder structure in which all the filenames have been changed and within the files, a batch of finds and replaces have been done.</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * The idea is that this then gives you a starting point for your ZF app. This works especially well if each controller, model etc inherits from a custom base_controller or base_model.</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * hope it helps someone out :-)</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * Joseph</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * edmondscommerce.co.uk</span>
</span><span class='line'><span class="cm"> * </span>
</span><span class='line'><span class="cm"> * */</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;replaceme&#39;</span><span class="p">])){</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">  &lt;form&gt;</span>
</span><span class='line'><span class="x">&lt;h3&gt;Set Find and Replace - Please Input Upper Cased - lower cased will be automatically replaced as well&lt;/h3&gt;</span>
</span><span class='line'><span class="x">&lt;b&gt;Find:&lt;/b&gt; &lt;input name=&quot;findme&quot;&gt; &lt;b&gt;Replace:&lt;/b&gt; &lt;input name=&quot;replaceme&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;go&quot;&gt;&lt;/form&gt;</span>
</span><span class='line'><span class="x">&lt;h3&gt;To Do A List of Replacemes - use a # separated list&lt;/h3&gt;</span>
</span><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'>  <span class="k">exit</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nv">$fm</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;findme&#39;</span><span class="p">];</span>
</span><span class='line'><span class="nv">$rms</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;replaceme&#39;</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'><span class="nb">error_reporting</span><span class="p">(</span><span class="k">E_ALL</span> <span class="o">^</span> <span class="nx">E_NOTICE</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$debug</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm">$fm = &#39;findMe&#39;;</span>
</span><span class='line'><span class="cm">$rm = &#39;replaceMe&#39;;</span>
</span><span class='line'><span class="cm">*/</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cm">/*get root current working directory*/</span>
</span><span class='line'><span class="nv">$cwd</span> <span class="o">=</span> <span class="nb">getcwd</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/*output folder */</span>
</span><span class='line'><span class="nv">$of</span> <span class="o">=</span> <span class="s1">&#39;OUTPUT&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$of</span><span class="p">)){</span>
</span><span class='line'>  <span class="nx">delete</span><span class="p">(</span><span class="nv">$of</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nb">mkdir</span><span class="p">(</span><span class="nv">$of</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="nv">$rms</span> <span class="k">as</span> <span class="nv">$k</span><span class="o">=&gt;</span><span class="nv">$rm</span><span class="p">){</span>
</span><span class='line'>  <span class="k">echo</span> <span class="s1">&#39;&lt;h1&gt;&#39;</span> <span class="o">.</span> <span class="nv">$rm</span> <span class="o">.</span> <span class="s1">&#39;&lt;/h1&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="cm">/* First create a sub folder to put our new structure in */</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*template path */</span>
</span><span class='line'>  <span class="nv">$template</span> <span class="o">=</span> <span class="nv">$cwd</span> <span class="o">.</span> <span class="s1">&#39;/TEMPLATE/&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*copy template to output */</span>
</span><span class='line'>  <span class="c1">//if($k === 0){</span>
</span><span class='line'>      <span class="nx">dir_copy</span><span class="p">(</span><span class="s1">&#39;TEMPLATE&#39;</span><span class="p">,</span> <span class="nv">$of</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">//}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="cm">/* Now get output structure */</span>
</span><span class='line'>  <span class="nv">$dirlist</span> <span class="o">=</span> <span class="nx">dir_list</span><span class="p">(</span><span class="nv">$of</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">dbug</span><span class="p">(</span><span class="nv">$dirlist</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*now jump into the output folder */</span>
</span><span class='line'>  <span class="nb">chdir</span><span class="p">(</span><span class="nv">$of</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/*Now loop through, rename the file and then find and replace the contents */</span>
</span><span class='line'>  <span class="nx">replace_rename</span><span class="p">(</span><span class="nv">$dirlist</span><span class="p">,</span> <span class="nv">$fm</span><span class="p">,</span> <span class="nv">$rm</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="cm">/* Jump back to the main cwd */</span>
</span><span class='line'>  <span class="nb">chdir</span><span class="p">(</span><span class="nv">$cwd</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">######## FUNCTIONS #########</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">replace_rename</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span> <span class="nv">$fm</span><span class="p">,</span> <span class="nv">$rm</span><span class="p">){</span>
</span><span class='line'>  <span class="nv">$chdir</span> <span class="o">=</span> <span class="nb">getcwd</span><span class="p">();</span>
</span><span class='line'>  <span class="k">foreach</span><span class="p">(</span><span class="nv">$array</span> <span class="k">as</span> <span class="nv">$k</span><span class="o">=&gt;</span><span class="nv">$v</span><span class="p">){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nb">is_int</span><span class="p">(</span><span class="nv">$k</span><span class="p">)){</span>
</span><span class='line'>          <span class="c1">//its a file</span>
</span><span class='line'>          <span class="nv">$newfile</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nx">strtolower</span><span class="p">(</span><span class="nv">$fm</span><span class="p">),</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nv">$rm</span><span class="p">),</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nv">$fm</span><span class="p">,</span> <span class="nv">$rm</span><span class="p">,</span> <span class="nv">$v</span><span class="p">));</span>
</span><span class='line'>          <span class="nx">h3</span><span class="p">(</span><span class="s2">&quot;Renaming </span><span class="si">$v</span><span class="s2"> to </span><span class="si">$newfile</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nb">rename</span><span class="p">(</span><span class="nv">$v</span><span class="p">,</span> <span class="nv">$newfile</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">h3</span><span class="p">(</span><span class="s2">&quot;Replacing Contents of </span><span class="si">$newfile</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nv">$fc</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$newfile</span><span class="p">);</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$fc</span><span class="p">)){</span>
</span><span class='line'>              <span class="nx">err</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$newfile</span><span class="s2"> empty&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="k">exit</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">stristr</span><span class="p">(</span><span class="nv">$fc</span><span class="p">,</span> <span class="nv">$fm</span><span class="p">)){</span>
</span><span class='line'>              <span class="nx">err</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$fm</span><span class="s2"> not found in this file... should it have been?&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="nv">$newcontents</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nx">strtolower</span><span class="p">(</span><span class="nv">$fm</span><span class="p">),</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nv">$rm</span><span class="p">),</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nv">$fm</span><span class="p">,</span> <span class="nv">$rm</span><span class="p">,</span> <span class="nv">$fc</span><span class="p">));</span>
</span><span class='line'>          <span class="nb">file_put_contents</span><span class="p">(</span><span class="nv">$newfile</span><span class="p">,</span> <span class="nv">$newcontents</span><span class="p">);</span>     
</span><span class='line'>          <span class="nx">done</span><span class="p">();</span>  
</span><span class='line'>      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>          <span class="nv">$newfolder</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nx">strtolower</span><span class="p">(</span><span class="nv">$fm</span><span class="p">),</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nv">$rm</span><span class="p">),</span> <span class="nb">str_replace</span><span class="p">(</span><span class="nv">$fm</span><span class="p">,</span> <span class="nv">$rm</span><span class="p">,</span> <span class="nv">$k</span><span class="p">));</span>
</span><span class='line'>          <span class="nx">h3</span><span class="p">(</span><span class="s2">&quot;Renaming </span><span class="si">$k</span><span class="s2"> to </span><span class="si">$newfile</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nb">rename</span><span class="p">(</span><span class="nv">$k</span><span class="p">,</span> <span class="nv">$newfolder</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>          <span class="nv">$jumpin</span> <span class="o">=</span> <span class="nv">$chdir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$newfolder</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">h3</span><span class="p">(</span><span class="s2">&quot;Jumping to </span><span class="si">$jumpin</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="nb">chdir</span><span class="p">(</span><span class="nv">$jumpin</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>          <span class="c1">//its a folder</span>
</span><span class='line'>          <span class="nx">h3</span><span class="p">(</span><span class="s2">&quot;Now Recursing into </span><span class="si">$k</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>          <span class="k">echo</span> <span class="s1">&#39;&lt;blockquote&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">replace_rename</span><span class="p">(</span><span class="nv">$v</span><span class="p">,</span> <span class="nv">$fm</span><span class="p">,</span> <span class="nv">$rm</span><span class="p">);</span>
</span><span class='line'>          <span class="k">echo</span> <span class="s1">&#39;&lt;/blockquote&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">done</span><span class="p">();</span>
</span><span class='line'>          <span class="nb">chdir</span><span class="p">(</span><span class="nv">$chdir</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>    
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nb">chdir</span><span class="p">(</span><span class="nv">$chdir</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// http://uk3.php.net/copy</span>
</span><span class='line'><span class="k">function</span> <span class="nf">dir_copy</span><span class="p">(</span><span class="nv">$srcdir</span><span class="p">,</span> <span class="nv">$dstdir</span><span class="p">,</span> <span class="nv">$offset</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$verbose</span> <span class="o">=</span> <span class="k">true</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// A function to copy files from one directory to another one, including subdirectories and</span>
</span><span class='line'>    <span class="c1">// nonexisting or newer files. Function returns number of files copied.</span>
</span><span class='line'>    <span class="c1">// This function is PHP implementation of Windows xcopy  A:\dir1\* B:\dir2 /D /E /F /H /R /Y</span>
</span><span class='line'>    <span class="c1">// Syntaxis: [$returnstring =] dircopy($sourcedirectory, $destinationdirectory [, $offset] [, $verbose]);</span>
</span><span class='line'>    <span class="c1">// Example: $num = dircopy(&#39;A:\dir1&#39;, &#39;B:\dir2&#39;, 1);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Original by SkyEye.  Remake by AngelKiha.</span>
</span><span class='line'>    <span class="c1">// Linux compatibility by marajax.</span>
</span><span class='line'>    <span class="c1">// ([danbrown AT php DOT net): *NIX-compatibility noted by Belandi.]</span>
</span><span class='line'>    <span class="c1">// Offset count added for the possibilty that it somehow miscounts your files.  This is NOT required.</span>
</span><span class='line'>    <span class="c1">// Remake returns an explodable string with comma differentiables, in the order of:</span>
</span><span class='line'>    <span class="c1">// Number copied files, Number of files which failed to copy, Total size (in bytes) of the copied files,</span>
</span><span class='line'>    <span class="c1">// and the files which fail to copy.  Example: 5,2,150000,\SOMEPATH\SOMEFILE.EXT|\SOMEPATH\SOMEOTHERFILE.EXT</span>
</span><span class='line'>    <span class="c1">// If you feel adventurous, or have an error reporting system that can log the failed copy files, they can be</span>
</span><span class='line'>    <span class="c1">// exploded using the | differentiable, after exploding the result string.</span>
</span><span class='line'>    <span class="c1">//</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$offset</span><span class="p">))</span> <span class="nv">$offset</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$fail</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$sizetotal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$fifail</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$dstdir</span><span class="p">))</span> <span class="nb">mkdir</span><span class="p">(</span><span class="nv">$dstdir</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nv">$curdir</span> <span class="o">=</span> <span class="nb">opendir</span><span class="p">(</span><span class="nv">$srcdir</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">while</span><span class="p">(</span><span class="nv">$file</span> <span class="o">=</span> <span class="nb">readdir</span><span class="p">(</span><span class="nv">$curdir</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span><span class="p">(</span><span class="nv">$file</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span> <span class="o">!=</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="c1">//                $srcfile = $srcdir . &#39;\\&#39; . $file;    # deleted by marajax</span>
</span><span class='line'><span class="c1">//                $dstfile = $dstdir . &#39;\\&#39; . $file;    # deleted by marajax</span>
</span><span class='line'>                <span class="nv">$srcfile</span> <span class="o">=</span> <span class="nv">$srcdir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$file</span><span class="p">;</span>    <span class="c1"># added by marajax</span>
</span><span class='line'>                <span class="nv">$dstfile</span> <span class="o">=</span> <span class="nv">$dstdir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$file</span><span class="p">;</span>    <span class="c1"># added by marajax</span>
</span><span class='line'>                <span class="k">if</span><span class="p">(</span><span class="nb">is_file</span><span class="p">(</span><span class="nv">$srcfile</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                    <span class="k">if</span><span class="p">(</span><span class="nb">is_file</span><span class="p">(</span><span class="nv">$dstfile</span><span class="p">))</span> <span class="nv">$ow</span> <span class="o">=</span> <span class="nb">filemtime</span><span class="p">(</span><span class="nv">$srcfile</span><span class="p">)</span> <span class="o">-</span> <span class="nb">filemtime</span><span class="p">(</span><span class="nv">$dstfile</span><span class="p">);</span> <span class="k">else</span> <span class="nv">$ow</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>                    <span class="k">if</span><span class="p">(</span><span class="nv">$ow</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                        <span class="k">if</span><span class="p">(</span><span class="nv">$verbose</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot;Copying &#39;</span><span class="si">$srcfile</span><span class="s2">&#39; to &#39;</span><span class="si">$dstfile</span><span class="s2">&#39;...&lt;br /&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>                        <span class="k">if</span><span class="p">(</span><span class="nb">copy</span><span class="p">(</span><span class="nv">$srcfile</span><span class="p">,</span> <span class="nv">$dstfile</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                            <span class="nb">touch</span><span class="p">(</span><span class="nv">$dstfile</span><span class="p">,</span> <span class="nb">filemtime</span><span class="p">(</span><span class="nv">$srcfile</span><span class="p">));</span> <span class="nv">$num</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>                            <span class="nb">chmod</span><span class="p">(</span><span class="nv">$dstfile</span><span class="p">,</span> <span class="mo">0777</span><span class="p">);</span>    <span class="c1"># added by marajax</span>
</span><span class='line'>                            <span class="nv">$sizetotal</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$sizetotal</span> <span class="o">+</span> <span class="nb">filesize</span><span class="p">(</span><span class="nv">$dstfile</span><span class="p">));</span>
</span><span class='line'>                            <span class="k">if</span><span class="p">(</span><span class="nv">$verbose</span><span class="p">)</span> <span class="k">echo</span> <span class="s2">&quot;OK</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>                        <span class="p">}</span>
</span><span class='line'>                        <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                            <span class="k">echo</span> <span class="s2">&quot;Error: File &#39;</span><span class="si">$srcfile</span><span class="s2">&#39; could not be copied!&lt;br /&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>                            <span class="nv">$fail</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>                            <span class="nv">$fifail</span> <span class="o">=</span> <span class="nv">$fifail</span><span class="o">.</span><span class="nv">$srcfile</span><span class="o">.</span><span class="s1">&#39;|&#39;</span><span class="p">;</span>
</span><span class='line'>                        <span class="p">}</span>
</span><span class='line'>                    <span class="p">}</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$srcfile</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nv">$res</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nv">$ret</span><span class="p">);</span>
</span><span class='line'><span class="c1">//                    $ret = dircopy($srcfile, $dstfile, $verbose); # deleted by patrick</span>
</span><span class='line'>                    <span class="nv">$ret</span> <span class="o">=</span> <span class="nx">dir_copy</span><span class="p">(</span><span class="nv">$srcfile</span><span class="p">,</span> <span class="nv">$dstfile</span><span class="p">,</span> <span class="nv">$verbose</span><span class="p">);</span> <span class="c1"># added by patrick</span>
</span><span class='line'>                    <span class="nv">$mod</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nv">$ret</span><span class="p">);</span>
</span><span class='line'>                    <span class="nv">$imp</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$mod</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nv">$mod</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$res</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nv">$mod</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nv">$res</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="nv">$mod</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="nv">$res</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
</span><span class='line'>                    <span class="nv">$ret</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nv">$imp</span><span class="p">);</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="nb">closedir</span><span class="p">(</span><span class="nv">$curdir</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nv">$red</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nv">$ret</span><span class="p">);</span>
</span><span class='line'>    <span class="nv">$ret</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$num</span> <span class="o">+</span> <span class="nv">$red</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="p">((</span><span class="nv">$fail</span><span class="o">-</span><span class="nv">$offset</span><span class="p">)</span> <span class="o">+</span> <span class="nv">$red</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="p">(</span><span class="nv">$sizetotal</span> <span class="o">+</span> <span class="nv">$red</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="nv">$fifail</span><span class="o">.</span><span class="nv">$red</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$ret</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">dir_list</span><span class="p">(</span><span class="nv">$directory</span><span class="p">){</span>
</span><span class='line'>  <span class="c1">//echo $directory;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nv">$handle</span> <span class="o">=</span> <span class="nb">opendir</span><span class="p">(</span><span class="nv">$directory</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">while</span> <span class="p">(</span><span class="k">false</span> <span class="o">!==</span> <span class="p">(</span><span class="nv">$file</span> <span class="o">=</span> <span class="nb">readdir</span><span class="p">(</span><span class="nv">$handle</span><span class="p">)))</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="nv">$file</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$file</span> <span class="o">!=</span> <span class="s1">&#39;..&#39;</span><span class="p">){</span>
</span><span class='line'>              <span class="k">if</span><span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$directory</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$file</span><span class="p">)){</span>
</span><span class='line'>                  <span class="nv">$return</span><span class="p">[</span><span class="nv">$file</span><span class="p">]</span><span class="o">=</span><span class="nx">dir_list</span><span class="p">(</span><span class="nv">$directory</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$file</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>                  <span class="nv">$return</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">;</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nb">closedir</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="nv">$return</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span><span class="k">else</span><span class="p">{</span>     
</span><span class='line'>      <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//recursive delete file/folder</span>
</span><span class='line'><span class="k">function</span> <span class="nf">delete</span><span class="p">(</span><span class="nv">$dirname</span><span class="p">,</span> <span class="nv">$folder_empty</span> <span class="o">=</span> <span class="s1">&#39;delete&#39;</span><span class="p">){</span>
</span><span class='line'>  <span class="c1">// Sanity check</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$dirname</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">echo</span> <span class="s1">&#39;&lt;h3 style=&quot;color: red;&quot;&gt;File &#39;</span> <span class="o">.</span> <span class="nv">$dirname</span> <span class="o">.</span> <span class="s1">&#39; does not exist&lt;/h3&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="c1">//bottom();</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Simple delete for a file</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nb">is_file</span><span class="p">(</span><span class="nv">$dirname</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">unlink</span><span class="p">(</span><span class="nv">$dirname</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Loop through the folder</span>
</span><span class='line'>  <span class="nv">$dir</span> <span class="o">=</span> <span class="nx">dir</span><span class="p">(</span><span class="nv">$dirname</span><span class="p">);</span>
</span><span class='line'>  <span class="k">while</span> <span class="p">(</span><span class="k">false</span> <span class="o">!==</span> <span class="nv">$entry</span> <span class="o">=</span> <span class="nv">$dir</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// Skip pointers</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nv">$entry</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span> <span class="o">||</span> <span class="nv">$entry</span> <span class="o">==</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">continue</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="c1">// Recurse</span>
</span><span class='line'>      <span class="nx">delete</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$dirname</span><span class="s2">/</span><span class="si">$entry</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span><span class="c1">// end while looping</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Clean up</span>
</span><span class='line'>  <span class="nv">$dir</span><span class="o">-&gt;</span><span class="na">close</span><span class="p">();</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nv">$folder_empty</span> <span class="o">==</span> <span class="s1">&#39;delete&#39;</span><span class="p">){</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">rmdir</span><span class="p">(</span><span class="nv">$dirname</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>      <span class="c1">//just empty the folder, don&#39;t actually delete it</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//DEbug Functions</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//convert tabs to spaces</span>
</span><span class='line'><span class="k">function</span> <span class="nf">tab2space</span><span class="p">(</span><span class="nv">$text</span><span class="p">,</span> <span class="nv">$spaces</span> <span class="o">=</span> <span class="mi">4</span><span class="p">){</span>
</span><span class='line'>  <span class="nv">$text</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#39;</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span>
</span><span class='line'>  <span class="nv">$text</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#39;</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span>
</span><span class='line'>  <span class="k">return</span> <span class="nv">$text</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//return name of variable passed by reference</span>
</span><span class='line'><span class="k">function</span> <span class="nf">vname</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$var</span><span class="p">,</span> <span class="nv">$scope</span><span class="o">=</span><span class="k">false</span><span class="p">){</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nv">$scope</span><span class="p">)</span> <span class="nv">$vals</span> <span class="o">=</span> <span class="nv">$scope</span><span class="p">;</span>
</span><span class='line'>    <span class="k">else</span>      <span class="nv">$vals</span> <span class="o">=</span> <span class="nv">$GLOBALS</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$old</span> <span class="o">=</span> <span class="nv">$var</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$new</span> <span class="o">=</span> <span class="s1">&#39;THISONE&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$var</span> <span class="o">=</span> <span class="nv">$new</span><span class="p">;</span>
</span><span class='line'>  <span class="nv">$vname</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>    <span class="k">foreach</span><span class="p">(</span><span class="nv">$vals</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nv">$val</span> <span class="o">!==</span><span class="s1">&#39;var&#39;</span><span class="p">){</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="nv">$val</span> <span class="o">===</span> <span class="nv">$new</span><span class="p">)</span> <span class="nv">$vname</span> <span class="o">=</span> <span class="nv">$key</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nv">$var</span> <span class="o">=</span> <span class="nv">$old</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$vname</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">dbug</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$scope</span><span class="o">=</span><span class="k">false</span><span class="p">){</span>
</span><span class='line'>  <span class="k">global</span> <span class="nv">$debug</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$debug</span><span class="p">){</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nv">$vname</span> <span class="o">=</span> <span class="nx">vname</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$item</span><span class="p">,</span><span class="nv">$scope</span><span class="p">);</span>
</span><span class='line'>  <span class="k">echo</span> <span class="s1">&#39;&lt;hr&gt;&lt;h3&gt;Debug Info: $&#39;</span> <span class="o">.</span> <span class="nv">$vname</span>  <span class="o">.</span> <span class="s1">&#39;&lt;/h3&gt;&#39;</span> <span class="o">.</span> <span class="nx">tab2space</span><span class="p">(</span><span class="nb">nl2br</span><span class="p">(</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nb">var_export</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="k">true</span><span class="p">))))</span> <span class="o">.</span> <span class="s1">&#39;&lt;hr&gt;&#39;</span><span class="p">;</span> 
</span><span class='line'>  <span class="nb">flush</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">done</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">echo</span> <span class="s1">&#39;&lt;h3 style=&quot;color: green;&quot;&gt;Done..&lt;/h3&gt;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">h3</span><span class="p">(</span><span class="nv">$text</span><span class="p">){</span>
</span><span class='line'>  <span class="k">echo</span> <span class="s1">&#39;&lt;h3&gt;&#39;</span> <span class="o">.</span> <span class="nv">$text</span> <span class="o">.</span> <span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="nb">flush</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">err</span><span class="p">(</span><span class="nv">$text</span><span class="p">){</span>
</span><span class='line'>  <span class="k">echo</span> <span class="s1">&#39;&lt;h3 style=&quot;color: red;&quot;&gt;&#39;</span> <span class="o">.</span> <span class="nv">$text</span> <span class="o">.</span> <span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="byline author vcard">Posted by <span class="fn">admin</span></span></span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-03-06T13:26:57+00:00" pubdate data-updated="true">Mar 6<span>th</span>, 2009</time>
          

<span class="glyphicon glyphicon-folder-open" title="categories"></span>&nbsp;
<span class="categories">
  
    <a class='category label label-primary' href='/category/php/'>php</a> <a class='category label label-primary' href='/category/zend-framework/'>zend framework</a>
  
</span>


          

<br/>
<span class="glyphicon glyphicon-tags" title="tags"></span>&nbsp;
<span class="tags">
  
    <a class='tag' href='/tag/zend-framework/'>zend framework</a>
  
</span>



        </p>
        
          <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://edmondscommerce.github.io/php/zend%20framework/zend-framework-template-renamer-script.html" data-via="" data-counturl="http://edmondscommerce.github.io/php/zend%20framework/zend-framework-template-renamer-script.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            <li class="previous"><a href="/ubuntu/hardware-information-in-ubuntu.html" title="Previous Post: Hardware Information in Ubuntu">&laquo; Hardware Information in Ubuntu</a></li>
            
            
            <li class="next"><a href="/javascript/neat-lightweight-javascript-table-sorter.html" title="Next Post: Neat Lightweight Javascript Table Sorter">Neat Lightweight Javascript Table Sorter &raquo;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/bash/combined-csv.html">Combined CSV</a>
    
    <a class="list-group-item " href="/bash/bash-script-to-kill-sleeping-mysql-processes.html">Bash Script to Kill Sleeping MySQL Processes</a>
    
    <a class="list-group-item " href="/apache/blocking-direct-ip-access-in-apache.html">Blocking Direct IP Access in Apache</a>
    
    <a class="list-group-item " href="/composer/composer-run-utility-bash-script.html">Composer Run Utility BASH Script</a>
    
    <a class="list-group-item " href="/php/getting-sub-domains-and-domain-from-a-url.html">Getting Sub Domains and Domain From a Url</a>
    
  </div>
</section>




<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h3>
      <a href="https://plus.google.com/104488822194646220248?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h3>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
