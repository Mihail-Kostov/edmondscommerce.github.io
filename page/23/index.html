<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/page/23">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-21T16:31:15+01:00" pubdate data-updated="true">Aug 21<span>st</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/xdebug-php-and-command-line-scripts.html">Xdebug PHP and Command Line Scripts</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I had a requirement to use Xdebug to step through a PHP script that is being run on the command line.</p>

<p>Oh no I thought, this is bound to be really complicated to figure out because I normally use the web browser and I have never done this before.</p>

<p>Pleasant surprise, its actually really easy to do this, all you need to do on the command line is run the following command:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">XDEBUG_CONFIG</span><span class="o">=</span>&amp;quot;idekey<span class="o">=</span>netbeans-xdebug&amp;quot;
</span></code></pre></td></tr></table></div></figure>


<p>Then get your IDE (PHPStorm for me) listening for Xdebug and then run your PHP file on the command line.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>php ./myfile.php
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s it, it just works.</p>

<p>One caveat (which I actually quite like) is that it will now ALWAYS get picked up by xdebug which could get in your way. To stop this, simply unset the variable like this:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">unset </span>XDEBUG_CONFIG
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-21T13:24:37+01:00" pubdate data-updated="true">Aug 21<span>st</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/linux/apache-access-logs-find-spiders-by-counting-requests-to-ip-addresses.html">Apache Access Logs Find Spiders by Counting Requests to IP Addresses</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you would like a quick summary of the IP addresses that are beating the **** out of your server by firing lots of requests for quite possibly malicious or otherwise nefarious reasons then try this little bash script:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="nv">LOG_FILE</span><span class="o">=</span>/var/www/vhosts/DOMAIN.co.uk/statistics/logs/access_log
</span><span class='line'><span class="nv">OUT_FILE</span><span class="o">=</span>/tmp/spider_analysis
</span><span class='line'>
</span><span class='line'><span class="c">#This generates a file with the top 20 IP addresses by number of requests</span>
</span><span class='line'>cat <span class="nv">$LOG_FILE</span> | awk <span class="s1">&#39;{print $1}&#39;</span> | sort | uniq -c | sort -nr | head -n 20 &gt; <span class="nv">$OUT_FILE</span>
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Top 20 IP addresses by number of request&quot;</span>
</span><span class='line'>cat <span class="nv">$OUT_FILE</span>
</span><span class='line'>
</span><span class='line'><span class="c">#allow for loop to split on new line</span>
</span><span class='line'><span class="nv">IFS_BAK</span><span class="o">=</span><span class="nv">$IFS</span>
</span><span class='line'><span class="nv">IFS</span><span class="o">=</span><span class="s2">&quot;</span>
</span><span class='line'><span class="s2">&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">for </span>i in <span class="sb">`</span>cat <span class="nv">$OUT_FILE</span><span class="sb">`</span>
</span><span class='line'><span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="nv">COUNT</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$i</span> | awk <span class="s1">&#39;{print $1}&#39;</span><span class="sb">`</span>
</span><span class='line'>    <span class="nv">IP_ADD</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$i</span> | awk <span class="s1">&#39;{print $2}&#39;</span><span class="sb">`</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;---------------------------------&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;$IP_ADD has made $COUNT requests&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;Whois Information&quot;</span>
</span><span class='line'>    whois <span class="nv">$IP_ADD</span>
</span><span class='line'>    <span class="c">#lynx -dump http://who.cc/$IP_ADD # whois was blocked on the server i was using for some reason, use lynx as a work around</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;---------------------------------&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="k">done</span>
</span><span class='line'>
</span><span class='line'><span class="c"># set that back</span>
</span><span class='line'><span class="nv">IFS</span><span class="o">=</span><span class="nv">$IFS_BAK</span>
</span><span class='line'><span class="nv">IFS_BAK</span><span class="o">=</span>
</span></code></pre></td></tr></table></div></figure>


<p>You would use this to give you some idea of which IPs are hitting the server a lot.</p>

<p>Usually you would expect to see a lot of these being search engines which you likely want to allow. However if you see any domestic or other IP addresses then you may choose to block these.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-17T15:57:47+01:00" pubdate data-updated="true">Aug 17<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-security-update.html">Magento Security Update Testimonials</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you run a Magento store or are otherwise familiar with the world of Magento then you have no doubt seen the urgent security patch that live stores needed to apply quickly.</p>

<p>We opted to offer the security patching service for free to our existing clients and then also to the rest of the world. The process of applying the patch is quick and painless thanks to a nice Bash script we put together so there was really no problem in offering this service. <a href="http://www.edmondscommerce.co.uk/magento/magento-security-vulnerability-free-assistance/">You can read all about that offer here</a>. For anyone still not patched, the offer still stands.</p>

<p>Since that time we have had a few nice testimonials which we thought we would share:</p>

<p><b>Chris from Mobile CAD Surveying</b></p>

<blockquote>Thank-you to Edmonds Commerce for highlighting a recent Magento security breach that we were unaware of. Edmonds let us know about this problem and offered to fix it for us at no cost.  We gave them our log in details and within an hour a patch had been installed and everything was working fine.
Thanks once again to Edmonds for their professional service and for attending to this matter very swiftly.
</blockquote>


<p><a href="http://www.mobilecadsurveying.co.uk/" title="Mobile CAD Surveying" target="_blank">Mobile CAD Surveying Ltd</a></p>

<p><b>Mark Noble, IT Manager at Buckley Jewellery</b></p>

<blockquote>Buckley Jewellery originally approached Edmonds Commerce to take our existing site and develop it onto a Magento platform.
Since this first project we have used Joseph and his team for a further website and additional work to develop & expand our ecommerce business.
The offer of installing the Magento patch across our websites was typical of a company who provide an honest and refreshing approach to website design.
I would not hesitate to recommend Edmonds Commerce for any ecommerce development and advice.</blockquote>


<p><a href="http://www.buckley-jewellery.com/" title="Buckley Jewellery" target="_blank">Buckley Jewellery</a></p>

<p><b>Clare from Libertinesque</b></p>

<blockquote>
I can thoroughly recommend Joseph and his team for such a fantastic service and the security patch which was generously offered as a free service and efficiently applied with a very quick response time. Giving great personal attention every time, I have no hesitation in recommending the team for Magento upgrades and service.
</blockquote>


<p><a href="http://www.libertinesque.com/" target="_blank">Libertinesque</a></p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-17T15:31:32+01:00" pubdate data-updated="true">Aug 17<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-profiler-improved-aoe_profiler-by-fabrizio-branca.html">Magento Profiler Improved - Aoe_Profiler by Fabrizio Branca</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>The Magento profiler is useful when you are trying to discover what potential bottlenecks are in place in a specific Magento implementation that are slowing down the performance of the site. Often when doing this kind of analysis you might find that a particular block or extension is responsible for more than 70% of the total page load time. At this point you would choose to either optimise, cache or disable the block altogether to remove this performance bottleneck and improve page speed significantly.</p>

<p>If you have ever tried to use Magento&rsquo;s built in profiler you will no doubt agree with Fabrizio&rsquo;s comments that, when you have it working, the output is hard to read and not really very useful in terms of seeing what is actually going on.</p>

<p>To aid with this process and give us a nice colourful and friendly user interface to the Magento profiler, Fabrizio has built a Magento module that extends the default profiler and makes it a much more useful tool.</p>

<p>You can download the extension from <a href="https://github.com/fbrnc/Aoe_Profiler" title="Magento Aoe Profiler on Git Hub" target="_blank">git hub here</a>.</p>

<p>Read the full blog story <a href="http://www.fabrizio-branca.de/magento-profiler.html" title="Fabrizio Branch blog" target="_blank">here</a>.</p>

<p>If you would like some help optimising the performance of your Magento store, feel free to get in touch with Edmonds Commerce today and we can assist in getting the very best performance from your Magento web site.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-16T15:45:56+01:00" pubdate data-updated="true">Aug 16<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/bash/format-searched-log-files.html">Format Searched Log Files</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>When you are monitoring a log file you may want to narrow it down, and format the results. This simple one line command will break up the output from a log file to make it easier to quickly read</p>

<p><code>
tail -f /path/to/log | grep &ldquo;search term&rdquo; | sed &rsquo;s/(.*)/&mdash;&mdash;&mdash;&mdash;&mdash;\n\1\n&mdash;&mdash;&mdash;&mdash;&mdash;/&lsquo;
</code></p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-15T14:17:17+01:00" pubdate data-updated="true">Aug 15<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/get-all-product-attributes-for-a-magento-object-using-sql.html">Get All Product Attributes for a Magento Object Using SQL</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Sometimes you may want to quickly compare all of the attributes that object (category / product) has in magento. The EAV structure of the database makes this difficult to do this simply, so this is a query that will do it for you</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="p">(</span>
</span><span class='line'>    <span class="k">SELECT</span>
</span><span class='line'>        <span class="n">ce</span><span class="p">.</span><span class="n">sku</span><span class="p">,</span>
</span><span class='line'>        <span class="n">ea</span><span class="p">.</span><span class="n">attribute_id</span><span class="p">,</span>
</span><span class='line'>        <span class="n">ea</span><span class="p">.</span><span class="n">attribute_code</span><span class="p">,</span>
</span><span class='line'>        <span class="k">CASE</span> <span class="n">ea</span><span class="p">.</span><span class="n">backend_type</span>
</span><span class='line'>           <span class="k">WHEN</span> <span class="s1">&#39;varchar&#39;</span> <span class="k">THEN</span> <span class="n">ce_varchar</span><span class="p">.</span><span class="n">value</span>
</span><span class='line'>           <span class="k">WHEN</span> <span class="s1">&#39;int&#39;</span> <span class="k">THEN</span> <span class="n">ce_int</span><span class="p">.</span><span class="n">value</span>
</span><span class='line'>           <span class="k">WHEN</span> <span class="s1">&#39;text&#39;</span> <span class="k">THEN</span> <span class="n">ce_text</span><span class="p">.</span><span class="n">value</span>
</span><span class='line'>           <span class="k">WHEN</span> <span class="s1">&#39;decimal&#39;</span> <span class="k">THEN</span> <span class="n">ce_decimal</span><span class="p">.</span><span class="n">value</span>
</span><span class='line'>           <span class="k">WHEN</span> <span class="s1">&#39;datetime&#39;</span> <span class="k">THEN</span> <span class="n">ce_datetime</span><span class="p">.</span><span class="n">value</span>
</span><span class='line'>           <span class="k">ELSE</span> <span class="n">ea</span><span class="p">.</span><span class="n">backend_type</span>
</span><span class='line'>        <span class="k">END</span> <span class="k">AS</span> <span class="n">value</span><span class="p">,</span>
</span><span class='line'>        <span class="n">ea</span><span class="p">.</span><span class="n">is_required</span> <span class="k">AS</span> <span class="n">required</span>
</span><span class='line'>    <span class="k">FROM</span> <span class="n">catalog_product_entity</span> <span class="k">AS</span> <span class="n">ce</span>
</span><span class='line'>    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">eav_attribute</span> <span class="k">AS</span> <span class="n">ea</span>
</span><span class='line'>        <span class="k">ON</span> <span class="n">ce</span><span class="p">.</span><span class="n">entity_type_id</span> <span class="o">=</span> <span class="n">ea</span><span class="p">.</span><span class="n">entity_type_id</span>
</span><span class='line'>    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">catalog_product_entity_varchar</span> <span class="k">AS</span> <span class="n">ce_varchar</span>
</span><span class='line'>        <span class="k">ON</span> <span class="n">ce</span><span class="p">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">ce_varchar</span><span class="p">.</span><span class="n">entity_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">attribute_id</span> <span class="o">=</span> <span class="n">ce_varchar</span><span class="p">.</span><span class="n">attribute_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">backend_type</span> <span class="o">=</span> <span class="s1">&#39;varchar&#39;</span>
</span><span class='line'>    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">catalog_product_entity_int</span> <span class="k">AS</span> <span class="n">ce_int</span>
</span><span class='line'>        <span class="k">ON</span> <span class="n">ce</span><span class="p">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">ce_int</span><span class="p">.</span><span class="n">entity_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">attribute_id</span> <span class="o">=</span> <span class="n">ce_int</span><span class="p">.</span><span class="n">attribute_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">backend_type</span> <span class="o">=</span> <span class="s1">&#39;int&#39;</span>
</span><span class='line'>    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">catalog_product_entity_text</span> <span class="k">AS</span> <span class="n">ce_text</span>
</span><span class='line'>        <span class="k">ON</span> <span class="n">ce</span><span class="p">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">ce_text</span><span class="p">.</span><span class="n">entity_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">attribute_id</span> <span class="o">=</span> <span class="n">ce_text</span><span class="p">.</span><span class="n">attribute_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">backend_type</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span>
</span><span class='line'>    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">catalog_product_entity_decimal</span> <span class="k">AS</span> <span class="n">ce_decimal</span>
</span><span class='line'>        <span class="k">ON</span> <span class="n">ce</span><span class="p">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">ce_decimal</span><span class="p">.</span><span class="n">entity_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">attribute_id</span> <span class="o">=</span> <span class="n">ce_decimal</span><span class="p">.</span><span class="n">attribute_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">backend_type</span> <span class="o">=</span> <span class="s1">&#39;decimal&#39;</span>
</span><span class='line'>    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">catalog_product_entity_datetime</span> <span class="k">AS</span> <span class="n">ce_datetime</span>
</span><span class='line'>        <span class="k">ON</span> <span class="n">ce</span><span class="p">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">ce_datetime</span><span class="p">.</span><span class="n">entity_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">attribute_id</span> <span class="o">=</span> <span class="n">ce_datetime</span><span class="p">.</span><span class="n">attribute_id</span>
</span><span class='line'>        <span class="k">AND</span> <span class="n">ea</span><span class="p">.</span><span class="n">backend_type</span> <span class="o">=</span> <span class="s1">&#39;datetime&#39;</span>
</span><span class='line'>    <span class="k">WHERE</span> <span class="n">ce</span><span class="p">.</span><span class="n">sku</span> <span class="o">=</span> <span class="n">YOUR_SKU</span>
</span><span class='line'>  <span class="p">)</span> <span class="k">AS</span> <span class="n">tab</span>
</span><span class='line'>  <span class="k">WHERE</span> <span class="n">tab</span><span class="p">.</span><span class="n">value</span> <span class="o">!=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This version of the query will only return values that are not blank, but if you only run the sub query it will give you every value.
Replace catalog_product* for catalog_category to get the values for a category. You will also have to use a different selector than SKU.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-15T14:16:16+01:00" pubdate data-updated="true">Aug 15<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/jquery/comply-with-the-cookie-law-with-very-little-effort.html">Comply With the Cookie Law With Very Little Effort</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>A lot of concern has been caused by the &ldquo;Cookie Law&rdquo; which says you must tell people that you use cookies if you do, and 99% of sites do!</p>

<p>Well here&rsquo;s a very simple jQuery bolt-on that deals with that, and although visitors need javascript enabled to see it, you have made &ldquo;best efforts&rdquo; to inform them, and on any eCommerce site you&rsquo;re going to have a &ldquo;this site requires javascript message&rdquo; anyway.</p>

<p>The file to download is from github (isn&rsquo;t opensource great?) <a href="https://github.com/carlwoodhouse/jquery.cookieBar" title="jQuery.cookiebar on github">here</a> and is as simple to implement as add the script file to the head and somewhere on the page insert the following :</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">.</span><span class="nx">cookieBar</span><span class="p">();</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The example page is also on github : <a href="http://carlwoodhouse.github.com/jquery.cookieBar/" title="CookieBar example page"><a href="http://carlwoodhouse.github.com/jquery.cookieBar/">http://carlwoodhouse.github.com/jquery.cookieBar/</a></a>.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-15T12:58:23+01:00" pubdate data-updated="true">Aug 15<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/mysql/mysql-server-gone-away-large-packets-the-issue.html">MySQL Server Gone Away - Large Packets the Issue?</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you are scratching your head trying to figure out why you keep getting MySQL server gone away error messages despite the fact you have bumped up all the timeout etc configurations to high values then this could be your solution.</p>

<p>MySQL will also give you this error if you try to send a packet that is larger than the packet size defined. We had an application that was using MariaDB which has a default max allowed packet of 16M by default.</p>

<p>The application in question was sending large amounts of data to be stored and so the solution to the gone away issues was simply to increase the max_allowed_packet configuration in my.cnf, restart the mysql daemon and the problems are sorted.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-14T17:33:31+01:00" pubdate data-updated="true">Aug 14<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/amazon/centos-sun-java-amazon-amtu-2.html">CentOS + Sun Java + Amazon AMTU 2</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>In a follow up to our popular blog post describing the process of getting AMTU 1 set up on a Centos server, this post describes how to get the latest version 2 of AMTU running.</p>

<p>Things have moved on and thankfully it is a lot easier than it was.</p>

<p>Firstly get Sun Java installed. You will need to get the URL for downloading the RPM from here:
<a href="http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html">http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html</a></p>

<p>Accept the agreement, download the correct RPM version and then pause it. Copy the download URL and paste it into this command:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> /tmp
</span><span class='line'>wget <span class="o">[</span>paste-url<span class="o">]</span>-here<span class="o">]</span>
</span><span class='line'>rpm - jre <span class="o">[</span>hit tab to <span class="nb">complete</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now check the correct java version is being used:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>java -version
</span></code></pre></td></tr></table></div></figure>


<p>You should get something looking like:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>root@94 tmp<span class="o">]</span><span class="c"># java -version</span>
</span><span class='line'>java version &amp;quot;1.7.0_05&amp;quot;
</span><span class='line'>Java<span class="o">(</span>TM<span class="o">)</span> SE Runtime Environment <span class="o">(</span>build 1.7.0_05-b06<span class="o">)</span>
</span><span class='line'>Java HotSpot<span class="o">(</span>TM<span class="o">)</span> 64-Bit Server VM <span class="o">(</span>build 23.1-b03, mixed mode<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now you can install AMTU</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget https://d28hcfptedr5ia.cloudfront.net/install/AMTU_unix.sh
</span><span class='line'>chmod +x AMTU_unix.sh
</span><span class='line'>./AMTU_unix.sh
</span></code></pre></td></tr></table></div></figure>


<p>Keep hitting enter to get to the bottom of the terms and then agree, agree to all the other options. That is AMTU installed.</p>

<p>The final step is to configure this using the CLI configure utitlity.</p>

<p>You need to create an xml file for the AMTU configuration. You can see a sample file in /opt/amtu/xml/sample.xml.</p>

<p>Lets copy that file and then edit it accordingly.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> /opt/amtu/xml
</span><span class='line'>cp sample.xml configuration.xml
</span><span class='line'>vim configuration.xml
</span></code></pre></td></tr></table></div></figure>


<p>You do need to be signed up for MWS to get some of the keys etc that are required. If not already, go to this page and hit the sign up button.
<a href="https://developer.amazonservices.co.uk/index.html">https://developer.amazonservices.co.uk/index.html</a></p>

<p>Once you have updated the XML configuration you run this command to apply it:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/opt/amtu/Utilities/configure SETUP /opt/amtu/xml/configuration.xml
</span></code></pre></td></tr></table></div></figure>


<p>If you get some error messages at this point, edit the configuration and try again. Once you have the configuration set you can start the daemon.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/opt/AMTU/Utilities/amtu_daemon start
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-08-14T16:03:11+01:00" pubdate data-updated="true">Aug 14<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/mysql/wondering-what-youre-waiting-for-mytop-tells-all.html">Wondering What You&#8217;re Waiting for? Mytop Tells All</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Mytop is a handy utility which shows what queries are currently being executed on your MySQL server &ndash; useful for those times when you&rsquo;re not quite sure if it&rsquo;s still on the job</p>

<p>Running mytop is easy, just run it from the command line and it&rsquo;ll give you a top-like list of any queries currently being executed on the server
You need to tell my top how it should connect to your database. You <em>can</em> specify everything as parameters on the command, such as</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mytop -u<span class="o">=</span>myuser -p<span class="o">=</span>mypassword --db<span class="o">=</span>mydatabase -P<span class="o">=</span>3306
</span></code></pre></td></tr></table></div></figure>


<p>But chances are you&rsquo;re not changing your database server <em>that</em> often.</p>

<h3>Setting the default parameters for mytop</h3>


<p>If you want to save yourself the effort of repeatedly typing the same details over and over, just tell mytop what you want it to choose if you don&rsquo;t tell it any parameters</p>

<p>All you need to do is let mytop know how to connect to your MySQL database in the form of a config file called .mytop in your home folder, with the following contents (replace as necessary):</p>

<blockquote>
<code>
     user=myuser
         pass=
         host=my.host.name
         db=
         delay=5
         port=3306
         socket=
         batchmode=0
         header=1
         color=1
         idle=1
</code>
</blockquote>


<p>You can add as many or as few of these as you like for easy configuration, like specifying the db flag if you&rsquo;re primarily accessing only one database. I like to leave the password field blank, and use the &mdash;prompt flag to avoid any awkward leaks!</p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/page/24/">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/page/22/">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/linux/vps/server/running-out-of-disk-space-but-df-shows-you-have-lots-of-space-left.html">Running Out of Disk Space but Df Shows You Have Lots of Space Left</a>
    
    <a class="list-group-item " href="/behat/behat.html">Behat</a>
    
    <a class="list-group-item " href="/resetting-your-forgotten-oscommerce-password-with-mysql-through-phpmyadmin.html">Resetting Your Forgotten osCommerce Password With MySQL Through PHPMyAdmin</a>
    
    <a class="list-group-item " href="/gnome-shell/cron-script-to-change-gnome-shell-wallpaper.html">Cron Script to Change Gnome Shell Wallpaper</a>
    
    <a class="list-group-item " href="/gmail/getting-rid-of-the-chain-of-quoted-replies-in-gmail.html">Getting Rid of the Chain of Quoted Replies in Gmail</a>
    
  </div>
</section>




<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h3>
      <a href="https://plus.google.com/104488822194646220248?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h3>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2015 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
