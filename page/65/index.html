<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/page/65">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-24T15:45:15+01:00" pubdate data-updated="true">Jun 24<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/mysql/mysql-database-migration-synchronisation-script.html">Mysql Database Migration / Synchronisation Script</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>This is a nice little script I just knocked together that helps to synchronise databases when the table structures might not be exactly the same (for example different versions of the same system).</p>

<p>You would need to edit the top section to put the correct DB credentials etc.</p>

<p>This is definitely <b>not to be used on a live DB</b>, purely for aiding development and migration.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="sd">/** Database Synchronisation / Migration Tool</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * For synching up an old and a new DB schema.</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * @author EdmondsCommerce.co.uk</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//do you want the system to empty the new table before inserting data from the old table?</span>
</span><span class='line'><span class="nv">$truncate</span><span class="o">=</span><span class="k">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * DB Server Credentials - Needs to have full access to both databases</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="nv">$dbHost</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$dbUser</span><span class="o">=</span><span class="s1">&#39;root&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$dbPass</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/** Tables to Synch</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="nv">$tablesToSynch</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>    <span class="s1">&#39;categories&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;categories_description&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;products&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;products_description&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;products_to_categories&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;manufacturers&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$dbOld</span> <span class="o">=</span> <span class="s1">&#39;dbold&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$dbNew</span> <span class="o">=</span> <span class="s1">&#39;dbnew&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="sd">/*********** CODE BELOW HERE - NO NEED TO EDIT UNLESS YOU WANT TO ***********/</span>
</span><span class='line'><span class="nv">$_conn</span> <span class="o">=</span> <span class="nb">mysql_connect</span><span class="p">(</span><span class="nv">$dbHost</span><span class="p">,</span><span class="nv">$dbUser</span><span class="p">,</span><span class="nv">$dbPass</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;DB Connection Failed&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$dbOldTables</span><span class="o">=</span> <span class="nx">fetch_tables</span><span class="p">(</span><span class="nv">$dbOld</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$dbNewTables</span> <span class="o">=</span> <span class="nx">fetch_tables</span><span class="p">(</span><span class="nv">$dbNew</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="nv">$tablesToSynch</span> <span class="k">as</span> <span class="nv">$table</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">echo</span> <span class="s1">&#39;&lt;h3&gt;Doing &#39;</span><span class="o">.</span><span class="nv">$table</span><span class="o">.</span><span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="c1">//check for common tables</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$dbOldTables</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">in_array</span><span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$dbNewTables</span><span class="p">)){</span>
</span><span class='line'>        <span class="c1">//now get column data</span>
</span><span class='line'>        <span class="nv">$dbOldTableCols</span> <span class="o">=</span> <span class="nx">fetch_columns</span><span class="p">(</span><span class="nv">$dbOld</span><span class="p">,</span><span class="nv">$table</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="nv">$dbNewTableCols</span> <span class="o">=</span> <span class="nx">fetch_columns</span><span class="p">(</span><span class="nv">$dbNew</span><span class="p">,</span><span class="nv">$table</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//now for the column comparison</span>
</span><span class='line'>        <span class="nv">$cols</span><span class="o">=</span><span class="nb">array_intersect</span><span class="p">(</span><span class="nv">$dbOldTableCols</span><span class="p">,</span> <span class="nv">$dbNewTableCols</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//now emptying the new DB if set to do so</span>
</span><span class='line'>        <span class="k">if</span><span class="p">(</span><span class="nv">$truncate</span><span class="p">){</span>
</span><span class='line'>            <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;TRUNCATE </span><span class="si">$dbNew</span><span class="s2">.</span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//copy old table to new DB so we can copy columns</span>
</span><span class='line'>        <span class="nv">$tempTable</span><span class="o">=</span><span class="nx">copy_table</span><span class="p">(</span><span class="nv">$dbOld</span><span class="p">,</span> <span class="nv">$dbNew</span><span class="p">,</span> <span class="nv">$table</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//now build SQL and run</span>
</span><span class='line'>        <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;insert into </span><span class="si">$dbNew</span><span class="s2">.</span><span class="si">$table</span><span class="s2"> (&quot;</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="nv">$cols</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;) select &quot;</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span><span class="nv">$cols</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot; from </span><span class="si">$dbNew</span><span class="s2">.</span><span class="si">$tempTable</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">db_query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//now drop temp table</span>
</span><span class='line'>        <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;DROP TABLE </span><span class="si">$dbNew</span><span class="s2">.</span><span class="si">$tempTable</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/****** FUNCTIONS ********/</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">db_query</span><span class="p">(</span><span class="nv">$query</span><span class="p">){</span>
</span><span class='line'><span class="nv">$output</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;</span>
</span><span class='line'><span class="s1">&lt;h1 style=&quot;color: red&quot;&gt;Uh Oh......MySQL Error:&lt;/h1&gt;</span>
</span><span class='line'><span class="s1">&lt;h3&gt;Query:&lt;/h3&gt;</span>
</span><span class='line'><span class="s1">&lt;pre&gt;&#39;</span> <span class="o">.</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;/pre&gt;</span>
</span><span class='line'><span class="s1">&lt;h3&gt;MySQL Error:&lt;/h3&gt;</span>
</span><span class='line'><span class="s1">&#39;</span> <span class="o">.</span> <span class="nb">mysql_error</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;</span>
</span><span class='line'><span class="s1">&lt;hr /&gt; &lt;hr /&gt;&#39;</span><span class="p">);</span>   <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">fetch_tables</span><span class="p">(</span><span class="nv">$dbname</span><span class="p">){</span>
</span><span class='line'>    <span class="nv">$query</span><span class="o">=</span><span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;show tables from </span><span class="si">$dbname</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">while</span><span class="p">(</span><span class="nv">$r</span><span class="o">=</span><span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$query</span><span class="p">)){</span>
</span><span class='line'>        <span class="nv">$return</span><span class="p">[]</span><span class="o">=</span><span class="nv">$r</span><span class="p">[</span><span class="s2">&quot;Tables_in_</span><span class="si">$dbname</span><span class="s2">&quot;</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$return</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">fetch_columns</span><span class="p">(</span><span class="nv">$dbname</span><span class="p">,</span> <span class="nv">$table</span><span class="p">){</span>
</span><span class='line'>    <span class="nv">$query</span> <span class="o">=</span> <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;SHOW COLUMNS from </span><span class="si">$dbname</span><span class="s2">.</span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">while</span><span class="p">(</span><span class="nv">$r</span><span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$query</span><span class="p">)){</span>
</span><span class='line'>        <span class="nv">$return</span><span class="p">[]</span><span class="o">=</span><span class="nv">$r</span><span class="p">[</span><span class="s1">&#39;Field&#39;</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="nv">$return</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">copy_table</span><span class="p">(</span><span class="nv">$fromDb</span><span class="p">,</span> <span class="nv">$toDb</span><span class="p">,</span> <span class="nv">$table</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;DROP TABLE IF EXISTS </span><span class="si">$toDb</span><span class="s2">.temp_</span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE </span><span class="si">$toDb</span><span class="s2">.temp_</span><span class="si">$table</span><span class="s2"> LIKE </span><span class="si">$fromDb</span><span class="s2">.</span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE </span><span class="si">$toDb</span><span class="s2">.temp_</span><span class="si">$table</span><span class="s2"> DISABLE KEYS&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO </span><span class="si">$toDb</span><span class="s2">.temp_</span><span class="si">$table</span><span class="s2"> SELECT * FROM </span><span class="si">$fromDb</span><span class="s2">.</span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">db_query</span><span class="p">(</span><span class="s2">&quot;ALTER TABLE </span><span class="si">$toDb</span><span class="s2">.temp_</span><span class="si">$table</span><span class="s2"> ENABLE KEYS&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="s2">&quot;temp_</span><span class="si">$table</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-24T09:49:19+01:00" pubdate data-updated="true">Jun 24<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/ubuntu/ubuntu-jaunty-filezilla.html">Ubuntu Jaunty Filezilla</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>This is as much a note to self plus anyone else googling for the words <b>Ubuntu</b> <i>Jaunty</i> and <b>Filezilla</b></p>

<p>The version that&rsquo;s in the repositories is a bit old and missing some cool features like synchronised browsing.</p>

<p>The latest version is available from GetDeb &ndash; <a href="http://www.getdeb.net/app/FileZilla"><a href="http://www.getdeb.net/app/FileZilla">http://www.getdeb.net/app/FileZilla</a></a></p>

<p>If you have already installed a version from the repos, totally remove it using syntaptic package manager. Then download the main filezilla package and the filezilla-common package from GetDeb. Install the filezilla-common package first and then the Filezilla package itself.</p>

<p>Sorted.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-23T14:57:16+01:00" pubdate data-updated="true">Jun 23<span>rd</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-overiding-xml-case-inconsistency-continues.html">Magento Overiding XML Case Inconsistency Continues</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Had another tearing hair out moment when trying to figure out why my helper override was working fine,  but my block override wasn&rsquo;t working. Here is the result:</p>

<p><b>helper working, block not working:</b></p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;config&gt;</span>
</span><span class='line'>    <span class="nt">&lt;modules&gt;</span>
</span><span class='line'>        <span class="nt">&lt;EC_CatalogSearch&gt;</span>
</span><span class='line'>            <span class="nt">&lt;version&gt;</span>0.1.0<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/EC_CatalogSearch&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/modules&gt;</span>
</span><span class='line'>    <span class="nt">&lt;global&gt;</span>
</span><span class='line'>        <span class="nt">&lt;helpers&gt;</span>
</span><span class='line'>            <span class="nt">&lt;catalogSearch&gt;</span>
</span><span class='line'>                <span class="nt">&lt;rewrite&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;data&gt;</span>EC_CatalogSearch_Helper_Data<span class="nt">&lt;/data&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/rewrite&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/catalogSearch&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/helpers&gt;</span>
</span><span class='line'>        <span class="nt">&lt;blocks&gt;</span>
</span><span class='line'>            <span class="nt">&lt;catalogSearch&gt;</span>
</span><span class='line'>                <span class="nt">&lt;rewrite&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;result&gt;</span>EC_CatalogSearch_Block_Result<span class="nt">&lt;/result&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/rewrite&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/catalogSearch&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/blocks&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/global&gt;</span>
</span><span class='line'><span class="nt">&lt;/config&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>then after a load of messing about, this one does work:</p>

<p><b>helper and block both working</b></p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;config&gt;</span>
</span><span class='line'>    <span class="nt">&lt;modules&gt;</span>
</span><span class='line'>        <span class="nt">&lt;EC_CatalogSearch&gt;</span>
</span><span class='line'>            <span class="nt">&lt;version&gt;</span>0.1.0<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/EC_CatalogSearch&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/modules&gt;</span>
</span><span class='line'>    <span class="nt">&lt;global&gt;</span>
</span><span class='line'>        <span class="nt">&lt;helpers&gt;</span>
</span><span class='line'>            <span class="nt">&lt;catalogSearch&gt;</span>
</span><span class='line'>                <span class="nt">&lt;rewrite&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;data&gt;</span>EC_CatalogSearch_Helper_Data<span class="nt">&lt;/data&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/rewrite&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/catalogSearch&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/helpers&gt;</span>
</span><span class='line'>        <span class="nt">&lt;blocks&gt;</span>
</span><span class='line'>            <span class="nt">&lt;catalogsearch&gt;</span>
</span><span class='line'>                <span class="nt">&lt;rewrite&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;result&gt;</span>EC_CatalogSearch_Block_Result<span class="nt">&lt;/result&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/rewrite&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/catalogsearch&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/blocks&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/global&gt;</span>
</span><span class='line'><span class="nt">&lt;/config&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>yeah exactly :S</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-17T16:18:12+01:00" pubdate data-updated="true">Jun 17<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/optimised-magento-ami-for-amazon-ec2-host-magento-on-the-cloud.html">Optimised Magento AMI for Amazon EC2 - Host Magento on the Cloud</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Recently spoke to a client about the possiblity of setting up Magento on EC2 and remembered that I had seen a pre optimised AMI including caching etc to hopefully run Magento well.</p>

<p>A quick bit of Googling though and I saw that the top results are all people charging for  AMI&rsquo;s.</p>

<p>That can&rsquo;t be right, so I thought I would do a quick post to give the free optimsed AMI an SEO booster.</p>

<p>Debian Etch Linux Optimized for Magento:
<b><a href="http://developer.amazonwebservices.com/connect/entry.jspa?externalID=2193#reviews" target="_blank">Magento Optimised AMI for Amazon EC2</a></b></p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-15T18:46:01+01:00" pubdate data-updated="true">Jun 15<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-module-not-working-this-might-be-why.html">Magento Module Not Working? This Might Be Why</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>After a few hours of intense googling I have finally figured out why my Magento custom module is refusing to activate. I finally figured it out. It&rsquo;s all because the snippet of XML that I copied and pasted off a tutorial somewhere did not have the right capitalisation.</p>

<p><b>doesn&rsquo;t work &ndash; EC_All.xml</b></p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;config&gt;</span>
</span><span class='line'>    <span class="nt">&lt;modules&gt;</span>
</span><span class='line'>        <span class="nt">&lt;EC_CatalogSearch&gt;</span>
</span><span class='line'>            <span class="nt">&lt;active&gt;</span>true<span class="nt">&lt;/active&gt;</span>
</span><span class='line'>            <span class="nt">&lt;codepool&gt;</span>local<span class="nt">&lt;/codepool&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/EC_CatalogSearch&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/modules&gt;</span>
</span><span class='line'><span class="nt">&lt;/config&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><b>does work &ndash; EC_All.xml</b></p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;config&gt;</span>
</span><span class='line'>    <span class="nt">&lt;modules&gt;</span>
</span><span class='line'>        <span class="nt">&lt;EC_CatalogSearch&gt;</span>
</span><span class='line'>            <span class="nt">&lt;active&gt;</span>true<span class="nt">&lt;/active&gt;</span>
</span><span class='line'>            <span class="nt">&lt;codePool&gt;</span>local<span class="nt">&lt;/codePool&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/EC_CatalogSearch&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/modules&gt;</span>
</span><span class='line'><span class="nt">&lt;/config&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>I think next time I&rsquo;m just going to use the module creator!</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-15T14:25:11+01:00" pubdate data-updated="true">Jun 15<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-search-within-current-top-level-category.html">Magento Search Within Current Top Level Category</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you fancy having a select box allowing people to search within a top level category on your site directly from the quick search box, check out this little modification. This gives your search a bit of an Amazon feel. This idea could easily be extended if required.</p>

<p>You can drop this file in as a straight replacement to app/design/frontend/###/###/template/catalogsearch/form.mini.phtml</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Magento</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * NOTICE OF LICENSE</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * This source file is subject to the Academic Free License (AFL 3.0)</span>
</span><span class='line'><span class="sd"> * that is bundled with this package in the file LICENSE_AFL.txt.</span>
</span><span class='line'><span class="sd"> * It is also available through the world-wide-web at this URL:</span>
</span><span class='line'><span class="sd"> * http://opensource.org/licenses/afl-3.0.php</span>
</span><span class='line'><span class="sd"> * If you did not receive a copy of the license and are unable to</span>
</span><span class='line'><span class="sd"> * obtain it through the world-wide-web, please send an email</span>
</span><span class='line'><span class="sd"> * to license@magentocommerce.com so we can send you a copy immediately.</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * DISCLAIMER</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * Do not edit or add to this file if you wish to upgrade Magento to newer</span>
</span><span class='line'><span class="sd"> * versions in the future. If you wish to customize Magento for your</span>
</span><span class='line'><span class="sd"> * needs please refer to http://www.magentocommerce.com for more information.</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * @category   design_default</span>
</span><span class='line'><span class="sd"> * @package    Mage</span>
</span><span class='line'><span class="sd"> * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)</span>
</span><span class='line'><span class="sd"> * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> * @version Edmonds Commerce Quick Search with Top Level Categories</span>
</span><span class='line'><span class="sd"> *</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$category</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getModel</span><span class="p">(</span><span class="s1">&#39;catalog/category&#39;</span><span class="p">);</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="nb">is_object</span><span class="p">(</span><span class="nx">Mage</span><span class="o">::</span><span class="na">registry</span><span class="p">(</span><span class="s1">&#39;current_category&#39;</span><span class="p">))){</span>
</span><span class='line'>    <span class="nv">$current_category_path</span><span class="o">=</span><span class="nx">Mage</span><span class="o">::</span><span class="na">registry</span><span class="p">(</span><span class="s1">&#39;current_category&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getPathIds</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>    <span class="nv">$current_category_path</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nv">$category</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getStore</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getRootCategoryId</span><span class="p">());</span>
</span><span class='line'><span class="nv">$children_string</span> <span class="o">=</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getChildren</span><span class="p">();</span>
</span><span class='line'><span class="nv">$children</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="nv">$children_string</span><span class="p">);</span>
</span><span class='line'><span class="nv">$extra_options</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="nv">$children</span> <span class="k">as</span> <span class="nv">$c</span><span class="p">){</span>
</span><span class='line'>    <span class="nv">$selected</span> <span class="o">=</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$c</span><span class="p">,</span> <span class="nv">$current_category_path</span><span class="p">))</span><span class="o">?</span><span class="s1">&#39;SELECTED&#39;</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$extra_options</span><span class="o">.=</span> <span class="s1">&#39;&lt;option value=&quot;&#39;</span> <span class="o">.</span> <span class="nv">$c</span> <span class="o">.</span> <span class="s1">&#39;&quot; &#39;</span> <span class="o">.</span> <span class="nv">$selected</span> <span class="o">.</span> <span class="s1">&#39;&gt;&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="nv">$c</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;&lt;/option&gt;&#39;</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="cp">?&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">&lt;form id=&quot;search_mini_form&quot; action=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">helper</span><span class="p">(</span><span class="s1">&#39;catalogSearch&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getResultUrl</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&quot; method=&quot;get&quot;&gt;</span>
</span><span class='line'><span class="x">    &lt;fieldset&gt;</span>
</span><span class='line'><span class="x">        &lt;legend&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">__</span><span class="p">(</span><span class="s1">&#39;Search Site&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&lt;/legend&gt;</span>
</span><span class='line'><span class="x">        &lt;div class=&quot;mini-search&quot;&gt;</span>
</span><span class='line'><span class="x">            &lt;input id=&quot;search&quot; type=&quot;text&quot; class=&quot;input-text&quot; name=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">helper</span><span class="p">(</span><span class="s1">&#39;catalogSearch&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getQueryParamName</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">helper</span><span class="p">(</span><span class="s1">&#39;catalogSearch&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getEscapedQueryText</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;</span>
</span><span class='line'><span class="x">            &lt;select name=&quot;cat&quot; id=&quot;cat&quot; class=&quot;input-text&quot;&gt;</span>
</span><span class='line'><span class="x">            &lt;option value=&quot;&quot;&gt;All Departments&lt;/option&gt;</span>
</span><span class='line'><span class="x">            </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$extra_options</span> <span class="cp">?&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">           &lt;/select&gt;</span>
</span><span class='line'><span class="x">            &lt;input type=&quot;submit&quot; value=&quot;Go&quot; style=&quot;border: 1px solid #808080;&quot; alt=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">__</span><span class="p">(</span><span class="s1">&#39;Search&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;</span>
</span><span class='line'><span class="x">            &lt;div id=&quot;search_autocomplete&quot; class=&quot;search-autocomplete&quot;&gt;&lt;/div&gt;</span>
</span><span class='line'><span class="x">            &lt;script type=&quot;text/javascript&quot;&gt;</span>
</span><span class='line'><span class="x">            //&lt;![CDATA[</span>
</span><span class='line'><span class="x">                var searchForm = new Varien.searchForm(&#39;search_mini_form&#39;, &#39;search&#39;, &#39;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">__</span><span class="p">(</span><span class="s1">&#39;search site...&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&#39;);</span>
</span><span class='line'><span class="x">                searchForm.initAutocomplete(&#39;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">helper</span><span class="p">(</span><span class="s1">&#39;catalogSearch&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getSuggestUrl</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&#39;, &#39;search_autocomplete&#39;);</span>
</span><span class='line'><span class="x">            //]]&gt;</span>
</span><span class='line'><span class="x">            &lt;/script&gt;</span>
</span><span class='line'><span class="x">        &lt;/div&gt;</span>
</span><span class='line'><span class="x">    &lt;/fieldset&gt;</span>
</span><span class='line'><span class="x">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-15T09:55:37+01:00" pubdate data-updated="true">Jun 15<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/apache/plesk-mod-security.html">Plesk + Mod Security</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>If you are trying to modify your mod_security configuration on a plesk server and have tried using htaccess files you have probably realised that it won&rsquo;t work. That&rsquo;s a good thing, it makes it harder for people to screw up your server by turning off this protection.</p>

<p>Instead the way to do it is to edit the vhost.conf file located in the conf folder in the domain / sub domain root (the folder containing the httpdocs folder).</p>

<p>You can apply any settings you want to this file and then run the following command to get Plesk to rebuild your httpd configuration including your new settings. This is working with Plesk the way it was intended to be used and is a better solution that the htaccess file approach.</p>

<p>The command to rebuild your Apache configuration when you make a change to the vhost.conf ssl_vhost.conf file is:</p>

<figure class='code panel panel-default'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>        /usr/local/psa/admin/bin/websrvmng -a -v
</span></code></pre></td></tr></table></div></figure>


<p>This rebuilds the configuration for ALL virtual hosts. It shouldn&rsquo;t take more than a few seconds, obviously you then need to restart Apache.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-12T14:43:10+01:00" pubdate data-updated="true">Jun 12<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/zend%20framework/zend-framework-form-html-array-notation.html">Zend Framework Form HTML Array Notation</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>After losing an afternoon trying to get my extended Zend Dojo Form class to give me HTML array notation, I have finally found a solution that works. To celebrate I&rsquo;ve decided to share it should anyone else suffer a similar problem.</p>

<p>Here is the method:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">public</span> <span class="k">function</span> <span class="nf">addSubFormEl</span><span class="p">(</span><span class="nv">$subFormName</span><span class="p">,</span> <span class="nv">$addElOptions</span><span class="p">){</span>
</span><span class='line'>        <span class="nb">call_user_func_array</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$this</span><span class="p">,</span><span class="s1">&#39;addElement&#39;</span><span class="p">),</span> <span class="nv">$addElOptions</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getElement</span><span class="p">(</span><span class="nv">$addElOptions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">setBelongsTo</span><span class="p">(</span><span class="nv">$subFormName</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In one move, this creates the element and assigns it to a HTML array of the name $subFormName. Evidently I am using this with sub forms but there is no reason why you should have to do that.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-12T12:20:40+01:00" pubdate data-updated="true">Jun 12<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/cre-loaded-pci-compliance-validated.html">CRE Loaded PCI Compliance Validated</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>CRE Loaded osCommerce (by far my favourite and most highly recommended flavour of osCommerce) have recently posted on their blog about becoming the first open source ecommerce cart to be given PCI Approval.</p>

<p>Refreshingly as well they have redesigned their site and have gone back to making their free open source version more prominent on the site. I think this is a really good thing. I was always uncomfortable about their policy of overly pushing the paid for versions and making it tricky to find the free version.</p>

<p>It is then down the customer to decide whether to go with the free version or to take advantage of the extra features offered by the paid for version. This also allows potential CRE Loaded store owners to download the software and play around with it and discover if it really is the system for them.</p>

<p>For smaller operations that require a good solid easy to use and cheap to set up ecommerce platform I firmly recommend CRE Loaded (free or otherwise).</p>

<p>For larger operations or those people wanting something a bit more advanced than straight forward ecommerce I strongly recommend Magento. The best open source ecommerce platform is still Magento in my opinion, but CRE Loaded definitely has its place secured.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2009-06-10T12:52:59+01:00" pubdate data-updated="true">Jun 10<span>th</span>, 2009</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-more-detailed-exception-log.html">Magento More Detailed Exception Log</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Magento has a nice feature which logs exceptions to file and then generally displays a non scary message to the site user. Its not always true, some exceptions do get through and then generate reports.</p>

<p>For exceptions that are caught and logged though, (if you have logging enabled) you will find the exception log in the var/logs folder. However the exception log only contains the getTraceAsString info, which is heavily truncated and often pretty much useless. To get around this you can modify the logException method in Mage.php.</p>

<p>Note, editing Mage.php directly is not generally a good idea and any edits will get nuked every time you upgrade. However for local development work this little edit is OK I think.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'> <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">logException</span><span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">self</span><span class="o">::</span><span class="na">getConfig</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="nv">$file</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getStoreConfig</span><span class="p">(</span><span class="s1">&#39;dev/log/exception_file&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="c1">//self::log(&quot;n&quot;.$e-&gt;getTraceAsString(), Zend_Log::ERR, $file);</span>
</span><span class='line'>        <span class="nv">$exceptionString</span> <span class="o">=</span> <span class="s2">&quot;nnnLogged Exception:nn&quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;nn&quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getTraceAsString</span><span class="p">();</span>
</span><span class='line'>        <span class="cm">/*foreach($e-&gt;getTrace() as $t){</span>
</span><span class='line'><span class="cm">            $exceptionString .= var_export($t, true);</span>
</span><span class='line'><span class="cm">        }*/</span>
</span><span class='line'>        <span class="nx">self</span><span class="o">::</span><span class="na">log</span><span class="p">(</span><span class="nv">$exceptionString</span><span class="p">,</span> <span class="nx">Zend_Log</span><span class="o">::</span><span class="na">ERR</span><span class="p">,</span> <span class="nv">$file</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note I experimented with echoing out each trace as detailed in <a href="http://www.edmondscommerce.co.uk/blog/zend-framework/zend-framework-more-detailed-stack-trace/">this post</a>, however I found that this caused a fatal error due to some kind of recursion so I have commented it out. The only real change is that I have logged also the Exception message, which is generally the most useful bit of info and will actually help you understand what has gone wrong, in which file and on which line.</p>

<p>Hope this helps someone else out. If you have any suggestions on a cleaner or better way to do this please do post it / link it in the comments.</p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/page/66/">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/page/64/">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/urgent-update-bash-big-security-issue.html">Urgent Update Bash Big Security Issue</a>
    
    <a class="list-group-item " href="/Fedora/fedora-live-usb-key-creation.html">Fedora Live USB Key Creation</a>
    
    <a class="list-group-item " href="/linux/mute-chrome-slash-chromium-in-gnome-shell.html">Mute Chrome/Chromium in Gnome Shell</a>
    
    <a class="list-group-item " href="/linux/gui-editor-alike-terminal-editor.html">GUI Editor Alike Terminal Editor</a>
    
    <a class="list-group-item " href="/converting-and-manipulating-location-files-with-gpsbabel.html">Converting and Manipulating Location Files With GPSBabel</a>
    
  </div>
</section>




<section class="panel panel-default">
  <div class="panel-body">

    <!-- Place this tag where you want the widget to render. -->
	<div class="g-page" data-width="237" data-href="//plus.google.com/u/0/104488822194646220248" data-rel="publisher"></div>

	<!-- Place this tag after the last widget tag. -->
	<script type="text/javascript">
	  window.___gcfg = {lang: 'en-GB'};

	  (function() {
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/platform.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	  })();
	</script>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
