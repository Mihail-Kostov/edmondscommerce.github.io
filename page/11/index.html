<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/page/11">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-26T16:16:58+00:00" pubdate data-updated="true">Nov 26<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/bash/tip-remove-spaces-from-filenames-one-liner.html">Tip: Remove Spaces From Filenames One-liner</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>There is often the case when you need to remove spaces from filenames &ndash; for instance when importing broken data feeds into <a title="Magento" href="http://www.edmondscommerce.co.uk/platforms/magento">Magento</a> or <a title="osCommerce" href="http://www.edmondscommerce.co.uk/platforms/osCommerce">osCommerce</a> systems.</p>

<p>The following strips spaces and replaces them with nothing :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>find directoryname -name <span class="s1">&#39;* *&#39;</span> -type f | <span class="k">while </span><span class="nb">read </span>f; <span class="k">do </span>mv &amp;quot;<span class="nv">$f</span>&amp;quot; &amp;quot;<span class="k">$(</span><span class="nb">echo</span> <span class="nv">$f</span> | sed s/&amp;quot; &amp;quot;/&amp;quot;&amp;quot;/g<span class="k">)</span>&amp;quot;;  done
</span></code></pre></td></tr></table></div></figure>


<p>or alternatively replace them with underscores :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>find directoryname -name <span class="s1">&#39;* *&#39;</span> -type f | <span class="k">while </span><span class="nb">read </span>f; <span class="k">do </span>mv &amp;quot;<span class="nv">$f</span>&amp;quot; &amp;quot;<span class="k">$(</span><span class="nb">echo</span> <span class="nv">$f</span> | sed s/&amp;quot; &amp;quot;/&amp;quot;_&amp;quot;/g<span class="k">)</span>&amp;quot;;  done
</span></code></pre></td></tr></table></div></figure>


<p>Or any other character/string combo you like, you can even be more clever moving them out into subdirectories with more sed magic but you get the idea.  The reason the read command is there is to get the spaces in found filenames which if you simply use a &ldquo;for&rdquo; loop, bash splits on the spaces.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-23T19:17:50+00:00" pubdate data-updated="true">Nov 23<span>rd</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/magento/how-to-add-a-row-number-to-a-magento-dataflow-import-errors.html">How to Add a Row Number to a Magento Dataflow Import Errors</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I find it frustrating when importing data into Magento that it&rsquo;ll successfully complain about a row with errors, but won&rsquo;t tell you which row has the problem!</p>

<p>The code which generates the HTML for the error messages is at app/code/core/Mage/Adminhtml/Block/System/Convert/Profile/Run.php. Make a copy of this file at app/code/local/Mage/Adminhtml/Block/System/Convert/Profile/Run.php</p>

<p>Locate this part:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setBatchConfig</span><span class="p">(</span>
</span><span class='line'>                        <span class="o">...</span>
</span><span class='line'>                        <span class="s1">&#39;template&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;li style=&quot;#{style}&quot; id=&quot;#{id}&quot;&gt;&#39;</span>
</span><span class='line'>                                    <span class="o">.</span> <span class="s1">&#39;&lt;img id=&quot;#{id}_img&quot; src=&quot;#{image}&quot; class=&quot;v-middle&quot; style=&quot;margin-right:5px&quot;/&gt;&#39;</span>
</span><span class='line'>                                    <span class="o">.</span> <span class="s1">&#39;&lt;span id=&quot;#{id}_status&quot; class=&quot;text&quot;&gt;#{text}&lt;/span&gt;&#39;</span>
</span><span class='line'>                                    <span class="o">.</span> <span class="s1">&#39;&lt;/li&gt;&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>And change:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="s1">&#39;&lt;span id=&quot;#{id}_status&quot; class=&quot;text&quot;&gt;#{text}&lt;/span&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>to:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="s1">&#39;&lt;span id=&quot;#{id}_status&quot; class=&quot;text&quot;&gt;Row #{id} - #{text}&lt;/span&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-22T13:54:01+00:00" pubdate data-updated="true">Nov 22<span>nd</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/chrome-autocorrect-for-gmail-and-google-apps.html">Chrome AutoCorrect for Gmail (and Google Apps)</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you use Gmail (also bundled with Google Apps) for your business then you probably write a lot of emails directly into the gmail interface. If you are like me you probably make teh the mistakes all teh time. (See what I did there!)</p>

<p>As the MD of Edmonds Commerce I probably write more emails than most people with everything from <a href="/platforms/magento">Magento</a> quotes, client communications, enquiries and maybe even the occasional personal email. At a guess I would say I write a good few thousand words per day. I should calculate that one day.</p>

<p>Well help is at hand with this wonderful chrome extension that will auto correct common typos as you type them in gmail. For me this is a real productivity booster as I type fast but badly and this really tidies up a lot of my common mistakes meaning less <em>backspace</em> and more <em>getting stuff done</em>.</p>

<p>You can grab the extension <a href="https://chrome.google.com/webstore/detail/ezautocorrect-for-gmail/fholdolknchpdbajhpdenookmikblmda/related" target="_blank">here</a>.</p>

<p>I hope you find it useful. On another note, if you aren&rsquo;t currently using Google Apps (its free you know) and would like to look at transitioning your business to the system then get in touch with us and we would be happy to help you with it. I can not recommend the service enough to be honest, even if you go for the paid version the cost is negligible really. Smaller companies should be find with the free version though which you really can&rsquo;t argue with.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-21T20:07:40+00:00" pubdate data-updated="true">Nov 21<span>st</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/register-shutdown-function-not-working-in-magento-solution.html">Register Shutdown Function Not Working in Magento + Solution</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I am currently putting together an automated system that converts user input within Magento.</p>

<p>As this runs using cron, I will be unable to see if anything goes wrong, unless the errors are logged.</p>

<p>Now it is possible to set custom error and exception handlers that will log most things, but I needed to cover all bases and try to log in the event of a fatal error.</p>

<p>It is possible to do this by calling register_shutdown_function and checking for an error there &ndash; see <a href="http://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error" title="Stack Overflow - How do I catch a PHP Fatal Error">here</a> for a full explanation on how to do this.</p>

<p>The problem I had was that this would not work within Magento. After a lot of going through the code it appears that if you have developer mode set to true, then your function will not be called. Once it is disabled the function works as expected.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-19T12:41:07+00:00" pubdate data-updated="true">Nov 19<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/edmonds-commerce-successfully-leads-firesale-on-buckley-jewellery.html">Edmonds Commerce Successfully Implements Marketing Firesale on Buckley Jewellery</a></h1>
    
  </header>


  <div class="entry-content clearfix"><h2>The idea</h2>


<p><a href="http://www.buckleylondon.com/">Buckley Jewellery</a> approached us with an idea they had for setting up a promotion to go viral. Their idea was to pick one of their products which they were already selling and literally give it away.</p>

<h2>The problems</h2>


<p>The initial requirement was fairly straightforward &ndash; we&rsquo;d set up a Shopping Cart Price Rule with a coupon code to give a 100% discount on the product price if the specific SKU was in the basket. But it then became apparent that there were various problems here.</p>

<p><strong>Free Shipping Calculations:<strong> Although we&rsquo;d set it up so that only one of the items were discounted, all items were still factored in when Magento attempted to calculate the shipping costs, so their Free UK Delivery Over &pound;30 policy took effect when two of the item were present</p>

<p><strong>Different shipping for the free product:<strong> Buckley have shipping rates tailored to a more bulky package, but obviously these free earrings were quite small, and charging upwards of &pound;10 for EU shipping wasn&rsquo;t going to work. We had to find a way to keep their &pound;3.50, &pound;12.50 and &pound;19 shipping for their products, but for the free earrings have an exception &ndash; &pound;2.99, &pound;3.99 and &pound;4.99.</p>

<h2>The solutions</h2>


<p>We spent much time with Buckley discussing how to get their requirements to work and went down a few threads of thought</p>

<p>The core discount is a Shopping Cart Price Rule setting a 100% price discount applied only to one of the specific SKU, one per customer, with a coupon code.</p>

<p>To solve the different shipping for different products we decided to leverage products&#8217; weights to vary the shipping. Having to work around their MatrixRates extension&rsquo;s limitation to only vary by weight OR basket total vs destination we implemented a standard weight across the board, and changed only the free earrings to be less &lsquo;heavy&rsquo;. We then implemented shipping rules such that if the basket came to a weight less than 1kg (which could only mean it was just the free earrings) the lower shipping rates are applied, otherwise the greater costs</p>

<p>We then reimplemented the free shipping over &pound;30 (at the last minute!) as another Shopping Cart Price Rule so that we could still maintain the free shipping, without having to pay to upgrade their MatrixRates extension</p>

<h2>On the day</h2>


<p>The promotion did go viral &ndash; it ended up on various social media, as well as being featured on MoneySavingExpert, with them promising to send it out on their monthly newsletter</p>

<p>The earrings sold out in less than two hours, with people flocking to the site to get their hands on them. Of course, many customers also purchased other items while on the site and they&rsquo;ve increased their customer base, while also getting their name out there.</p>

<p>They&rsquo;re now looking to switch over their hosting so that they can stand up to bigger and better promotions in the future</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-19T08:02:25+00:00" pubdate data-updated="true">Nov 19<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/linux/wget-for-beginners.html">Wget for Beginners</a></h1>
    
  </header>


  <div class="entry-content clearfix"><h3>What is Wget in general ?</h3>


<p>Wget is a free utility for non-interactive download of file from the web. The user doesn’t need to login system every time <a href="http://www.gnu.org/software/wget/" rel="nofollow">Wget</a> can download the entire web page or mirroring the entire web page. If download crashed or stop for various reason Wget will start download again from where it stopped. It is highly recommended for downloading file from web with slow network connections.</p>

<h2>How to Use Wget ? </h2>




<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">wget</span> <span class="o">-</span><span class="nx">t</span> <span class="mi">10</span> <span class="nx">www</span><span class="o">.</span><span class="nx">google</span><span class="o">.</span><span class="nx">com</span>
</span></code></pre></td></tr></table></div></figure>


<p>If network connection fails Wget will to try to reconnect 20 times in default.With -t command we can specify how many times it need to  reconnect.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">wget</span> <span class="o">-</span><span class="nx">p</span> <span class="o">--</span><span class="nx">convert</span><span class="o">-</span><span class="nx">links</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">www</span><span class="o">.</span><span class="nx">google</span><span class="o">.</span><span class="nx">com</span> <span class="o">-</span><span class="nx">o</span> <span class="nx">logfile</span>
</span></code></pre></td></tr></table></div></figure>


<p>This command will download the site -p and &mdash;convert will make sure all linked files are linked to downloaded document such as images and external links it enables complete offline viewing. Log file can be enabled with -O command to view the output message.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">wget</span> <span class="o">--</span><span class="nx">spider</span> <span class="o">--</span><span class="nx">force</span><span class="o">-</span><span class="nx">html</span> <span class="nx">www</span><span class="o">.</span><span class="nx">google</span><span class="o">.</span><span class="nx">com</span>
</span></code></pre></td></tr></table></div></figure>


<p>&mdash;spider Will check the webpage is existent or not.
&mdash;force  It will enforce the file type that have to be downloaded.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">wget</span> <span class="o">-</span><span class="nx">u</span> <span class="nx">mozilla</span> <span class="nx">www</span><span class="o">.</span><span class="nx">google</span><span class="o">.</span><span class="nx">com</span>
</span></code></pre></td></tr></table></div></figure>


<p>some site access allowed to certain user <a href="http://www.user-agents.org/" rel="nofollow">agents</a>. So to access with certain user agent you can use this command.</p>

<p>Ftp connection download is achieved by</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">wget</span> <span class="o">-</span><span class="nx">r</span> <span class="nx">ftp</span><span class="o">://</span><span class="nx">username</span><span class="o">:</span><span class="nx">password</span><span class="o">@</span><span class="nx">ftp</span><span class="o">.</span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-14T15:01:37+00:00" pubdate data-updated="true">Nov 14<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/web%20development/tip-how-to-get-the-right-click-reload-button-in-chrome.html">Tip: How to Get the Right-click Reload Button in Chrome</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Recently the good folks at chrome have added a feature where you can reload without the cache, which is in a right-click on the reload button, but I was really confused as some machines seem to have it and others don&rsquo;t.</p>

<p>The key is whether developer tools is open or not! If you&rsquo;re using a recent version of chrome, press F12 to open the developer tools and then you can right-click the reload button, and you get three options &ndash; Reload, Hard Reload (redownloads images) and Empty Cache and Hard Reload.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-14T12:54:10+00:00" pubdate data-updated="true">Nov 14<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/security/serious-skype-vulnerability-nov-2012.html">Serious Skype Vulnerability Nov 2012</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>There is a current vulnerability with skype accounts where anyone who knows your email address can get access to your account, and even your private chat logs.</p>

<p>According to Kaspersky Labs (a leading computer security firm), the leader of the Russian Opposition has had his private chat logs leaked via this method.</p>

<p>This is a serious vulnerability and Microsoft (the current owners of skype) are looking into the issue.  At present there&rsquo;s no way to avoid the compromise, perhaps think about clearing your logs if you have anything private in there.</p>

<p>There&rsquo;s a good article <a title="The Register" href="http://www.theregister.co.uk/2012/11/14/skype_disables_password_reset_bug/" target="_blank">here</a> that explains in more detail.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-14T12:45:09+00:00" pubdate data-updated="true">Nov 14<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/run-multiple-mysql-queries-in-a-single-function.html">Run Multiple MySQL Queries in a Single Function</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you want to be able to run multiple queries in a single function call, for example doing the classic drop table blah; create table blah; then you might like this function.</p>

<p>The use case is for things like database migration systems which you might copy and paste chunks of SQL including multiple queries from things like phpMyAdmin</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Run multiple queries passed in as a single string</span>
</span><span class='line'><span class="sd"> * This is optimised for copying and pasting from phpMyAdmin</span>
</span><span class='line'><span class="sd"> * </span>
</span><span class='line'><span class="sd"> * Handy for things like database migration systems</span>
</span><span class='line'><span class="sd"> * </span>
</span><span class='line'><span class="sd"> * @param string $sql  multiple queries terminated with ; and a new line</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">function</span> <span class="nf">multiQuery</span><span class="p">(</span><span class="nv">$sql</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nv">$sqls</span> <span class="o">=</span> <span class="nb">preg_split</span><span class="p">(</span><span class="s1">&#39;%;$%m&#39;</span><span class="p">,</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$sql</span><span class="p">));</span>
</span><span class='line'>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$sqls</span> <span class="k">as</span> <span class="nv">$q</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$q</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">continue</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="nb">mysql_query</span><span class="p">(</span><span class="nv">$q</span><span class="p">);</span> <span class="c1">//suggest you replace this with your custom query function or if not throw in some extra error checking at least</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-13T16:34:33+00:00" pubdate data-updated="true">Nov 13<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/cron-not-working-in-magento-solution.html">Cron Not Working in Magento +Solution</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I recently had a Magento store that was not running cron jobs despite everything appearing to be set up correctly.</p>

<p>After tearing out my hair, I discovered that there was a cron job running that had not closed properly, which prevented any new cron jobs from starting.</p>

<p>This is because the cron.sh file that is used by magento checks the currently running processes, and if one exists quietly exits.</p>

<p>To check if this is the case you can run a modified line from the cron.sh file as set out below</p>

<p><code>
ps auxwww | grep &ldquo;/path/to/magento/cron.php&rdquo; | grep -v grep | grep -v cron.sh
</code></p>

<p>If this returns a line similar to the one below</p>

<p><code>
root      2125  0.0  0.9 329896 40484 ?        S    Nov13   0:00 /usr/bin/php /path/to/magento/cron.php
</code></p>

<p>You can kill the running job, which will allow cron to run normally. At this stage you should debug the cron tasks to see why the process stalled</p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/page/12/">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/page/10/">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/chrome/trigger-basic-auth-popup-in-chrome.html">Trigger Basic Auth Popup in Chrome</a>
    
    <a class="list-group-item " href="/Symonfy2/symonfy2-phpstorm-project-setup.html">Symonfy2 PHPStorm Project Setup</a>
    
    <a class="list-group-item " href="/vim/octopress-syntax-highlighting-for-vim.html">Octopress Syntax Highlighting for Vim</a>
    
    <a class="list-group-item " href="/phpstorm/ruby/ruby-syntax-highlighting-with-phpstorm.html">Ruby Syntax Highlighting With PHPStorm</a>
    
    <a class="list-group-item " href="/fedora/setting-up-a-fedora-19-based-php-development-installation.html">Setting Up a Fedora 19 Based PHP Development Installation</a>
    
  </div>
</section>




<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h3>
      <a href="https://plus.google.com/104488822194646220248?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h3>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2013 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
