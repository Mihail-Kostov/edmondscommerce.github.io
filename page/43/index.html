<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/page/43">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-02-11T12:13:49+00:00" pubdate data-updated="true">Feb 11<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/alternative-magento-payment-service-providers.html">Alternative Magento Payment Service Providers</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Traditionally Edmonds Commerce have always recommended Sage Pay as a payment service provider however recently the service has been a bit patchy and they have made some mistakes in their general strategy.</p>

<p>Its definitely a good time to evaluate the other available options and here are some that we recommend looking at:</p>

<p><a href="http://www.magentocommerce.com/extension/packages/module/5045/total_web_solutions_payment_gateway_module">Total Web Solutions</a></p>

<p><a href="http://www.magentocommerce.com/magento-connect/Iridium%20Corporation/extension/3764/iridiumcorp_tpg">Iridium</a></p>

<p>Both of these have free Magento connect extensions and offer competitive pricing and general feedback seems to be good so well worth taking a look at.</p>

<p>Edmonds Commerce have a close relationship with both companies and would be happy to help you get set up with them.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-02-10T13:57:50+00:00" pubdate data-updated="true">Feb 10<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-transactional-email-codes-custom-emails.html">Magento Transactional Email Codes - Custom Emails</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you need to send some custom emails as part of a custom Magento module development project, you will stumble into the Magento email template system and its confusing mixture of XML requirements.</p>

<p>Rather than go into too much detail here are some pointers about how to achieve what you want to do.</p>

<ol>
<li>You need to set up your admin options in your system.xml file.</li>
</ol>


<p>I&rsquo;m not going to go into the details on how to set up custom admin configuration, for that try <a href="http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/xml_structure_for_admin_configurations">here</a>.</p>

<p>Lets assume you have a custom module under the xml path:</p>

<p>config/sections/custom_module/groups/email/template</p>

<p>that section should look something like this:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;template</span> <span class="na">translate=</span><span class="s">&quot;label&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;label&gt;</span>Custom Email Template<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>  <span class="nt">&lt;frontend_type&gt;</span>select<span class="nt">&lt;/frontend_type&gt;</span>
</span><span class='line'>  <span class="nt">&lt;source_model&gt;</span>adminhtml/system_config_source_email_template<span class="nt">&lt;/source_model&gt;</span>
</span><span class='line'>  <span class="nt">&lt;sort_order&gt;</span>2<span class="nt">&lt;/sort_order&gt;</span>
</span><span class='line'>  <span class="nt">&lt;show_in_default&gt;</span>1<span class="nt">&lt;/show_in_default&gt;</span>
</span><span class='line'>  <span class="nt">&lt;show_in_website&gt;</span>1<span class="nt">&lt;/show_in_website&gt;</span>
</span><span class='line'>  <span class="nt">&lt;show_in_store&gt;</span>1<span class="nt">&lt;/show_in_store&gt;</span>
</span><span class='line'><span class="nt">&lt;/template&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You need to set your default value in your config.xml file (inside the root config tag)</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'> <span class="c">&lt;!-- DEFAULTS For Admin System Configuration //--&gt;</span>
</span><span class='line'>    <span class="nt">&lt;default&gt;</span>
</span><span class='line'>        <span class="nt">&lt;custom_module&gt;</span>
</span><span class='line'>            <span class="nt">&lt;email&gt;</span>
</span><span class='line'>                <span class="nt">&lt;enabled&gt;</span>1<span class="nt">&lt;/enabled&gt;</span>
</span><span class='line'>                <span class="nt">&lt;template&gt;</span>custom_module_email_template<span class="nt">&lt;/template&gt;</span>
</span><span class='line'>                <span class="nt">&lt;identity&gt;</span>sales<span class="nt">&lt;/identity&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/email&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/custom_module&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/default&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now you also need to define your email template, which goes inside the config/global/ node</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>       <span class="c">&lt;!-- EMAIL TEMPLATE //--&gt;</span>
</span><span class='line'>        <span class="nt">&lt;template&gt;</span>
</span><span class='line'>            <span class="nt">&lt;email&gt;</span>
</span><span class='line'>                <span class="nt">&lt;custom_module_email_template</span> <span class="na">translate=</span><span class="s">&quot;label&quot;</span> <span class="na">module=</span><span class="s">&quot;appliedsb&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;label&gt;</span>Custom Template<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;file&gt;</span>appliedsb/download_links.html<span class="nt">&lt;/file&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;type&gt;</span>html<span class="nt">&lt;/type&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/custom_moduel_email_template&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/email&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/template&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And then you need to make sure you put the email template inside the locale folder, en_us (or other locales as needed).</p>

<p>Now you need to clear cache and I recommend resaving the custom configuration group in the admin and double check that your Custom Template label is appearing properly in the email templates dropdown for your module.</p>

<p>And that should be it, your module now has a custom email template that has a locale file and is also over rideable with Magento&rsquo;s own transactional emails system &ndash; sweet!</p>

<p>If you get the exception <strong>Invalid transactional email code:</strong> then double check that all your xml nodes match up and that the locale file is in the correct place, clear your cache, resave the admin config and try again. This bug can be tricky to track down but if you respect the above xml and file layout it should all work.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-02-08T13:17:04+00:00" pubdate data-updated="true">Feb 8<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-detailed-exception-dump-version-3.html">Magento Detailed Exception Dump - Version 3</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Continuing with trying to improve the developer experience with Magento a key element has been my quest for a detailed exception dump that can also handle the various object recursion issues in Magento that can cause all kinds of issues when developing.</p>

<p>Here is my most up to date version of the detailedExceptionDump method.</p>

<p>Its designed to go into a customised version of Mage that you should ONLY use on development environemnts. I will leave the particular usage of this method to you, though it would make sense to also modify the printException method as a starting point.</p>

<script type="text/javascript" src="http://snipt.net/embed/a72f23e55dd732511c71a0d72260ab8b"></script>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-02-07T18:27:50+00:00" pubdate data-updated="true">Feb 7<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/extending-magento-objects-with-custom-attributes.html">Extending Magento Objects With Custom Attributes</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>It&rsquo;s fairly common that you need to add in some custom data to a Magento object.</p>

<p>The most common scenario is products and its totally handled via the admin side. However if you need to extend something like the order object to store custom order information then things get a little bit more tricky, but it&rsquo;s fairly easy still.</p>

<p>If you are extending an order, you also need to make sure that you extend in the &ldquo;flat table&rdquo; way as opposed to the standard EAV way otherwise things won&rsquo;t work as you expect.</p>

<p>If you just want to add in a simple text attribute then you can do the following:</p>

<ol>
<li>Edit your config.xml and set up the installer section, the following needs to be within the</li>
</ol>


<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;global&gt;&lt;/global&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p> tags</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="c">&lt;!-- RESOURCES - Install etc //--&gt;</span>
</span><span class='line'>        <span class="nt">&lt;resources&gt;</span>
</span><span class='line'>            <span class="nt">&lt;custommodule_setup&gt;</span>
</span><span class='line'>                <span class="nt">&lt;setup&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;module&gt;</span>EdmondsCommerce_CustomModule<span class="nt">&lt;/module&gt;</span>
</span><span class='line'>                    <span class="c">&lt;!--</span>
</span><span class='line'><span class="c">                      Points to</span>
</span><span class='line'><span class="c">                      app/code/local/EdmondsCommerce_CustomModule/sql/custommodule_setup/mysql4-install-0.0.1.php</span>
</span><span class='line'>
</span><span class='line'><span class="c">                      Sets mysql4-install-0.1.0.php to be a class of type Mage_Sales_Model_Mysql4_Setup</span>
</span><span class='line'><span class="c">                      Passes &#39;core_setup&#39; as a connection &#39;type&#39; :)</span>
</span><span class='line'><span class="c">                    --&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;class&gt;</span>Mage_Sales_Model_Mysql4_Setup<span class="nt">&lt;/class&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/setup&gt;</span>
</span><span class='line'>                <span class="nt">&lt;connection&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;use&gt;</span>core_setup<span class="nt">&lt;/use&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/connection&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/custommodule_setup&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/resources&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note this bit:
<class>Mage_Sales_Model_Mysql4_Setup</class></p>

<p>Its important you specify the correct setup model for the object you are extending. Just take a look at the core module config.xml file to find out. In the above example we are setting up to extend the order object which uses the flat table storage system.</p>

<ol>
<li>Your installer file
app/code/local/EdmondsCommerce/CustomModule/sql/custommodule_setup/mysql4-install-0.1.0.php</li>
</ol>


<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="cm">/* @var $installer Mage_Sales_Model_Mysql4_Setup */</span>
</span><span class='line'><span class="nv">$installer</span> <span class="o">=</span> <span class="nv">$this</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$installer</span><span class="o">-&gt;</span><span class="na">startSetup</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd">* Adds an attribute of the code custommodule_info to the order object</span>
</span><span class='line'><span class="sd">* As this is a flat table, it adds the column to the table for you</span>
</span><span class='line'><span class="sd">**/</span>
</span><span class='line'><span class="nv">$installer</span><span class="o">-&gt;</span><span class="na">addAttribute</span><span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">,</span> <span class="s1">&#39;custommodule_info&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;text&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$installer</span><span class="o">-&gt;</span><span class="na">endSetup</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then access any Magento page and your installer should run and update the schema for you.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-02-07T16:30:12+00:00" pubdate data-updated="true">Feb 7<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-add-order-status-history-comment.html">Magento Add Order Status History Comment</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Adding an order status history comment to a Magento order object is easy, when you know how!</p>

<p>There is a very helpful Mage_Sales_Model_Order::addStatusHistoryComment() method which will take a comment and optional order status and either just save the comment or save the comment and update the order status.</p>

<p>However I found that it didn&rsquo;t quite work for me. Reading the docblock on the Mage_Sales_Model_Order::addStatusHistory() method, it turns out that it won&rsquo;t take effect unless the order object itself is saved.</p>

<p>So in a nutshell this is how to add a comment to an order in Magento</p>

<script type="text/javascript" src="http://snipt.net/embed/4d4c11ac1ca65bc817bc92976958501a"></script>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-02-03T14:04:09+00:00" pubdate data-updated="true">Feb 3<span>rd</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-silent-failures-and-how-to-find-and-stop-them.html">Magento Silent Failures and How to Find and Stop Them</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you are finding that Magento seems to be silently failing to include your files without triggering any kind of error (this tends to happen mostly with layouts or installer scripts) then you might find this useful.</p>

<p>For me, my installer script wasn&rsquo;t working and it turned out to be a tiny typo in my config.xml file that meant that Magento was looking in the wrong place for the file and failing silently when it didn&rsquo;t find it:</p>

<p>The code in question is here:</p>

<p><strong>Mage_Core_Model_Resource_Setup
</strong></p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">protected</span> <span class="k">function</span> <span class="nf">_modifyResourceDb</span><span class="p">(</span><span class="nv">$actionType</span><span class="p">,</span> <span class="nv">$fromVersion</span><span class="p">,</span> <span class="nv">$toVersion</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nv">$resModel</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_connectionConfig</span><span class="o">-&gt;</span><span class="na">model</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$modName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_moduleConfig</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="nv">$sqlFilesDir</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getModuleDir</span><span class="p">(</span><span class="s1">&#39;sql&#39;</span><span class="p">,</span> <span class="nv">$modName</span><span class="p">)</span><span class="o">.</span><span class="nx">DS</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_resourceName</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$sqlFilesDir</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nb">is_readable</span><span class="p">(</span><span class="nv">$sqlFilesDir</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">die</span><span class="p">(</span><span class="nv">$sqlFilesDir</span><span class="p">);</span> <span class="c1">//it was failing silently here, not really helpful to me</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are a few of these kinds of code snippets around the codebase. I started to think how much easier a developers life would be if we could make Magento throw exceptions instead of silently failing, at least if we are in developer mode anyway.</p>

<p>To track them down we can use a bit of grep and xargs</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">find</span> <span class="nv">$ABSOLUTE_PATH_TO_MAGENTO_ROOT</span>  <span class="o">-</span><span class="nx">name</span> <span class="s2">&quot;*.php&quot;</span> <span class="o">|</span> <span class="nx">xargs</span>  <span class="nx">grep</span> <span class="o">-</span><span class="nx">n</span> <span class="o">-</span><span class="nx">B</span> <span class="mi">6</span> <span class="o">-</span><span class="nx">A</span> <span class="mi">3</span> <span class="s2">&quot;!is_readable(&quot;</span>  <span class="o">&gt;</span> <span class="nv">$ABSOLUTE_PATH_TO_OUTPUT_FILE_INC_FILE_NAME</span>
</span></code></pre></td></tr></table></div></figure>


<p>At some point I intend to figure a way of tracking down all these silent failures and making them noisy!</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-01-20T14:43:37+00:00" pubdate data-updated="true">Jan 20<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/php-jobs-leeds.html">PHP Jobs Leeds</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>Looking for PHP Jobs in the Leeds area?</p>

<p>You have come to the right place. Edmonds Commerce are actively recruiting PHP developers in the Leeds area. We have more work on than we can handle and that&rsquo;s only likely to grow even more.</p>

<p>If you would like to work as a PHP Developer with Edmonds Commerce in Leeds then <strong><a href="/contact-us/?about=php-jobs-leeds">get in touch</a></strong> as we have a great job to offer you.</p>

<p>You can read more about our <a href="http://www.edmondscommerce.co.uk/about/job-recruitment-php-developer-leeds/">PHP Jobs</a> in <a href="http://www.edmondscommerce.co.uk/about/job-recruitment-php-developer-leeds/">Leeds</a> by visiting this page:</p>

<p><a href="http://is.gd/phpjobleeds"><a href="http://is.gd/phpjobleeds">http://is.gd/phpjobleeds</a></a></p>

<p>If you are from anywhere in or around Leeds, Bradford, Hunslet, Beeston Hill, Knowsthorpe, Kirkstall, Belle Isle, Farnley, Beeston, Killingbeck, Meanwood, Bramley, Adel, Stanningley, Moortown, Gildersome  and looking for PHP work then get in touch.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-01-15T12:26:09+00:00" pubdate data-updated="true">Jan 15<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/mysql/mysql-triggers-a-quick-guide.html">MySQL Triggers - a Quick Guide</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>MySQL has a nice feature that you may well not have used called Triggers.</p>

<p>These are little SQL statements that are tied to events on table and then perform some extra work.</p>

<p>The idea being that you will check the values for a row and if they meet some conditions you will take some further action. You might usually do this kind of thing in code but if you really must be certain that in a certain circumstance a certain action will be taken, then triggers are a good option because regardless which bit of code makes the change you can be sure your rules will be enforced.</p>

<p>Of course this ties you to a specific DB platform so its not something you should over use. There can also be performance issues so you need to bear that in mind.</p>

<p>Anyway, assuming you know what you are letting yourself in for and have read the <a href="http://www.google.com/search?hl=en&q=site%3Adev.mysql.com+triggers+5.0&aq=f&aqi=&aql=&oq=">documentation</a> here is my little summary.</p>

<p>First you need to give your trigger a name. Choose something descriptive.</p>

<p>Then you need to associate it to an even (UPDATE, INSERT etc) and also decide whether to do it BEFORE or AFTER. If you are not sure, use BEFORE &ndash; it&rsquo;s generally the one you want to use.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">CREATE</span> <span class="k">TRIGGER</span> <span class="n">do_something</span> <span class="k">BEFORE</span> <span class="k">UPDATE</span> <span class="k">ON</span> <span class="k">table</span>
</span><span class='line'><span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>The next bit is boiler plate as far as I can gather, just whack it in. It delimits your actual statement and tells it to be run for each updated row.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'>  <span class="k">FOR</span> <span class="k">EACH</span> <span class="k">ROW</span> <span class="k">BEGIN</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then do your test</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="n">IF</span> <span class="p">((</span><span class="k">NEW</span><span class="p">.</span><span class="k">column</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="k">OLD</span><span class="p">.</span><span class="k">column</span> <span class="o">&gt;=</span><span class="mi">1</span><span class="p">))</span> <span class="k">THEN</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note the NEW and OLD keywords there.</p>

<p>You have a choice of using the NEW and OLD keyword to access existing (OLD) and about to be set (NEW) data for each column.</p>

<p>Note also, this is only possible if you use the BEFORE event as opposed to AFTER, hence generally just sticking to using BEFORE</p>

<p>Now, enforce your requirements</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">SET</span> <span class="k">NEW</span><span class="p">.</span><span class="n">another_column</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="k">SET</span> <span class="k">NEW</span><span class="p">.</span><span class="n">and_another_column</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="k">SET</span> <span class="k">NEW</span><span class="p">.</span><span class="n">and_another</span> <span class="o">=</span> <span class="s1">&#39;cheese&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then wrap it up</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'> <span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
</span><span class='line'><span class="k">END</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s it&hellip;</p>

<p>BUT WAIT</p>

<p>There&rsquo;s another bit that I totally missed which caused me issues &ndash; you need to wrap the whole thing in a delimiter statement:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">delimiter</span> <span class="o">//</span>
</span><span class='line'><span class="p">...</span> <span class="n">the</span> <span class="k">statement</span>
</span><span class='line'><span class="k">END</span><span class="p">;</span><span class="o">//</span>
</span><span class='line'><span class="k">delimiter</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>So the full final thing should look like this:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">delimiter</span> <span class="o">//</span>
</span><span class='line'><span class="k">CREATE</span> <span class="k">TRIGGER</span> <span class="n">do_something</span> <span class="k">BEFORE</span> <span class="k">UPDATE</span> <span class="k">ON</span> <span class="k">table</span>
</span><span class='line'>  <span class="k">FOR</span> <span class="k">EACH</span> <span class="k">ROW</span> <span class="k">BEGIN</span>
</span><span class='line'>    <span class="n">IF</span> <span class="p">((</span><span class="k">NEW</span><span class="p">.</span><span class="k">column</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="k">OLD</span><span class="p">.</span><span class="k">column</span> <span class="o">&gt;=</span><span class="mi">1</span><span class="p">))</span> <span class="k">THEN</span>
</span><span class='line'>        <span class="k">SET</span> <span class="k">NEW</span><span class="p">.</span><span class="n">another_column</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="k">SET</span> <span class="k">NEW</span><span class="p">.</span><span class="n">and_another_column</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="k">SET</span> <span class="k">NEW</span><span class="p">.</span><span class="n">and_another</span> <span class="o">=</span> <span class="s1">&#39;cheese&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="k">END</span> <span class="n">IF</span><span class="p">;</span>
</span><span class='line'><span class="k">END</span><span class="p">;</span> <span class="o">//</span>
</span><span class='line'><span class="k">delimiter</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another point to mention is &ndash; just use the CLI for handling these, don&rsquo;t try to use phpMyAdmin etc &ndash; it doesn&rsquo;t really work.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-01-12T08:42:48+00:00" pubdate data-updated="true">Jan 12<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/ubuntu/world-clock-on-ubuntu-its-as-standard.html">World Clock on Ubuntu - Its as Standard</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>We are starting to get more and more international clients primarily from America and Australasia. It&rsquo;s great to be getting a more global market, though keeping track of client&rsquo;s local time is sometimes confusing.</p>

<p>Then the thought occurs: &ldquo;I&rsquo;m using Linux, there&rsquo;s bound to be an excellent app to help me deal with this&rdquo;.</p>

<p>Turns out there is and its included with Ubuntu as standard.</p>

<p>The desktop clock, normally displayed in the top right actually has functionality to allow you to add as many extra locations as you want, so with a single click you can check the current time in whatever locations you want.</p>

<p>To set these up, simply click the clock which then drops down a calendar view. At the bottom of that view there is a Locations option. Click that to display a map and also an [Edit] button.</p>

<p>Hit the [Edit] button and you can add whatever locations you wish. Once they are set up you can check the local time for any of your locations by simply clicking the clock in the top right again.</p>

<p>Awesome. Got to love Ubuntu and Linux :)</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2011-01-08T11:50:22+00:00" pubdate data-updated="true">Jan 8<span>th</span>, 2011</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/python/ubuntu-desktop-slideshow-recursive-folder.html">Ubuntu Desktop Slideshow Recursive Folder</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>If you use Ubuntu, you probably use F-Spot for managing your photos. It&rsquo;s a nice app and it organises all your photos into a directory tree based on date.</p>

<p>If you want to set up a desktop slideshow that shows images from this folder tree then you need to create a custom XML file that you can then set as the desktop background. Of course you need a system to create the slideshow.</p>

<p>This script does just that:</p>

<script type="text/javascript" src="http://snipt.net/embed/7cb620ed391c0a6e72548a0cc804fe3a"></script>


<p>Inspired by a few scripts I found on the web, though <a href="http://royvandewater.com/blog/2009/12/ubuntu-wallpaper-slideshow/">this is the one I based it on</a>, simply modified to make it recursively pull images rather than just images in the current directory and also shuffle the resulting list.</p>

<p>Place the script in the root of your ~/Photos directory, mark it as executable and then run it. It generates an XML file for you. You can now go to your desktop, right click and go to background then hit the [Add] button.</p>

<p>Now navigate to your ~/Photos directory and select the generated XML file. Job done.</p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/page/44/">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/page/42/">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/converting-and-manipulating-location-files-with-gpsbabel.html">Converting and Manipulating Location Files With GPSBabel</a>
    
    <a class="list-group-item " href="/ecommerce/fast-e-commerce-search-solution.html">Fast E-Commerce Search Solution</a>
    
    <a class="list-group-item " href="/linux/prevent-ctrl-plus-s-freezing-your-terminal.html">Prevent Ctrl+S Freezing Your Terminal</a>
    
    <a class="list-group-item " href="/load%20testing/using-apache-jmeter-for-load-testing.html">Using Apache JMeter for Load Testing</a>
    
    <a class="list-group-item " href="/security/ebay-security-breach.html">Ebay Security Breach</a>
    
  </div>
</section>




<section class="panel panel-default">
  <div class="panel-body">

    <!-- Place this tag where you want the widget to render. -->
	<div class="g-page" data-width="237" data-href="//plus.google.com/u/0/104488822194646220248" data-rel="publisher"></div>

	<!-- Place this tag after the last widget tag. -->
	<script type="text/javascript">
	  window.___gcfg = {lang: 'en-GB'};

	  (function() {
		var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
		po.src = 'https://apis.google.com/js/platform.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	  })();
	</script>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
