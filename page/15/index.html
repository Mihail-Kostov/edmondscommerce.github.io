<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/page/15">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-07T16:23:35+00:00" pubdate data-updated="true">Dec 7<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/phpmd-and-special-circumstances-for-surprising-issues.html">PHPMD and Special Circumstances for Surprising Issues</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>PHPMD is useful as it helps keep coding problems to a minimum. There are some esoteric circumstances where it will flag up issues that while they are issues there is no good way to avoid them.</p>

<p>Consider the following code block which is overriding a method from a parent class:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="k">class</span> <span class="nc">ExportSpecial</span> <span class="k">extends</span> <span class="nx">Export</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getOrderItemValues</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$order</span><span class="p">,</span> <span class="nv">$itemInc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>With this PHPMD will flag the three unused parameters as an issue.
This is correct because they are unused however it&rsquo;s also incorrect because in this instance the overriding method must accept these parameters to prevent a strict error.
This is one of the limited set of instances where suppressing the issues that PHPMD finds would be correct.
To do this you use the @SuppressWarnings option on the comments block above the method definition. There are many options that are suppressible within PHPMD, the list of errors to suppressible rules can be found here: <a href="http://phpmd.org/rules/index.html"><a href="http://phpmd.org/rules/index.html">http://phpmd.org/rules/index.html</a></a></p>

<p>So in the previous example the following change could be made to stop PHPMD flagging the erroneous issue.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="k">class</span> <span class="nc">ExportSpecial</span> <span class="k">extends</span> <span class="nx">Export</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * @SuppressWarnings(PHPMD.UnusedFormalParameter)</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getOrderItemValues</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$order</span><span class="p">,</span> <span class="nv">$itemInc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-07T14:19:33+00:00" pubdate data-updated="true">Dec 7<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/email/google-drops-google-apps-free-tier.html">Google Drops Google Apps Free Tier</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>In a move that will hurt a lot of small businesses and especially startups, Google have withdrawn their free Google Apps for Domains which has been slowly reducing in number of users from 50, to 10 to now 0 (almost).</p>

<p>They are keeping the existing accounts open so if you have Google Apps already, don&rsquo;t panic yet, your data is still there.</p>

<p>For one-man-band startups apparently there is the option of creating a single-user apps account still apparently, according to Greg D&#8217;Alesandre of Google.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-05T17:27:51+00:00" pubdate data-updated="true">Dec 5<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/solution-magento-catalog-url-rewrites-never-finishes-processing.html">Solution: Magento Catalog URL Rewrites Never Finishes (Processing)</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>In <a title="Magento" href="http://www.edmondscommerce.co.uk/platforms/Magento">Magento</a> 1.4.2 and possibly other versions, you can often find that the Catalog URL Rewrite process will sit at Processing forever.</p>

<p>One of the problems that can cause this is if you have products in multiple categories and the solution is not pretty, but it works.</p>

<p>Copy the file /app/code/core/Mage/Catalog/Model/Url.php to /app/code/local/Mage/Catalog/Model/Url.php (You never edit core files right?!) and around line 770 there is the following code block :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>        <span class="c1">// generate id_path</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">===</span> <span class="nv">$type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;category/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nv">$category</span> <span class="o">&amp;&amp;</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getLevel</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Changing this to the following seems to fix the problem :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>        <span class="c1">// generate id_path</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">===</span> <span class="nv">$type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;category/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nv">$category</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getPath</span><span class="p">()))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-04T14:35:36+00:00" pubdate data-updated="true">Dec 4<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/solution-cant-log-in-to-magento-no-error.html">Solution - Can&#8217;t Log in to Magento Admin - No Error</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you pull down a <a title="Magento" href="http://www.edmondscommerce.co.uk/platforms/Magento">Magento</a> site to a local machine, and change the database core_config table to point to the local machine, and it appears to work fine until you try to login to the site admin, there can be many issues.</p>

<p>One of the most common ones though is not having a period (dot) in the host name &ndash; e.g. localhost/admin or martyn-desktop/admin &ndash; if you don&rsquo;t have the period, the cookies don&rsquo;t work properly and you end up in a login loop.</p>

<p>To fix it, make sure your machine is accessible via a domain with a period &ndash; e.g. martyn-desktop.local &ndash; by either editing your hosts file (/etc/hosts) or check your router &ndash; it possibly already adds a domain name like .config and set your path in core_config to the same.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-04T12:21:44+00:00" pubdate data-updated="true">Dec 4<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-block-caching-cache-key-helper-method-generate-safe-unique-cache-keys.html">Magento Block Caching Cache Key Helper Method - Generate Safe Unique Cache Keys</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you do any work at all on Magento performance optimisation with a view to making pages load faster then you must have come across block caching. To understand block caching you need to first of all understand that a Magento page is actually made up of a lot of nested chunks called blocks.</p>

<p>Blocks can have their HTML generated dynamically every time though it is also possible to make Magento cache the block HTML output so that it loads a LOT faster, especially with heavy and slow blocks such as best sellers etc.</p>

<p>When setting up block caching, you need to specify a cache key. If your cache key is not unique enough then there is a risk that you will display the wrong cache for a particular scenario.</p>

<p>For this reason I created a block caching helper with this method that can generate a very unique cache key based on the current block usage.
/app/code/local/EdmondsCommerce/Helper/Data.php</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Generate a nice unique block cache key</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @param Mage_Core_Block_Abstract $block</span>
</span><span class='line'><span class="sd">     * @return string</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">ecCacheKey</span><span class="p">(</span><span class="nx">Mage_Core_Block_Abstract</span> <span class="nv">$block</span><span class="p">){</span>
</span><span class='line'>        <span class="nv">$class</span> <span class="o">=</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$block</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$template</span> <span class="o">=</span> <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getTemplateFile</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$md5</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nb">var_export</span><span class="p">(</span><span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">(),</span> <span class="k">true</span><span class="p">));</span>
</span><span class='line'>        <span class="nv">$params</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nb">implode</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getParams</span><span class="p">()),</span> <span class="s1">&#39;,&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$category</span><span class="o">=</span><span class="p">(</span><span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getCurrentCategory</span><span class="p">())</span><span class="o">?</span><span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getCurrentCategory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span><span class="o">:</span><span class="s1">&#39;no-category&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$store_id</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getStore</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>        <span class="k">return</span> <span class="s1">&#39;edmondscommerce-&#39;</span><span class="o">.</span> <span class="nv">$params</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span><span class="o">.</span> <span class="nv">$category</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nv">$store_id</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nv">$class</span><span class="o">.</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="nv">$template</span><span class="o">.</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="nv">$md5</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>You would use this in the following way:</p>

<p>In a block class, set up the following:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">_construct</span><span class="p">(){</span>
</span><span class='line'>        <span class="k">parent</span><span class="o">::</span><span class="na">_construct</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addData</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
</span><span class='line'>            <span class="s1">&#39;cache_lifetime&#39;</span> <span class="o">=&gt;</span> <span class="mi">999999999</span><span class="p">,</span>
</span><span class='line'>            <span class="s1">&#39;cache_tags&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="nx">Mage_Catalog_Model_Product</span><span class="o">::</span><span class="na">CACHE_TAG</span><span class="p">,</span> <span class="nx">Mage_Catalog_Model_Category</span><span class="o">::</span><span class="na">CACHE_TAG</span><span class="p">),</span>
</span><span class='line'>            <span class="s1">&#39;cache_key&#39;</span> <span class="o">=&gt;</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">helper</span><span class="p">(</span><span class="s1">&#39;blockcaching&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ecCacheKey</span><span class="p">(</span><span class="nv">$this</span><span class="p">)</span>
</span><span class='line'>        <span class="p">));</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-30T17:46:34+00:00" pubdate data-updated="true">Nov 30<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/warning-in-varienautoload-solution.html">Warning in Varien/Autoload + Solution</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I have recently been putting together a system that needed to interact with Magento.</p>

<p>A big issue that I came across was a warning similar to this</p>

<p><code>
Warning: include(): Failed opening &lsquo;Model/Base.php&rsquo; for inclusion (include_path=&lsquo;&hellip;&rsquo;) in /path/to/magento/lib/Varien/Autoload.php on line 93
</code></p>

<p>As I was running with an error handler that turned all errors into exceptions this prevented the code from running.</p>

<p>The issue was due to my code using a custom autoloader, and when the Varien auto-loader was called first it could not find the files which triggered a warning.</p>

<p>There are multiple ways of getting round this &ndash; see <a href="http://stackoverflow.com/questions/4085967/how-to-integrate-ezcomponents-with-magento" title="How To Integrate Ezcomponents With Magento">here</a> for an example &ndash; if you are using PHP 5.3+ there is a much simpler solution.</p>

<p>Since PHP 5.3 the spl_autoload_register has had a prepend option which places the autoloader at the top of the stack. This means that it will try your autoloader first, rather than the Varien one, avoiding the warning if the file can only be found using your autoloader. To do this just use the following command</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nb">spl_autoload_register</span><span class="p">(</span><span class="s1">&#39;my_autoloader&#39;</span><span class="p">,</span><span class="k">null</span><span class="p">,</span><span class="k">true</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-28T17:26:39+00:00" pubdate data-updated="true">Nov 28<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/prestashop/extending-a-modules-css-within-a-theme-in-prestashop.html">Extending a Modules CSS Within a Theme in PrestaShop</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>PrestaShop has a really nice structure for handling all the CSS that will appear in a site. It starts by splitting the CSS so that the CSS is split up per modules. There is a global CSS sheet but this should only be used for things that genuinely appear on all pages.</p>

<p>Extending the CSS of a module in PrestaShop is easy. All you need to do is create a CSS file that matches the naming convention of the module you are looking to extend.</p>

<p>For example if you wanted to change the CSS of the “Wishlist block” module (a.k.a. blockwishlist) in your theme, you would create the file themes/mytheme/css/modules/blockwishlist/blockwishlist.css. This file will then be included on every page that the CSS from the blockwishlist module appears on.</p>

<p>This system is good because it minimises the amount of CSS the browser has to load and also splits the concern of CSS into separate files making it much easier to manage. It also makes adding to a modules CSS with in a theme much easier.</p>

<p>One problem with this method of handling CSS is that by default a PrestaShop site may want the browser to download ten or more individual CSS files which is quite a overhead. Fortunately since PrestaShop 1.4 it has supported CCS merging (referred to as CCC in the admin) which causes the CSS for a page to be merged into a single file on the server to prevent the client having to download tens of CSS files.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-26T17:36:22+00:00" pubdate data-updated="true">Nov 26<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/oscommerce/oscommerce-php-5-2-upgrade-you-really-should-get-onto-php-5-3-asap.html">osCommerce PHP 5.2 Upgrade - You Really Should Get Onto PHP 5.3 ASAP</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Many of our clients use <a href="/platforms/oscommerce">osCommerce</a> for their online store. osCommerce was very popular a few years ago and to date still powers a really large number of stores. Due to a variety of technical reasons, many osCommerce stores are still hosting on PHP version 5.2.</p>

<p>The latest version of PHP is 5.4 and 5.5 is due out fairly soon. Most hosting companies will now regard PHP 5.3 to be the minimum version they will support. By switching to PHP 5.3 they get better performance and better security. Unfortunately if you are running an osCommerce store and your hosting company decides to upgrade PHP then you might find that your entire store stops working.</p>

<p>The first instinct here is to get your store back online as quickly as possible and that is entirely understandable. These days though we really think that osCommerce store owners should be running on PHP 5.3. It is entirely possible to do this and does not necessarily entail a large amount of work depending on which contributions you are running.</p>

<p>The last release for PHP 5.2 was <a href="http://www.php.net/archive/2010.php#id2010-12-16-1" target="_blank">version 5.2.16 released back in 2010</a>. In software terms that is really quite a long time ago and really underlines how much of an issue this is.</p>

<p>You can read about some of the performance gains of switching to PHP 5.3 or greater on <a href="http://php.net/manual/en/features.gc.performance-considerations.php" target="_blank">this page</a>.</p>

<p>If you would like some help getting your osCommerce store working on an up to date version of PHP then <b><a href="/contact-us">get in touch with Edmonds Commerce today</a></b>.</p>

<p>Of course another option is to think about moving away from osCommerce and onto a more up to date platform such as <a href="/platforms/oscommerce">osCommerce</a> or <a href="/platforms/opencart">OpenCart</a>. If you are thinking of ugprading then 5.3 compatability will be a bonus. If you are not thinking of upgrading platform any time soon though you really do need to schedule in an upgrade to PHP 5.3 at the earliest opportunity.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-26T16:16:58+00:00" pubdate data-updated="true">Nov 26<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/bash/tip-remove-spaces-from-filenames-one-liner.html">Tip: Remove Spaces From Filenames One-liner</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>There is often the case when you need to remove spaces from filenames &ndash; for instance when importing broken data feeds into <a title="Magento" href="http://www.edmondscommerce.co.uk/platforms/magento">Magento</a> or <a title="osCommerce" href="http://www.edmondscommerce.co.uk/platforms/osCommerce">osCommerce</a> systems.</p>

<p>The following strips spaces and replaces them with nothing :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>find directoryname -name <span class="s1">&#39;* *&#39;</span> -type f | <span class="k">while </span><span class="nb">read </span>f; <span class="k">do </span>mv &amp;quot;<span class="nv">$f</span>&amp;quot; &amp;quot;<span class="k">$(</span><span class="nb">echo</span> <span class="nv">$f</span> | sed s/&amp;quot; &amp;quot;/&amp;quot;&amp;quot;/g<span class="k">)</span>&amp;quot;;  done
</span></code></pre></td></tr></table></div></figure>


<p>or alternatively replace them with underscores :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>find directoryname -name <span class="s1">&#39;* *&#39;</span> -type f | <span class="k">while </span><span class="nb">read </span>f; <span class="k">do </span>mv &amp;quot;<span class="nv">$f</span>&amp;quot; &amp;quot;<span class="k">$(</span><span class="nb">echo</span> <span class="nv">$f</span> | sed s/&amp;quot; &amp;quot;/&amp;quot;_&amp;quot;/g<span class="k">)</span>&amp;quot;;  done
</span></code></pre></td></tr></table></div></figure>


<p>Or any other character/string combo you like, you can even be more clever moving them out into subdirectories with more sed magic but you get the idea.  The reason the read command is there is to get the spaces in found filenames which if you simply use a &ldquo;for&rdquo; loop, bash splits on the spaces.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-23T19:17:50+00:00" pubdate data-updated="true">Nov 23<span>rd</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/magento/how-to-add-a-row-number-to-a-magento-dataflow-import-errors.html">How to Add a Row Number to a Magento Dataflow Import Errors</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I find it frustrating when importing data into Magento that it&rsquo;ll successfully complain about a row with errors, but won&rsquo;t tell you which row has the problem!</p>

<p>The code which generates the HTML for the error messages is at app/code/core/Mage/Adminhtml/Block/System/Convert/Profile/Run.php. Make a copy of this file at app/code/local/Mage/Adminhtml/Block/System/Convert/Profile/Run.php</p>

<p>Locate this part:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setBatchConfig</span><span class="p">(</span>
</span><span class='line'>                        <span class="o">...</span>
</span><span class='line'>                        <span class="s1">&#39;template&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;li style=&quot;#{style}&quot; id=&quot;#{id}&quot;&gt;&#39;</span>
</span><span class='line'>                                    <span class="o">.</span> <span class="s1">&#39;&lt;img id=&quot;#{id}_img&quot; src=&quot;#{image}&quot; class=&quot;v-middle&quot; style=&quot;margin-right:5px&quot;/&gt;&#39;</span>
</span><span class='line'>                                    <span class="o">.</span> <span class="s1">&#39;&lt;span id=&quot;#{id}_status&quot; class=&quot;text&quot;&gt;#{text}&lt;/span&gt;&#39;</span>
</span><span class='line'>                                    <span class="o">.</span> <span class="s1">&#39;&lt;/li&gt;&#39;</span><span class="p">,</span>
</span><span class='line'>                         <span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>And change:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="s1">&#39;&lt;span id=&quot;#{id}_status&quot; class=&quot;text&quot;&gt;#{text}&lt;/span&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>to:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="s1">&#39;&lt;span id=&quot;#{id}_status&quot; class=&quot;text&quot;&gt;Row #{id} - #{text}&lt;/span&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/page/16/">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/page/14/">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/php/getting-sub-domains-and-domain-from-a-url.html">Getting Sub Domains and Domain From a Url</a>
    
    <a class="list-group-item " href="/security/ssl-testing-and-sha-1-sunsetting.html">SSL Testing and SHA-1 Sunsetting</a>
    
    <a class="list-group-item " href="/atop-quick-start-an-introduction-to-atop-snapshotting.html">Atop Quick Start: An Introduction to Atop Snapshotting</a>
    
    <a class="list-group-item " href="/linux/compile-nginx-with-pagespeed-and-modsecurity-on-centos.html">Compile NGINX With PageSpeed and ModSecurity on CentOS</a>
    
    <a class="list-group-item " href="/linux/se-linux-and-connecting-to-a-mysql-database.html">SELinux and Connecting to Mysql Databases on Red Hat Based Distributions</a>
    
  </div>
</section>




<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h3>
      <a href="https://plus.google.com/104488822194646220248?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h3>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
