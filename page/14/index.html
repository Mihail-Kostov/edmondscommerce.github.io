<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/page/14">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-13T17:00:20+00:00" pubdate data-updated="true">Dec 13<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/phpstorm/phpstorm-get-more-info-on-auto-complete-like-netbeans.html">PHPStorm: Get More Info on Auto-Complete (Like Netbeans)</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>All developers love code completion, but sometimes the minimalist info that can come up in PHPStorm can be not quite enough.</p>

<p>Netbeans gave an excerpt that gave plenty of information from the docblock, and PHPStorm can do too, it just defaults to off.</p>

<p>The setting is under Editor->Code Completion and is &ldquo;Show full signatures&rdquo;.  The good news is it is an &ldquo;IDE Setting&rdquo; so it persists for all projects, the bad news is that that means the setting will be forgotten about before you next reinstall and want it again.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-12T15:18:55+00:00" pubdate data-updated="true">Dec 12<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-certified-developer-uk.html">Magento Certified Developer UK</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p><img src="/assets/Magento-Certified-Developer.png"> I&rsquo;m really happy to announce that two of our team have now taken and passed the Magento Certified Developer exam. This means that they are now officially &ldquo;Magento Certified Developers&rdquo;.</p>

<p>What that means for you is that you can be assured that we have the in house skills and experience to work the right way with Magento and really help you get the most out of the platform.</p>

<p>The reason we finally put them forward for the exam is that, after working with the platform for a few years now, we have decided to go down the official Magento partner route and get all the qualification and assurance that you could ask for by becoming an Silver Magento Partner and employing developers who are not only <a href="http://www.zend.com/services/certification/php-5-certification/" title="Zend Certified Developer information" target="_blank">Zend Certified Engineer</a>s &ndash; a PHP qualification &ndash; but also Magento Certified Developers.</p>

<p>The exam asks questions on a wide range of Magento topics ranging from the basics through to layout, rendering and then more complex subjects such as the checkout, sales, API and more. You can download the official <a href="http://www.magentocommerce.com/certification/" title="Magento certification information" target="_blank">Magento Certified Developer study guide</a> to see the full details of the areas that are discussed though suffice to say it is really quite in depth and broad. You definitely need to know Magento well to pass the exam.</p>

<p>For those that care the passing mark for the exam is 37 out of 70 questions. Our devs passed with 54/70 and 52/70 so really nailed it!</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-12T10:44:52+00:00" pubdate data-updated="true">Dec 12<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/linux/linux-mint-14-ubuntu-12-10-slow-wifi-with-ath9k-drivers-solution.html">Linux Mint 14 / Ubuntu 12.10 Slow Wifi With Ath9k Drivers + Solution</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I upgrade my laptop to the latest release of Linux Mint 14 MATE edition. Everything is working beautifully apart from the wireless which, whilst functional, was cripplingly slow.</p>

<p>After a load of searching and testing, the solution that worked for me was:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo -s
</span><span class='line'>
</span><span class='line'>iwconfig wlan0 rate 54M
</span><span class='line'>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;options ath9k nohwcrypt=1&quot;</span> &gt; /etc/modprobe.d/ath9k.conf
</span><span class='line'>
</span><span class='line'>reboot
</span></code></pre></td></tr></table></div></figure>


<p>If you copy and paste the above into a terminal it will force the wifi speed to 54M and will make sure hardware crypt is disabled and finally reboot your machine.</p>

<p>I did this and my wifi speed is now perfectly fast, I&rsquo;m a happy bunny :)</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-10T15:18:27+00:00" pubdate data-updated="true">Dec 10<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/establishing-a-new-database-connection-in-magento.html">Establishing a New Database Connection in Magento</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>Connecting to a new database in <a href="/platforms/magento">Magento</a> is not the most straight forward of tasks yet it is better structured in other systems that give you no other options. In some systems (such as osCommerce) you would have no choice but to manually create a new PDO object and give it the necessary details.</p>

<p>In Magneto all database connections are defined in the configuration. The connection that you will always have available is &lsquo;default_setup&rsquo; which, by convention, is always defined in app/etc/local.xml.</p>

<p>If you will always want the second database connection available you should consider adding it to app/etc/local.xml. You can also define them in module specific configuration if you desire.</p>

<p>Knowing that the database configuration is nothing more that configuration establishing a new database connection on the fly in code is relatively straight forward. Here is some example code to do this:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="nv">$config</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getConfig</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$originalPrefix</span> <span class="o">=</span> <span class="s1">&#39;global/resources/default_setup&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$newPrefix</span> <span class="o">=</span> <span class="s1">&#39;global/resources/orders_db&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$nodesToCopy</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>    <span class="s1">&#39;/connection/host&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;/connection/username&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;/connection/password&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;/connection/initStatements&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;/connection/model&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;/connection/type&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;/connection/pdoType&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;/connection/active&#39;</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">foreach</span><span class="p">(</span><span class="nv">$nodesToCopy</span> <span class="k">as</span> <span class="nv">$nodeToCopy</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$nodeVal</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">getNode</span><span class="p">(</span><span class="nv">$originalPrefix</span> <span class="o">.</span> <span class="nv">$nodeToCopy</span><span class="p">);</span>
</span><span class='line'>    <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setNode</span><span class="p">(</span><span class="nv">$newPrefix</span><span class="o">.</span><span class="nv">$nodeToCopy</span><span class="p">,</span> <span class="nv">$nodeVal</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setNode</span><span class="p">(</span><span class="s1">&#39;global/resources/orders_db/connection/dbname&#39;</span><span class="p">,</span> <span class="s1">&#39;import_orders&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ordersDb</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">&#39;core/resource&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getConnection</span><span class="p">(</span><span class="s1">&#39;orders_db&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>In this example the &lsquo;default_setup&rsquo; connection details are copied to a new connection called &lsquo;orders_db&rsquo;, then the database for this new connection is changed to &lsquo;import_orders&rsquo;. Having defined the configuration for the database simply get the connection object and Magento will establish the connection for you.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-07T16:23:35+00:00" pubdate data-updated="true">Dec 7<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/phpmd-and-special-circumstances-for-surprising-issues.html">PHPMD and Special Circumstances for Surprising Issues</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>PHPMD is useful as it helps keep coding problems to a minimum. There are some esoteric circumstances where it will flag up issues that while they are issues there is no good way to avoid them.</p>

<p>Consider the following code block which is overriding a method from a parent class:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="k">class</span> <span class="nc">ExportSpecial</span> <span class="k">extends</span> <span class="nx">Export</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getOrderItemValues</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$order</span><span class="p">,</span> <span class="nv">$itemInc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>With this PHPMD will flag the three unused parameters as an issue.
This is correct because they are unused however it&rsquo;s also incorrect because in this instance the overriding method must accept these parameters to prevent a strict error.
This is one of the limited set of instances where suppressing the issues that PHPMD finds would be correct.
To do this you use the @SuppressWarnings option on the comments block above the method definition. There are many options that are suppressible within PHPMD, the list of errors to suppressible rules can be found here: <a href="http://phpmd.org/rules/index.html"><a href="http://phpmd.org/rules/index.html">http://phpmd.org/rules/index.html</a></a></p>

<p>So in the previous example the following change could be made to stop PHPMD flagging the erroneous issue.</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="k">class</span> <span class="nc">ExportSpecial</span> <span class="k">extends</span> <span class="nx">Export</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * @SuppressWarnings(PHPMD.UnusedFormalParameter)</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getOrderItemValues</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$order</span><span class="p">,</span> <span class="nv">$itemInc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-07T14:19:33+00:00" pubdate data-updated="true">Dec 7<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/email/google-drops-google-apps-free-tier.html">Google Drops Google Apps Free Tier</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>In a move that will hurt a lot of small businesses and especially startups, Google have withdrawn their free Google Apps for Domains which has been slowly reducing in number of users from 50, to 10 to now 0 (almost).</p>

<p>They are keeping the existing accounts open so if you have Google Apps already, don&rsquo;t panic yet, your data is still there.</p>

<p>For one-man-band startups apparently there is the option of creating a single-user apps account still apparently, according to Greg D&#8217;Alesandre of Google.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-05T17:27:51+00:00" pubdate data-updated="true">Dec 5<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/solution-magento-catalog-url-rewrites-never-finishes-processing.html">Solution: Magento Catalog URL Rewrites Never Finishes (Processing)</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>In <a title="Magento" href="http://www.edmondscommerce.co.uk/platforms/Magento">Magento</a> 1.4.2 and possibly other versions, you can often find that the Catalog URL Rewrite process will sit at Processing forever.</p>

<p>One of the problems that can cause this is if you have products in multiple categories and the solution is not pretty, but it works.</p>

<p>Copy the file /app/code/core/Mage/Catalog/Model/Url.php to /app/code/local/Mage/Catalog/Model/Url.php (You never edit core files right?!) and around line 770 there is the following code block :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>        <span class="c1">// generate id_path</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">===</span> <span class="nv">$type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;category/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nv">$category</span> <span class="o">&amp;&amp;</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getLevel</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Changing this to the following seems to fix the problem :&ndash;</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>        <span class="c1">// generate id_path</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">===</span> <span class="nv">$type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;category/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nv">$category</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getPath</span><span class="p">()))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">return</span> <span class="s1">&#39;product/&#39;</span> <span class="o">.</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-04T14:35:36+00:00" pubdate data-updated="true">Dec 4<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/solution-cant-log-in-to-magento-no-error.html">Solution - Can&#8217;t Log in to Magento Admin - No Error</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you pull down a <a title="Magento" href="http://www.edmondscommerce.co.uk/platforms/Magento">Magento</a> site to a local machine, and change the database core_config table to point to the local machine, and it appears to work fine until you try to login to the site admin, there can be many issues.</p>

<p>One of the most common ones though is not having a period (dot) in the host name &ndash; e.g. localhost/admin or martyn-desktop/admin &ndash; if you don&rsquo;t have the period, the cookies don&rsquo;t work properly and you end up in a login loop.</p>

<p>To fix it, make sure your machine is accessible via a domain with a period &ndash; e.g. martyn-desktop.local &ndash; by either editing your hosts file (/etc/hosts) or check your router &ndash; it possibly already adds a domain name like .config and set your path in core_config to the same.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-12-04T12:21:44+00:00" pubdate data-updated="true">Dec 4<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/magento-block-caching-cache-key-helper-method-generate-safe-unique-cache-keys.html">Magento Block Caching Cache Key Helper Method - Generate Safe Unique Cache Keys</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>If you do any work at all on Magento performance optimisation with a view to making pages load faster then you must have come across block caching. To understand block caching you need to first of all understand that a Magento page is actually made up of a lot of nested chunks called blocks.</p>

<p>Blocks can have their HTML generated dynamically every time though it is also possible to make Magento cache the block HTML output so that it loads a LOT faster, especially with heavy and slow blocks such as best sellers etc.</p>

<p>When setting up block caching, you need to specify a cache key. If your cache key is not unique enough then there is a risk that you will display the wrong cache for a particular scenario.</p>

<p>For this reason I created a block caching helper with this method that can generate a very unique cache key based on the current block usage.
/app/code/local/EdmondsCommerce/Helper/Data.php</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Generate a nice unique block cache key</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @param Mage_Core_Block_Abstract $block</span>
</span><span class='line'><span class="sd">     * @return string</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">ecCacheKey</span><span class="p">(</span><span class="nx">Mage_Core_Block_Abstract</span> <span class="nv">$block</span><span class="p">){</span>
</span><span class='line'>        <span class="nv">$class</span> <span class="o">=</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$block</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$template</span> <span class="o">=</span> <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getTemplateFile</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$md5</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nb">var_export</span><span class="p">(</span><span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">(),</span> <span class="k">true</span><span class="p">));</span>
</span><span class='line'>        <span class="nv">$params</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nb">implode</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getParams</span><span class="p">()),</span> <span class="s1">&#39;,&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$category</span><span class="o">=</span><span class="p">(</span><span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getCurrentCategory</span><span class="p">())</span><span class="o">?</span><span class="nv">$block</span><span class="o">-&gt;</span><span class="na">getCurrentCategory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span><span class="o">:</span><span class="s1">&#39;no-category&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$store_id</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getStore</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
</span><span class='line'>        <span class="k">return</span> <span class="s1">&#39;edmondscommerce-&#39;</span><span class="o">.</span> <span class="nv">$params</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span><span class="o">.</span> <span class="nv">$category</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nv">$store_id</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nv">$class</span><span class="o">.</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="nv">$template</span><span class="o">.</span><span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="nv">$md5</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>You would use this in the following way:</p>

<p>In a block class, set up the following:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">_construct</span><span class="p">(){</span>
</span><span class='line'>        <span class="k">parent</span><span class="o">::</span><span class="na">_construct</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addData</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
</span><span class='line'>            <span class="s1">&#39;cache_lifetime&#39;</span> <span class="o">=&gt;</span> <span class="mi">999999999</span><span class="p">,</span>
</span><span class='line'>            <span class="s1">&#39;cache_tags&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="nx">Mage_Catalog_Model_Product</span><span class="o">::</span><span class="na">CACHE_TAG</span><span class="p">,</span> <span class="nx">Mage_Catalog_Model_Category</span><span class="o">::</span><span class="na">CACHE_TAG</span><span class="p">),</span>
</span><span class='line'>            <span class="s1">&#39;cache_key&#39;</span> <span class="o">=&gt;</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">helper</span><span class="p">(</span><span class="s1">&#39;blockcaching&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">ecCacheKey</span><span class="p">(</span><span class="nv">$this</span><span class="p">)</span>
</span><span class='line'>        <span class="p">));</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2012-11-30T17:46:34+00:00" pubdate data-updated="true">Nov 30<span>th</span>, 2012</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/magento/warning-in-varienautoload-solution.html">Warning in Varien/Autoload + Solution</a></h1>
    
  </header>


  <div class="entry-content clearfix"><p>I have recently been putting together a system that needed to interact with Magento.</p>

<p>A big issue that I came across was a warning similar to this</p>

<p><code>
Warning: include(): Failed opening &lsquo;Model/Base.php&rsquo; for inclusion (include_path=&lsquo;&hellip;&rsquo;) in /path/to/magento/lib/Varien/Autoload.php on line 93
</code></p>

<p>As I was running with an error handler that turned all errors into exceptions this prevented the code from running.</p>

<p>The issue was due to my code using a custom autoloader, and when the Varien auto-loader was called first it could not find the files which triggered a warning.</p>

<p>There are multiple ways of getting round this &ndash; see <a href="http://stackoverflow.com/questions/4085967/how-to-integrate-ezcomponents-with-magento" title="How To Integrate Ezcomponents With Magento">here</a> for an example &ndash; if you are using PHP 5.3+ there is a much simpler solution.</p>

<p>Since PHP 5.3 the spl_autoload_register has had a prepend option which places the autoloader at the top of the stack. This means that it will try your autoloader first, rather than the Varien one, avoiding the warning if the file can only be found using your autoloader. To do this just use the following command</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nb">spl_autoload_register</span><span class="p">(</span><span class="s1">&#39;my_autoloader&#39;</span><span class="p">,</span><span class="k">null</span><span class="p">,</span><span class="k">true</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/page/15/">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/page/13/">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/testing/test-post-from-michael.html">Test Post From Michael</a>
    
    <a class="list-group-item " href="/testing/this-is-a-test-post.html">This Is a Test Post</a>
    
    <a class="list-group-item " href="/magento/intermittent-paypal-ipn-failure-in-magento.html">Intermittent PayPal IPN Failure in Magento</a>
    
    <a class="list-group-item " href="/linux/selinux-configuration-for-alternative-document-root.html">SELinux Configuration for Alternative Document Root</a>
    
    <a class="list-group-item " href="/linux/nice-gnome-shell-theme-elegance-colours.html">Nice Gnome Shell Theme - Elegance Colours</a>
    
  </div>
</section>




<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h3>
      <a href="https://plus.google.com/104488822194646220248?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h3>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
