<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Netbeans AutoComplete on Magento Objects called by Mage::getModel() &middot; </title>

  
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/poole.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/highlight/github.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link href="http://edmondscommerce.github.io/favicon.ico" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'google analytics', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <a href="/"><img src="/images/eclogo.png"
             alt="gravatar" title="">
        </a>
      
      <h1></h1>
      
    </div>
    <p>
      <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
      agency. We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
    </p>

    <p>
      Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
      such as <a href="http://www.opencart.com/">OpenCart</a>.
    </p>

    <p>
      In terms of technology we are very strong in <a href="http://php.net/">PHP</a>, <a href="http://www.mysql.com/">MySQL</a>, <a href="http://www.linuxfoundation.org/">Linux</a>,
      <a href="http://www.w3.org/standards/techs/html#w3c_all">HTML</a><a>, <a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a> and <a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
  </ul>


    <ul class="sidebar-nav">
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/edmondscommerce"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/company/edmonds-commerce"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="https://plus.google.com/104488822194646220248?rel=author"><i class="fa fa-google-plus-square fa-3x"></i></a>
      
      <a href="https://twitter.com/edmondscommerce"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="http://edmondscommerce.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
      <p>
        <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br>
        <a href="tel:00441138805654">0044 113 880 5654</a>
      </p>
    </ul>

    

  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Netbeans AutoComplete on Magento Objects called by Mage::getModel()</h1>
    <span class="post-date">Mar 1, 2012 &middot; 2 minute read
    
    <br/>
    <a class="label" href="http://edmondscommerce.github.io/categories/magento">magento</a>
    </span>
    <p>As we have been working with the various versions of Magento its nice to see more and more use of DocBlock notation to help IDEs auto suggest and auto complete methods etc when working with objects.</p>

<p>However the style is inconsistent and with a few subtle tweaks would be much, much better.</p>

<h3>Template Files, What is $this?</h3>

<p>First one is the @see syntax often used in .phtml files to describe which block object is in play as $this. Whilst that is useful to read, it is totally useless to the IDE.</p>

<p>For example have a look at
<b><a href="https://github.com/LokeyCoding/magento-mirror/blob/magento-1.6/app/design/frontend/base/default/template/catalog/product/view.phtml">app/design/frontend/base/default/template/catalog/product/view.phtml</a></b></p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="x">/**</span>
<span class="x"> * Product view template</span>
<span class="x"> *</span>
<span class="x"> * @see Mage_Catalog_Block_Product_View</span>
<span class="x"> * @see Mage_Review_Block_Product_View</span>
<span class="x"> */</span>
</code></pre></div>

<p>All we need to do is add this underneath</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="x">/*</span>
<span class="x"> * @var $this Mage_Catalog_Block_Product_View</span>
<span class="x"> */</span>
</code></pre></div>

<p>And now when working with in the .phtml file, $this will auto complete for you.</p>

<blockquote><i>Eagle eyed readers may think that as $this could be either this is perhaps a bad idea, however the Review one actually extends the Catalog one overriding some functionality, it is basically the same.</i></blockquote>

<h3>$Model = Mage::getModel() why always the Abstract?</h3>

<p>Another one that I have just finally figured out is the correct way to get Netbeans to recognise exactly what class an object is when called with Mage::getModel() or Mage::getSingleton().</p>

<p>You might have auto complete suggesting that this is an instance of Mage_Core_Model_Abstract.</p>

<p>Whilst effectively true, this is unlikely to be useful for you in your context, you need to know exactly what Model class it is.</p>

<p>The reason that Netbeans thinks its Mage_Core_Model_Abstract is because the docblock in
<b><a href="https://github.com/LokeyCoding/magento-mirror/blob/magento-1.6/app/Mage.php">app/Mage.php</a></b>
describes this as the return value of this method.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="x">    /**</span>
<span class="x">     * Retrieve model object</span>
<span class="x">     *</span>
<span class="x">     * @link    Mage_Core_Model_Config::getModelInstance</span>
<span class="x">     * @param   string $modelClass</span>
<span class="x">     * @param   array $arguments</span>
<span class="x">     * @return  Mage_Core_Model_Abstract</span>
<span class="x">     */</span>
<span class="x">    public static function getModel($modelClass = &#39;&#39;, $arguments = array())</span>
<span class="x">    {</span>
<span class="x">        return self::getConfig()-&gt;getModelInstance($modelClass, $arguments);</span>
<span class="x">    }</span>
</code></pre></div>

<p>I often see blocks of code where the author is attempting to get auto complete working properly by using this syntax</p>

<p>see
<b><a href="https://github.com/LokeyCoding/magento-mirror/blob/magento-1.6/app/code/core/Mage/Customer/controllers/AccountController.php">app/code/core/Mage/Customer/controllers/AccountController.php</a></b>
createPostAction()</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="x">/* @var $customerForm Mage_Customer_Model_Form */</span>
<span class="x">$customerForm = Mage::getModel(&#39;customer/form&#39;);</span>
</code></pre></div>

<p>This is generally the right way to do it, however I think the docblock specifying the return value on Mage:getModel clobbers it.</p>

<p>The simple solution is to move the docblock from above the Mage::getModel call to below it.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="x">$customerForm = Mage::getModel(&#39;customer/form&#39;);</span>
<span class="x">/* @var $customerForm Mage_Customer_Model_Form */</span>
</code></pre></div>

<p><b>And it works!</b></p>

<p><img src="/images/screenshot4-600x475.png" alt="Image" /></p>

  </div>
  
</div>




<script src="http://edmondscommerce.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

