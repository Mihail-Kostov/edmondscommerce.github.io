<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Magento Transactional Email Codes - Custom Emails &middot; </title>

  
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/poole.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/highlight/github.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link href="http://edmondscommerce.github.io/favicon.ico" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'google analytics', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <a href="/"><img src="/images/eclogo.png"
             alt="gravatar" title="">
        </a>
      
      <h1></h1>
      
    </div>
    <p>
      <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
      agency. We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
    </p>

    <p>
      Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
      such as <a href="http://www.opencart.com/">OpenCart</a>.
    </p>

    <p>
      In terms of technology we are very strong in <a href="http://php.net/">PHP</a>, <a href="http://www.mysql.com/">MySQL</a>, <a href="http://www.linuxfoundation.org/">Linux</a>,
      <a href="http://www.w3.org/standards/techs/html#w3c_all">HTML</a><a>, <a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a> and <a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
  </ul>


    <ul class="sidebar-nav">
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/edmondscommerce"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/company/edmonds-commerce"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="https://plus.google.com/104488822194646220248?rel=author"><i class="fa fa-google-plus-square fa-3x"></i></a>
      
      <a href="https://twitter.com/edmondscommerce"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="http://edmondscommerce.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
      <p>
        <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br>
        <a href="tel:00441138805654">0044 113 880 5654</a>
      </p>
    </ul>

    

  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Magento Transactional Email Codes - Custom Emails</h1>
    <span class="post-date">Feb 10, 2011 &middot; 2 minute read
    
    <br/>
    <a class="label" href="http://edmondscommerce.github.io/categories/magento">magento</a>
    </span>
    <p>If you need to send some custom emails as part of a custom Magento module development project, you will stumble into the Magento email template system and its confusing mixture of XML requirements.</p>

<p>Rather than go into too much detail here are some pointers about how to achieve what you want to do.</p>

<ol>
<li>You need to set up your admin options in your system.xml file.</li>
</ol>

<p>I&rsquo;m not going to go into the details on how to set up custom admin configuration, for that try <a href="http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/xml_structure_for_admin_configurations">here</a>.</p>

<p>Lets assume you have a custom module under the xml path:</p>

<p>config/sections/custom_module/groups/email/template</p>

<p>that section should look something like this:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;template</span> <span class="na">translate=</span><span class="s">&quot;label&quot;</span><span class="nt">&gt;</span>
	<span class="nt">&lt;label&gt;</span>Custom Email Template<span class="nt">&lt;/label&gt;</span>
	<span class="nt">&lt;frontend_type&gt;</span>select<span class="nt">&lt;/frontend_type&gt;</span>
	<span class="nt">&lt;source_model&gt;</span>adminhtml/system_config_source_email_template<span class="nt">&lt;/source_model&gt;</span>
	<span class="nt">&lt;sort_order&gt;</span>2<span class="nt">&lt;/sort_order&gt;</span>
	<span class="nt">&lt;show_in_default&gt;</span>1<span class="nt">&lt;/show_in_default&gt;</span>
	<span class="nt">&lt;show_in_website&gt;</span>1<span class="nt">&lt;/show_in_website&gt;</span>
	<span class="nt">&lt;show_in_store&gt;</span>1<span class="nt">&lt;/show_in_store&gt;</span>
<span class="nt">&lt;/template&gt;</span>
</code></pre></div>

<p>You need to set your default value in your config.xml file (inside the root config tag)</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span> <span class="c">&lt;!-- DEFAULTS For Admin System Configuration //--&gt;</span>
    <span class="nt">&lt;default&gt;</span>
        <span class="nt">&lt;custom_module&gt;</span>
            <span class="nt">&lt;email&gt;</span>
                <span class="nt">&lt;enabled&gt;</span>1<span class="nt">&lt;/enabled&gt;</span>
                <span class="nt">&lt;template&gt;</span>custom_module_email_template<span class="nt">&lt;/template&gt;</span>                
                <span class="nt">&lt;identity&gt;</span>sales<span class="nt">&lt;/identity&gt;</span>
            <span class="nt">&lt;/email&gt;</span>
        <span class="nt">&lt;/custom_module&gt;</span>
    <span class="nt">&lt;/default&gt;</span>
</code></pre></div>

<p>Now you also need to define your email template, which goes inside the config/global/ node</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>       <span class="c">&lt;!-- EMAIL TEMPLATE //--&gt;</span>
        <span class="nt">&lt;template&gt;</span>
            <span class="nt">&lt;email&gt;</span>
                <span class="nt">&lt;custom_module_email_template</span> <span class="na">translate=</span><span class="s">&quot;label&quot;</span> <span class="na">module=</span><span class="s">&quot;appliedsb&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;label&gt;</span>Custom Template<span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;file&gt;</span>appliedsb/download_links.html<span class="nt">&lt;/file&gt;</span>
                    <span class="nt">&lt;type&gt;</span>html<span class="nt">&lt;/type&gt;</span>
                <span class="nt">&lt;/custom_moduel_email_template&gt;</span>
            <span class="nt">&lt;/email&gt;</span>
        <span class="nt">&lt;/template&gt;</span>
</code></pre></div>

<p>And then you need to make sure you put the email template inside the locale folder, en_us (or other locales as needed).</p>

<p>Now you need to clear cache and I recommend resaving the custom configuration group in the admin and double check that your Custom Template label is appearing properly in the email templates dropdown for your module.</p>

<p>And that should be it, your module now has a custom email template that has a locale file and is also over rideable with Magento&rsquo;s own transactional emails system - sweet!</p>

<p>If you get the exception <strong>Invalid transactional email code:</strong> then double check that all your xml nodes match up and that the locale file is in the correct place, clear your cache, resave the admin config and try again. This bug can be tricky to track down but if you respect the above xml and file layout it should all work.</p>

  </div>
  
</div>




<script src="http://edmondscommerce.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

