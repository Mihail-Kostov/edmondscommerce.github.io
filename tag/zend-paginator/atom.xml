<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: zend_paginator | Edmonds Commerce Dev Blog]]></title>
  <link href="http://edmondscommerce.github.io/tag/zend-paginator/atom.xml" rel="self"/>
  <link href="http://edmondscommerce.github.io/"/>
  <updated>2014-04-01T09:39:59+01:00</updated>
  <id>http://edmondscommerce.github.io/</id>
  <author>
    <name><![CDATA[EdmondsCommerce Development Team]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Zend Paginator - Actually Pretty Painless :)]]></title>
    <link href="http://edmondscommerce.github.io/zend%20framework/zend-paginator-actually-pretty-painless.html"/>
    <updated>2010-01-27T17:26:08+00:00</updated>
    <id>http://edmondscommerce.github.io/zend%20framework/zend-paginator-actually-pretty-painless</id>
    <content type="html"><![CDATA[<div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>With some trepidation I decided that I really had to implement pagination into a Zend Framework project I am working on. Zend Framework is great, but some of the sections can be a little tricky to get your head around at first attempt.</p>

<p>However, less than an hour after first looking at it, I have now got my system spitting out results in a nicely paginated ten at a time. The documentation on the Zend Framework reference is a little sparse but suffice to say that if you are using Zend_Db then actually its pretty easy.</p>

<p>The only bit that is a little tricky is getting the actual page controls to display, as you are left to code your own (though they do supply some code).</p>

<p>One major irritation with the Zend Framework reference guide is that I seem to be unable to copy and paste the code examples, it ends up looking like this:</p>

<p>```php</p>

<pre><code>  &lt;!--
</code></pre>

<ol>
<li>.
  See <a href="http://developer.yahoo.com/ypatterns/pattern.php?pattern=searchpagination">http://developer.yahoo.com/ypatterns/pattern.php?pattern=searchpagination</a></li>
<li>.
  &mdash;></li>
<li><p>.</p></li>
<li><p>.
  &lt;?php if ($this->pageCount): ?></p></li>
<li>.
  <div class="paginationControl"></li>
<li>.
  <!-- Previous page link --></li>
<li>.
  &lt;?php if (isset($this->previous)): ?></li>
<li>.
    <a href="<?php echo $this->url(array(&lsquo;page&rsquo; => $this->previous)); ?>&ldquo;></li>
<li>.
      &lt; Previous</li>
<li>.
    </a> |</li>
<li>.</li>
</ol>


<p>```</p>

<p>note the line numbers, great.</p>

<p><a href="http://teethgrinder.co.uk/perm.php?a=Zend-Framework-MySQL-DB-Pagination-Tutorial">this tutorial was really useful though:</a></p>

<p>Here is some code snippets:</p>

<h3>Controller</h3>


<p>```php</p>

<pre><code>public function viewAction(){        
    $this-&gt;view-&gt;input = $input = $this-&gt;_request-&gt;getPost('search');
    $paginator = $this-&gt;_model-&gt;tableSearchAllPaginator($input);
    $paginator-&gt;setCurrentPageNumber($this-&gt;_getParam('page'));
    $this-&gt;view-&gt;paginator = $paginator;
}
</code></pre>

<p>```</p>

<h3>Model</h3>


<p>```php</p>

<pre><code>public function tableSearchAllPaginator($input, $fields_to_select=null){
    $table = $this-&gt;getTable();
    $select = $table-&gt;select();
    $fields = $table-&gt;info(Zend_Db_Table_Abstract::COLS);
    if(!empty($input)) {
        foreach($fields as $field) {
            $select-&gt;orWhere("$field like ?", "%$input%");
        }
    }
    if(!empty($fields_to_select)) {
        $select-&gt;columns($fields_to_select);
    }
    $paginator = new Zend_Paginator(new Zend_Paginator_Adapter_DbTableSelect($select));
    return $paginator;
}
</code></pre>

<p>```</p>

<h3>View Script</h3>


<p>```php</p>

<p>echo $this->partial(&lsquo;_viewtable_page.phtml&rsquo;, array(&lsquo;paginator&rsquo;=>$this->paginator, &lsquo;controller&rsquo;=>&lsquo;products&rsquo;));</p>

<p>```</p>

<h3>View Table Page Partial</h3>


<p>```php</p>

<p>if (count($this->paginator)) {</p>

<pre><code>echo '&lt;h4&gt;Found ' . count($this-&gt;paginator) . ' Results&lt;/h4&gt;';
echo '&lt;table class="grid"&gt;';
foreach($this-&gt;paginator as $k=&gt;$row) {
    //EC_Debug::dump($k);
    $row = $row-&gt;toArray();
    //EC_Debug::diedump($row);
    if($k == 0) {
        echo '&lt;tr&gt;';
        foreach($row as $f=&gt;$v) {
            echo "&lt;th&gt;$f&lt;/th&gt;";
        }
        echo '&lt;/tr&gt;';
    }
    echo '&lt;tr&gt;';
    foreach($row as $f=&gt;$v) {
        $extra = '';
        if($f=='id') {
            $extra = '&lt;a href="' . $this-&gt;url(array('controller'=&gt;$this-&gt;controller, 'action'=&gt;'edit', 'id'=&gt;$v), null, true) . '"&gt;&lt;img src="' . $this-&gt;baseUrl() . '/style/icons/application_edit.png" border="0" alt="edit"&gt;&lt;/a&gt;';
            $extra .= ' &lt;a href="' . $this-&gt;url(array('controller'=&gt;$this-&gt;controller, 'action'=&gt;'delete', 'id'=&gt;$v), null, true) . '"&gt;&lt;img src="' . $this-&gt;baseUrl() . '/style/icons/cancel.png" border="0" alt="delete"&gt;&lt;/a&gt;';
        }
        echo "&lt;td&gt;$extra $v&lt;/td&gt;";
    }
    echo '&lt;/tr&gt;';
}
echo '&lt;/table&gt;';
echo $this-&gt;paginationControl($this-&gt;paginator, 'Sliding', '_paginator.php');
</code></pre>

<p>}else{</p>

<pre><code>echo 'no results...';
</code></pre>

<p>}</p>

<p>```</p>

<h3>Pagination Controls Partial</h3>


<p>```php</p>

<p>&lt;?php if ($this->pageCount): ?></p>

<div class="pagination">

<?php if (isset($this->previous)): ?>
  <a href="<?= $this->url(array('page' => $this->previous)); ?>">Â« PREV</a> -
<?php endif; ?>

<?php
    /* Page links */

    foreach ($this->pagesInRange as $page): ?>
    <a href="<?= $this->url(array('page' => $page)); ?>" <?php if($page == $this->current): ?>id="selected"><?php endif; ?><?= $page; ?></a>
<?php endforeach; ?>

<?php if (isset($this->next)): ?>
 - <a href="<?= $this->url(array('page' => $this->next)); ?>">Next ></a>
<?php endif; ?>

</div>


<p>&lt;?php endif; ?></p>

<p>```</p>
]]></content>
  </entry>
  
</feed>
