<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: logout | Edmonds Commerce Dev Blog]]></title>
  <link href="http://edmondscommerce.github.io/tag/logout/atom.xml" rel="self"/>
  <link href="http://edmondscommerce.github.io/"/>
  <updated>2015-05-07T15:20:44+01:00</updated>
  <id>http://edmondscommerce.github.io/</id>
  <author>
    <name><![CDATA[EdmondsCommerce Development Team]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Redirect to previous page in Magento after logout]]></title>
    <link href="http://edmondscommerce.github.io/magento/redirect-to-previous-page-in-magento-after-logout.html"/>
    <updated>2014-02-25T15:58:02+00:00</updated>
    <id>http://edmondscommerce.github.io/magento/redirect-to-previous-page-in-magento-after-logout</id>
    <content type="html"><![CDATA[<p>By default Magento sends a user to a logoutSuccess page after they choose to log out. This is &lsquo;hard-baked&rsquo; into the Customer controller&rsquo;s logout action in the line <code>$this-&gt;_redirect('*/*/logoutSuccess');</code>. You can choose to set the Javascript redirect in the template <code>customer/logout.phtml</code>, but a better idea is to bypass the logout success page entirely.</p>

<p>The way to do this is to override the <code>logoutAction()</code> method in the <code>customerController</code>:</p>

<ol>
<li><a href="http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller">Rewrite the customer controller as documented here</a></li>
<li>Override the <code>logoutAction()</code> method</li>
<li>Set the redirect as below</li>
</ol>


<p>```php</p>

<pre><code>&lt;?php
require_once 'Mage/Customer/controllers/AccountController.php';


class EdmondsCommerce_LogoutRedirect_AccountController extends Mage_Customer_AccountController {
    public function logoutAction()
    {
        $url = Mage::getSingleton('core/session')-&gt;getLastUrl();
        $this-&gt;_getSession()-&gt;logout()
            -&gt;setBeforeAuthUrl(Mage::getUrl());

        $this-&gt;_redirectUrl($url);
    }
}
</code></pre>

<p>```</p>
]]></content>
  </entry>
  
</feed>
