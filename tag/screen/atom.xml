<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: screen | Edmonds Commerce Dev Blog]]></title>
  <link href="http://edmondscommerce.github.io/tag/screen/atom.xml" rel="self"/>
  <link href="http://edmondscommerce.github.io/"/>
  <updated>2015-04-01T12:08:44+01:00</updated>
  <id>http://edmondscommerce.github.io/</id>
  <author>
    <name><![CDATA[EdmondsCommerce Development Team]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Linux Bash Scripting: Force Screen if not Cron Task]]></title>
    <link href="http://edmondscommerce.github.io/linux/linux-bash-scripting-force-screen-if-not-cron-task.html"/>
    <updated>2012-08-30T09:27:16+01:00</updated>
    <id>http://edmondscommerce.github.io/linux/linux-bash-scripting-force-screen-if-not-cron-task</id>
    <content type="html"><![CDATA[<p>If you have a long running script that is designed to run as cron but may be run manually from the terminal then you may want to enforce screen so that the process can&rsquo;t be aborted by the SSH terminal being closed for whatever reason.</p>

<p>We already blogged about how to <a href="http://www.edmondscommerce.co.uk/linux/force-a-bash-script-to-run-in-screen/" title="Linux Force Screen">force running as screen here</a>.</p>

<p>This is an extension of this that also checks for running as Cron and if so, does not force screen.</p>

<p>```bash</p>

<h1>First off, ensure running from Cron and if not, Screen</h1>

<p>if [ -t 1 ]
then</p>

<pre><code>echo &amp;quot;Not running as Cron Task&amp;quot;
if [ -n &amp;quot;$STY&amp;quot; ];
then
    echo 'We are inside screen, good';
else
    echo &amp;quot;Not in a screen, please run with screen&amp;quot;
    echo &amp;quot;Exiting&amp;quot;
    exit 1
fi
</code></pre>

<p>else</p>

<pre><code>echo &amp;quot;Running as Cron Task&amp;quot;
</code></pre>

<p>fi</p>

<p>```</p>

<p>Simply paste this somewhere close to the top of your script before it does anything and this will work nicely.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Force a Bash Script to run in Screen]]></title>
    <link href="http://edmondscommerce.github.io/linux/force-a-bash-script-to-run-in-screen.html"/>
    <updated>2012-01-10T13:13:59+00:00</updated>
    <id>http://edmondscommerce.github.io/linux/force-a-bash-script-to-run-in-screen</id>
    <content type="html"><![CDATA[<p>If you create a bash script for a long running process then you may decide its much better, or even essential, that this script is run using screen.</p>

<p>Screen is a utility that allows you to run things in a detachable terminal on the server, so you are not reliant on your own machine maintaining a ssh connection to the server.</p>

<p>A nice trick here is to check if a script is running in screen and die if not</p>

<p>```</p>

<p>echo &ldquo;Running Process in separate screen&rdquo;</p>

<p>if [ -n &ldquo;$STY&rdquo; ];
then</p>

<pre><code>    echo 'We are inside screen';
</code></pre>

<p>else</p>

<pre><code>    echo "Not in a screen, please run with screen"
    exit 1
</code></pre>

<p>fi</p>

<p>```</p>
]]></content>
  </entry>
  
</feed>
