<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: bulk | Edmonds Commerce Dev Blog]]></title>
  <link href="http://edmondscommerce.github.io/tag/bulk/atom.xml" rel="self"/>
  <link href="http://edmondscommerce.github.io/"/>
  <updated>2014-11-14T13:57:47+00:00</updated>
  <id>http://edmondscommerce.github.io/</id>
  <author>
    <name><![CDATA[EdmondsCommerce Development Team]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Magmi]]></title>
    <link href="http://edmondscommerce.github.io/magento/magmi.html"/>
    <updated>2013-06-07T13:39:01+01:00</updated>
    <id>http://edmondscommerce.github.io/magento/magmi</id>
    <content type="html"><![CDATA[<p>It used to be that importing products into Magento was incredibly time consuming and difficult to handle. Whilst recent updates to Magento has improved the Dataflow process it is still not a perfect solution.</p>

<p>To help get round this a project was set-up called <a href="http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Main_Page" title="Magmi">Magmi</a> which allowed products to be imported directly, rather than using the Magento ORM. As this evolved it added more useful features and is now the only way that I handle importing products into Magento.</p>

<p>There are a couple of steps that need to be carried out before the system can be used properly. After it has been installed the first thing that needs to be done is to secure the web interface. This can be done using Basic Auth or IP restrictions in Apache. To generate a basic auth password for a .htaccess file you can use this <a href="http://tools.dynamicdrive.com/password/">handy tool</a>.</p>

<p>Once you have it secured the next step is to install some extensions to allow you to use some of the more advanced features. To install plugins you download them from here:<a href="http://sourceforge.net/projects/magmi/files/magmi-0.7/plugins/individual/">http://sourceforge.net/projects/magmi/files/magmi-0.7/plugins/individual/</a> and then extract them into the plugins folder.</p>

<p>Or you can use plugin packages and you can actually install these directly from the web interface if your server supports it (Thanks Dweeves).</p>

<p>The plugins are really what makes MAGMI so great as they allow you to do things like handle configurable products, categories and other things that standard dataflow and import/export are no where near being able to offer.</p>

<p>For advanced purposes it is possible to leverage the power of MAGMI in your own custom import purposes as part of a bespoke application using <a href="http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Datapump_API">MAGMI datapump</a>. We have used this technique for numerous clients when building a direct import from supplier feeds etc.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Force a Bash Script to run in Screen]]></title>
    <link href="http://edmondscommerce.github.io/linux/force-a-bash-script-to-run-in-screen.html"/>
    <updated>2012-01-10T13:13:59+00:00</updated>
    <id>http://edmondscommerce.github.io/linux/force-a-bash-script-to-run-in-screen</id>
    <content type="html"><![CDATA[<p>If you create a bash script for a long running process then you may decide its much better, or even essential, that this script is run using screen.</p>

<p>Screen is a utility that allows you to run things in a detachable terminal on the server, so you are not reliant on your own machine maintaining a ssh connection to the server.</p>

<p>A nice trick here is to check if a script is running in screen and die if not</p>

<p>```</p>

<p>echo &ldquo;Running Process in separate screen&rdquo;</p>

<p>if [ -n &ldquo;$STY&rdquo; ];
then</p>

<pre><code>    echo 'We are inside screen';
</code></pre>

<p>else</p>

<pre><code>    echo "Not in a screen, please run with screen"
    exit 1
</code></pre>

<p>fi</p>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Very High Speed Batch Update Multiple Rows of a Table in Single Query]]></title>
    <link href="http://edmondscommerce.github.io/mysql/very-high-speed-batch-update-multiple-rows-of-a-table-in-single-query.html"/>
    <updated>2011-10-13T14:00:26+01:00</updated>
    <id>http://edmondscommerce.github.io/mysql/very-high-speed-batch-update-multiple-rows-of-a-table-in-single-query</id>
    <content type="html"><![CDATA[<div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>If you need to update a large number of rows on a single table then your first reaction may be to write a loop that updates one row at a time.</p>

<p>Of course if the table is large then this can result in a very large number of SQL queries.</p>

<p>Taking a bit of inspiration from <a href="http://www.kavoir.com/2009/05/mysql-update-multiple-rows-with-one-single-query.html">this post</a> I have put together this simple PHP function that will allow you to update as many rows as you want.</p>

<p>The trade off is basically memory usage as you build up a big array of row update information preparing for the batch. For this reason you may want to tune the number of rows you update per query.</p>

<p>```php</p>

<p>function bulkUpdateSingleColumn($table, $id_column, $update_column, array &amp;$idstovals){</p>

<pre><code>    $sql = "update $table set $update_column = CASE $id_column ";
    foreach($idstovals as $id=&gt;$val){
        $sql .= " WHEN '$id' THEN '$val' \n";
    }
    $sql .= " END 
    WHERE $id_column in (" . implode(',', array_keys($idstovals)) . ")";
</code></pre>

<p>//debugging info</p>

<pre><code>    echo '&lt;small&gt;'.$sql.'&lt;/small&gt;';
    $idstovals=array();        
    db_query($sql);       
    done();        
}
</code></pre>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MySQL Bulk Update Collation and Character Set for Entire Database]]></title>
    <link href="http://edmondscommerce.github.io/mysql/mysql-bulk-update-collation-and-character-set-for-entire-database.html"/>
    <updated>2010-05-26T17:06:10+01:00</updated>
    <id>http://edmondscommerce.github.io/mysql/mysql-bulk-update-collation-and-character-set-for-entire-database</id>
    <content type="html"><![CDATA[<div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>If you need to change the character set and collation for all columns and tables on an entire database then check out this little PHP script.</p>

<p>It&rsquo;s currently Zend Framework based, though only for the database adapter &ndash; you could easily modify this to suit your own database connection.</p>

<p>```php</p>

<p>&lt;?php
/<em> collationChange
 * Edmonds Commerce
 * www.edmondscommerce.co.uk
 * <a href="&#x6d;&#97;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#105;&#110;&#102;&#x6f;&#64;&#x65;&#x64;&#x6d;&#111;&#x6e;&#x64;&#x73;&#x63;&#x6f;&#109;&#109;&#x65;&#x72;&#99;&#x65;&#x2e;&#x63;&#111;&#x2e;&#117;&#107;">&#x69;&#x6e;&#x66;&#111;&#64;&#101;&#100;&#109;&#x6f;&#x6e;&#100;&#x73;&#99;&#111;&#109;&#x6d;&#x65;&#x72;&#99;&#x65;&#x2e;&#x63;&#x6f;&#x2e;&#117;&#107;</a>
 * 0844 357 0201
 *
 * Description:
 *
 * Bulk Change the Collation and Character Set for an Entire Database
 *
 * Inspiration Came from Here:
 * <a href="http://serverfault.com/questions/65043/alter-charset-and-collation-in-all-columns-in-all-tables-in-mysql">http://serverfault.com/questions/65043/alter-charset-and-collation-in-all-columns-in-all-tables-in-mysql</a>
 *
 </em>/</p>

<p>//get Db connection etc
require(&lsquo;../_top.php&rsquo;);
$db = Zend_Registry::get(&lsquo;dbAdapter&rsquo;);</p>

<p>$dbName=&lsquo;SET_THE_DB_NAME&rsquo;;
$character_set = &lsquo;utf8&rsquo;;
$collation = &lsquo;utf8_general_ci&rsquo;;</p>

<p>$stmt = $db->query(&ldquo;SELECT distinct CONCAT( &lsquo;alter table &rsquo;, TABLE_SCHEMA, &lsquo;.&rsquo;, TABLE_NAME, &lsquo;  CONVERT TO CHARACTER SET $character_set COLLATE $collation;&rsquo; ) as query, TABLE_NAME as t FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = &lsquo;$dbName&rsquo;;&rdquo;);
while($r=$stmt->fetch()){</p>

<pre><code>$db-&gt;query($r['query']);
echo "&lt;h3&gt;Done {$r['t']}&lt;/h3&gt;";
</code></pre>

<p>}</p>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu Bulk Find And Replace GUI - Regexxer]]></title>
    <link href="http://edmondscommerce.github.io/ubuntu/ubuntu-bulk-find-and-replace-gui-regexxer.html"/>
    <updated>2010-01-29T13:21:27+00:00</updated>
    <id>http://edmondscommerce.github.io/ubuntu/ubuntu-bulk-find-and-replace-gui-regexxer</id>
    <content type="html"><![CDATA[<div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>


<p>If you need to do a bulk find and replace operation on a load of files within a particular folder structure, for example when refactoring some of your code, then instead of trying to use your IDE you could give this little app a try.</p>

<p>It&rsquo;s called Regexxer:</p>

<p><a href="http://regexxer.sourceforge.net/"><a href="http://regexxer.sourceforge.net/">http://regexxer.sourceforge.net/</a></a></p>

<p>And is in the Ubuntu repositories (Software Centre) so is only a couple of clicks away from being installed.</p>

<p>(Note previously I have recommended Search Monkey and I still think that&rsquo;s a great tool, but it doesn&rsquo;t seem to do replace, only find).</p>
]]></content>
  </entry>
  
</feed>
