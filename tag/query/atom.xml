<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: query | Edmonds Commerce Dev Blog]]></title>
  <link href="http://edmondscommerce.github.io/tag/query/atom.xml" rel="self"/>
  <link href="http://edmondscommerce.github.io/"/>
  <updated>2014-09-25T15:23:21+01:00</updated>
  <id>http://edmondscommerce.github.io/</id>
  <author>
    <name><![CDATA[EdmondsCommerce Development Team]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[MySQL Substring not Returning Anything + Solution]]></title>
    <link href="http://edmondscommerce.github.io/mysql/mysql-substring-not-returning-anything-solution.html"/>
    <updated>2013-08-20T10:54:20+01:00</updated>
    <id>http://edmondscommerce.github.io/mysql/mysql-substring-not-returning-anything-solution</id>
    <content type="html"><![CDATA[<p>If you are puzzled why your simple usage of the MySQL SUBSTRING() function is not returning anything this could be your solution.</p>

<p>The substring function allows you to specify a string (eg a column), the start character and the length. If you are used to languages like PHP then you are probably used to this kind of function regarding 0 as the starting character. In fact this function regards 1 as the starting character. If you specify 0 then you simply won&rsquo;t get any results.</p>

<p>This does not work:
```</p>

<p>SELECT SUBSTRING(column, 0, 10) as tenchars</p>

<p>```</p>

<p>This does work:
```</p>

<p>SELECT SUBSTRING(column, 1, 10) as tenchars</p>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Run Multiple MySQL Queries in a Single Function]]></title>
    <link href="http://edmondscommerce.github.io/php/run-multiple-mysql-queries-in-a-single-function.html"/>
    <updated>2012-11-14T12:45:09+00:00</updated>
    <id>http://edmondscommerce.github.io/php/run-multiple-mysql-queries-in-a-single-function</id>
    <content type="html"><![CDATA[<p>If you want to be able to run multiple queries in a single function call, for example doing the classic drop table blah; create table blah; then you might like this function.</p>

<p>The use case is for things like database migration systems which you might copy and paste chunks of SQL including multiple queries from things like phpMyAdmin</p>

<p>```php</p>

<p>/<em>*
 * Run multiple queries passed in as a single string
 * This is optimised for copying and pasting from phpMyAdmin
 *
 * Handy for things like database migration systems
 *
 * @param string $sql  multiple queries terminated with ; and a new line
 </em>/
function multiQuery($sql)
{</p>

<pre><code>$sqls = preg_split('%;$%m', trim($sql));
foreach ($sqls as $q) {
    if (empty($q)) {
        continue;
    }
    mysql_query($q); //suggest you replace this with your custom query function or if not throw in some extra error checking at least
}
</code></pre>

<p>}</p>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Magento Profiler Improved - Aoe_Profiler by Fabrizio Branca]]></title>
    <link href="http://edmondscommerce.github.io/magento/magento-profiler-improved-aoe_profiler-by-fabrizio-branca.html"/>
    <updated>2012-08-17T15:31:32+01:00</updated>
    <id>http://edmondscommerce.github.io/magento/magento-profiler-improved-aoe_profiler-by-fabrizio-branca</id>
    <content type="html"><![CDATA[<p>The Magento profiler is useful when you are trying to discover what potential bottlenecks are in place in a specific Magento implementation that are slowing down the performance of the site. Often when doing this kind of analysis you might find that a particular block or extension is responsible for more than 70% of the total page load time. At this point you would choose to either optimise, cache or disable the block altogether to remove this performance bottleneck and improve page speed significantly.</p>

<p>If you have ever tried to use Magento&rsquo;s built in profiler you will no doubt agree with Fabrizio&rsquo;s comments that, when you have it working, the output is hard to read and not really very useful in terms of seeing what is actually going on.</p>

<p>To aid with this process and give us a nice colourful and friendly user interface to the Magento profiler, Fabrizio has built a Magento module that extends the default profiler and makes it a much more useful tool.</p>

<p>You can download the extension from <a href="https://github.com/fbrnc/Aoe_Profiler" title="Magento Aoe Profiler on Git Hub" target="_blank">git hub here</a>.</p>

<p>Read the full blog story <a href="http://www.fabrizio-branca.de/magento-profiler.html" title="Fabrizio Branch blog" target="_blank">here</a>.</p>

<p>If you would like some help optimising the performance of your Magento store, feel free to get in touch with Edmonds Commerce today and we can assist in getting the very best performance from your Magento web site.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Wondering what you're waiting for? Mytop tells all]]></title>
    <link href="http://edmondscommerce.github.io/mysql/wondering-what-youre-waiting-for-mytop-tells-all.html"/>
    <updated>2012-08-14T16:03:11+01:00</updated>
    <id>http://edmondscommerce.github.io/mysql/wondering-what-youre-waiting-for-mytop-tells-all</id>
    <content type="html"><![CDATA[<p>Mytop is a handy utility which shows what queries are currently being executed on your MySQL server &ndash; useful for those times when you&rsquo;re not quite sure if it&rsquo;s still on the job</p>

<p>Running mytop is easy, just run it from the command line and it&rsquo;ll give you a top-like list of any queries currently being executed on the server
You need to tell my top how it should connect to your database. You <em>can</em> specify everything as parameters on the command, such as
```bash</p>

<p>$ mytop -u=myuser -p=mypassword &mdash;db=mydatabase -P=3306</p>

<p>```</p>

<p>But chances are you&rsquo;re not changing your database server <em>that</em> often.</p>

<h3>Setting the default parameters for mytop</h3>


<p>If you want to save yourself the effort of repeatedly typing the same details over and over, just tell mytop what you want it to choose if you don&rsquo;t tell it any parameters</p>

<p>All you need to do is let mytop know how to connect to your MySQL database in the form of a config file called .mytop in your home folder, with the following contents (replace as necessary):</p>

<blockquote>
<code>
     user=myuser
         pass=
         host=my.host.name
         db=
         delay=5
         port=3306
         socket=
         batchmode=0
         header=1
         color=1
         idle=1
</code>
</blockquote>


<p>You can add as many or as few of these as you like for easy configuration, like specifying the db flag if you&rsquo;re primarily accessing only one database. I like to leave the password field blank, and use the &mdash;prompt flag to avoid any awkward leaks!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Magento Controller Action Return Json (for AJAX, API etc)]]></title>
    <link href="http://edmondscommerce.github.io/magento/magento-controller-action-return-json-for-ajax-api-etc.html"/>
    <updated>2012-02-15T14:15:01+00:00</updated>
    <id>http://edmondscommerce.github.io/magento/magento-controller-action-return-json-for-ajax-api-etc</id>
    <content type="html"><![CDATA[<p>If you have a controller action that is designed to be accessed by AJAX requests or perhaps as part of a custom API system then you might like this snippet.</p>

<p>If you are working with the above scenario you likely would like to return pure JSON without any HTML etc. Also serving up the correct content type headers is going to be helpful, its not HTML, its JSON.</p>

<p>```php</p>

<pre><code>public function searchAction(){
    $query = $this-&gt;getRequest()-&gt;getParam('query');
    $json = Mage::getModel('mymodule/mymodel')-&gt;getSearchJson($query);
    $this-&gt;getResponse()-&gt;setHeader('Content-type', 'application/json');
    $this-&gt;getResponse()-&gt;setBody($json);
}
</code></pre>

<p>```</p>
]]></content>
  </entry>
  
</feed>
