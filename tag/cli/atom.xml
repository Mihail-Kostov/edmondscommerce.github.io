<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: cli | Edmonds Commerce Dev Blog]]></title>
  <link href="http://edmondscommerce.github.io/tag/cli/atom.xml" rel="self"/>
  <link href="http://edmondscommerce.github.io/"/>
  <updated>2014-04-28T13:25:53+01:00</updated>
  <id>http://edmondscommerce.github.io/</id>
  <author>
    <name><![CDATA[EdmondsCommerce Development Team]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Running PHP Scripts on CLI and Faking a Web Request]]></title>
    <link href="http://edmondscommerce.github.io/php/running-php-scripts-on-cli-and-faking-a-web-request.html"/>
    <updated>2014-02-14T17:31:14+00:00</updated>
    <id>http://edmondscommerce.github.io/php/running-php-scripts-on-cli-and-faking-a-web-request</id>
    <content type="html"><![CDATA[<p>Some times you build a PHP script that is designed to run from a web request and you want to run it on the command line.
The problem is that you have used the standard PHP super globals and you would rather not refactor the script loads.</p>

<p>Here is a nice quick solution:</p>

<p>``` php
if(isset($argc)){</p>

<pre><code>for ($i = 1; $i &lt; $argc; $i++) {
    $things = explode("=", $argv[$i]);
    if (false !== stripos($things[0], 'POST:')) {
         $post = str_replace('POST:', '', $things[0]);
         $_POST[$post] = $things[1];
    } else {
         $_GET[$things[0]] = $things[1];
    }
}
</code></pre>

<p>}</p>

<p>echo &ldquo;\nGET:\n&rdquo;;
var_dump($<em>GET);
echo &ldquo;\nPOST:\n&rdquo;;
var_dump($</em>POST);</p>

<p><code>``
This will loop over the argc variable that is defined when running in CLI mode and will fake the</code>$<em>GET<code>and</code>$</em>POST` variables as required.</p>

<p>To run this with get and post variables you would do this:</p>

<p><code>
php -f script.php getvar1=test getvar2=foo POST:postvar1=bar
</code></p>

<p>And that&rsquo;s it. It is not particularly pretty but it can be pretty handy.</p>
]]></content>
  </entry>
  
</feed>
