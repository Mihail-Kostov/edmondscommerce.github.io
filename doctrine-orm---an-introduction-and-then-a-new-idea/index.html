<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Doctrine Orm - An Introduction and Then a New Idea &middot; </title>

  
  <link rel="stylesheet" href="https://edmondscommerce.github.io/css/poole.css">
  <link rel="stylesheet" href="https://edmondscommerce.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://edmondscommerce.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="https://edmondscommerce.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://edmondscommerce.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="https://edmondscommerce.github.io/css/highlight/github.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link href="https://edmondscommerce.github.io/favicon.ico" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'google analytics', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
    <div class="container sidebar-sticky">
        <div class="sidebar-about">
            
            <a href="/"><img src="/images/eclogo.png"
                             alt="gravatar" title="">
            </a>
            
            <h1></h1>
            
        </div>
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency. We are based in <a href="https://www.edmondscommerce.co.uk/contact#find-us"><strong>Shipley</strong>
            which is in <strong>Yorkshire</strong> near <strong>Leeds</strong> and <strong>Bradford</strong></a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento and Magento2</a> and other PHP based
            E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in <a href="http://php.net/">PHP</a>, <a
                href="http://www.mysql.com/">MySQL</a>, <a href="http://www.linuxfoundation.org/">Linux</a>,
            <a href="http://www.w3.org/standards/techs/html#w3c_all">HTML</a>, <a
                href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a> and <a
                href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.


        <ul class="sidebar-nav">
            
        </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/edmondscommerce"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/company/edmonds-commerce"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="https://plus.google.com/104488822194646220248?rel=author"><i class="fa fa-google-plus-square fa-3x"></i></a>
      
      <a href="https://twitter.com/edmondscommerce"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="https://edmondscommerce.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
      <p>
        <a href="https://www.edmondscommerce.co.uk/contact#contact-us">Contact Form</a><br>
        <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br>
        <a href="tel:00441138805654">0044 113 880 5654</a>
      </p>
    </ul>

    

    </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Doctrine Orm - An Introduction and Then a New Idea</h1>
    <span class="post-date">Sep 14, 2017 &middot; 3 minute read
    
    <br/>
      <strong>Category: </strong>
    <a class="label" href="https://edmondscommerce.github.io/categories/doctrine">doctrine</a>
    </span>
    

<h2 id="what-is-doctrine-orm">What is Doctrine ORM</h2>

<p>Doctrine is one of the most popular ORM systems for PHP. It is written as a fully standalone library though is most famously used as the ORM that is bundled with a standard Symfony project.</p>

<p>Read the docs here<a href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/getting-started.html#what-is-doctrine" target="_blank">here</a></p>

<p>Doctrine ORM is only one of the <a href="http://www.doctrine-project.org/projects.html" target="_blank">projects</a> projects that Doctrine has built, however it does build upon all of the other projects.</p>

<h2 id="what-is-an-orm">What is an ORM</h2>

<p>An ORM, or Object Relational Mapper, attempts to allow developers write code and work with objects and then have the persistance and relation of those objects handled behind the scenes, thereby allowing the developer to focus on the domain issues and not in hand crafting a large amount of SQL schema and query logic.</p>

<p>This becomes especially useful as a project progresses and things are added or refactored. The ORM can ultimately allow the developer to focus on the code and then the schema and query logic can be updated as you go, generally with something called database migrations. The benefit of not having to manually refactor large amounts of SQL logic is definitely not to be sniffed at.</p>

<p>Generally when working with Doctrine entities, the code is very much plain vanilla PHP. I prefer to keep the Doctrine entities as basic as possible, purely focussed on data access <a href="https://en.wikipedia.org/wiki/Data_access_object" target="_blank">data access</a>, with any extra logic then being handled in other classes. Again this aids with refactoring and comprehension and sticks more closely to the <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle" target="_blank">single responsibility principle</a> single responsibility principle.</p>

<h2 id="doctrine-metadata">Doctrine Metadata</h2>

<p>The crux of Doctrine&rsquo;s work hinges around the management and utlisation of meta data which describes exactly how entities are structured and related to each other and how they should be stored and represented in the database.</p>

<p>There are three main ways people tend to manage this meta data, XML, Yaml and PHP Annotations. They all have their pros and cons, though I think it would be fair to say that the PHP Annotations approach is probably the most popular.</p>

<p>You can read all about the <a href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/metadata-drivers.html#core-metadata-drivers" target="_blank">meta data drivers on Doctrines documentation</a>.</p>

<h2 id="new-idea">New Idea</h2>

<p>In addition to the traditional three drivers of XML, Yaml and PHP Annotations there is a <a href="https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/Persistence/Mapping/Driver/StaticPHPDriver.php" target="_blank">Static PHP Driver</a> which is documented <a href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/php-mapping.html#static-function" target="_blank">here</a></p>

<p>I think this is a perfect compromise, it keeps things in pure PHP but also in the Entity classes.</p>

<p>To explore this idea I have developed a small repo that utilises this driver and present a possible way it can be used to power a highly trait driven way of composing Doctrine entities.</p>

<p>Rather than repeat myself, I&rsquo;ll simply link you through to the project <a href="https://github.com/edmondscommerce/doctrine-static-meta" target="_blank">Doctrine Static Meta</a>, also available on <a href="https://packagist.org/packages/edmondscommerce/doctrine-static-meta" target="_blank">packagist</a></p>

  </div>
  
  <br/>
  <strong>Tags: </strong>
  <a class="label" href="https://edmondscommerce.github.io/tags/doctrine">doctrine</a><a class="label" href="https://edmondscommerce.github.io/tags/orm">orm</a><a class="label" href="https://edmondscommerce.github.io/tags/php">php</a><a class="label" href="https://edmondscommerce.github.io/tags/database">database</a>
  
  
</div>




<script src="https://edmondscommerce.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'auto');
    ga('send', 'pageview');

</script>

</body>
</html>

