<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Speeding Up osCommerce &middot; </title>

  
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/poole.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="http://edmondscommerce.github.io/css/highlight/github.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link href="http://edmondscommerce.github.io/favicon.ico" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'google analytics', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <a href="/"><img src="/images/eclogo.png"
             alt="gravatar" title="">
        </a>
      
      <h1></h1>
      
    </div>
    <p>
      <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
      agency. We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
    </p>

    <p>
      Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
      such as <a href="http://www.opencart.com/">OpenCart</a>.
    </p>

    <p>
      In terms of technology we are very strong in <a href="http://php.net/">PHP</a>, <a href="http://www.mysql.com/">MySQL</a>, <a href="http://www.linuxfoundation.org/">Linux</a>,
      <a href="http://www.w3.org/standards/techs/html#w3c_all">HTML</a><a>, <a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a> and <a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
  </ul>


    <ul class="sidebar-nav">
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/edmondscommerce"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/company/edmonds-commerce"><i class="fa fa-linkedin-square fa-3x"></i></a>
      <a href="https://plus.google.com/104488822194646220248?rel=author"><i class="fa fa-google-plus-square fa-3x"></i></a>
      
      <a href="https://twitter.com/edmondscommerce"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="http://edmondscommerce.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
      <p>
        <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br>
        <a href="tel:00441138805654">0044 113 880 5654</a>
      </p>
    </ul>

    

  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Speeding Up osCommerce</h1>
    <span class="post-date">Feb 6, 2008 &middot; 2 minute read
    
    <br/>
    <a class="label" href="http://edmondscommerce.github.io/categories/oscommerce">oscommerce</a>
    </span>
    <p><div class="oldpost"><h4>This is post is now quite old and the the information it contains may be out of date or innacurate.</h4>
<p>
If you find any errors or have any suggestions to update the information <a href="http://edmondscommerce.github.io/contact-us/index.html">please let us know</a>
or <a href="https://github.com/edmondscommerce/edmondscommerce.github.io">create a pull request on GitHub</a>
</p>
</div>
osCommerce is a great ecommerce package which is hugely popular due to its full feature set, massive options for customisation and a huge support base. However if you want to run a large catalogue, or have plenty of visitors then speed can become an issue. There are  a <a href="http://www.oscommerceblog.com/index.php/2007/01/08/oscommerce-performance-and-speed-issues-resolution/" target="_blank">number of things</a> you should look at to increase the overall speed of your osCommerce store</p>

<p>The problem is in the way that osCommerce has evolved, and also in the way that they have tried to make the code base as portable as possible. This means that as standard, the software may be doing quite a few processes that are not really necessary for your store.</p>

<p>One of the biggest culprits of page load time problems, especially on sites with large catalogues is the split_page_results class.  In standard trim, the class performs the most complex query of your catalogue page twice - once to find the number of rows and a second time to actually grab the results. On a small site you may not notice this, but on a larger site this query can represent a large portion of the total page load time.</p>

<p>The answer is to modify the class so that it uses the SQL_CALC_FOUND_ROWS functionality to simultaneously perform the query and calculate the total number of rows. Then to get this number of rows, you only have to select FOUND_ROWS() instead of performing the whole query again.</p>
<div class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="x">$count_query = str_replace(&#39;select&#39;, &#39;select SQL_CALC_FOUND_ROWS &#39;, $this-&gt;sql_query);</span>
<span class="x">if(!isset($this-&gt;current_page_number)){</span>
<span class="x">$this-&gt;current_page_number = 1;</span>
<span class="x">}</span>
<span class="x">$current_limit = &quot; limit &quot; . ((($this-&gt;current_page_number -1) * $this-&gt;number_of_rows_per_page)) .&#39;, &#39; . $this-&gt;number_of_rows_per_page;</span>
<span class="x">$this-&gt;sql_query = $count_query . $current_limit;</span>
<span class="x">$this-&gt;sql_query = tep_db_query($this-&gt;sql_query);</span>
<span class="x">$count = tep_db_query(&quot;select FOUND_ROWS()&quot;);</span>
<span class="x">$this-&gt;number_of_rows = mysql_result($count, 0);</span>
</code></pre></div>

  </div>
  
</div>




<script src="http://edmondscommerce.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

